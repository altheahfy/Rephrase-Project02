<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Rephrase ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°UI
  </title>
  <link href="style.css" rel="stylesheet"/>
  <script src="js/subslot_toggle.js">
  </script>
  <script src="js/randomizer_individual.js">
  </script>
  <script src="js/control_panel_manager.js">
  </script>
  <script src="js/visibility_control.js">
  </script>
  <script src="js/subslot_visibility_control.js">
  </script>
  <script src="js/image_auto_hide.js">
  </script>
  <script src="js/question_word_visibility.js">
  </script>
 </head>
 <body>

<!-- ğŸ”¹ åˆ†é›¢ç–‘å•è©ç”¨è¡¨ç¤ºé ˜åŸŸ -->
<div id="display-top-question-word" style="font-size: 1.4rem; font-weight: bold; margin-bottom: 1rem; color: #2a2a2a;">
  <div class="question-word-text"></div>
  <div class="question-word-auxtext" style="font-size: 0.9rem; color: #666; margin-top: 4px;"></div>
</div>

<!-- å³ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ»ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒªã‚¢ -->
<div id="file-load-area" style="position: fixed; top: 10px; right: 10px; z-index: 1000; background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 5px; border: 1px solid #ddd;">
  <input type="file" id="jsonFileInput" accept=".json" style="margin-bottom: 5px; font-size: 12px;">
  <button id="loadJsonButton" style="background-color: #2196F3; color: white; border: none; padding: 5px 10px; font-size: 12px; cursor: pointer; border-radius: 3px;">ãƒ­ãƒ¼ãƒ‰</button>
</div>

  <section>
  </section>
  
  <!-- ã‚¿ã‚¤ãƒˆãƒ«ã¨åˆ¶å¾¡ãƒ‘ãƒãƒ«ãƒœã‚¿ãƒ³ã‚’æ¨ªä¸¦ã³ã«é…ç½® -->
  <div style="display: flex; align-items: center; justify-content: flex-start; margin-bottom: 15px;">
    <h1 style="margin: 0; margin-right: 30px;">
     Rephrase ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°UI
    </h1>
    
    <!-- åˆ¶å¾¡ãƒ‘ãƒãƒ«è¡¨ç¤ºãƒœã‚¿ãƒ³ -->
    <button id="toggle-control-panels" style="background-color: #4a90e2; color: white; border: none; padding: 8px 16px; font-size: 14px; cursor: pointer; border-radius: 5px; margin-right: 20px;">
      åˆ¶å¾¡ãƒ‘ãƒãƒ«
    </button>
  </div>
  
  <!-- ğŸ¯ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆè¡¨ç¤ºåˆ¶å¾¡ãƒ‘ãƒãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆéè¡¨ç¤ºï¼‰ -->
  <div id="visibility-control-panel-inline" style="display: none; background: rgba(255, 255, 255, 0.95); padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin-bottom: 15px;">
      <div style="display: flex; gap: 8px; align-items: center; font-size: 12px;">
        
        <!-- ç–‘å•è© ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="question-word" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">ç–‘å•è©</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="question-word" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="question-word" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- M1 ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="m1" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">M1</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m1" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m1" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m1" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- S ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="s" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">S</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="s" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="s" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="s" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- Aux ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="aux" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">Aux</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="aux" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="aux" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="aux" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- M2 ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="m2" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">M2</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m2" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m2" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m2" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- V ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="v" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">V</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="v" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="v" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="v" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- C1 ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="c1" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">C1</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="c1" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="c1" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="c1" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- O1 ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="o1" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">O1</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="o1" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="o1" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="o1" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- O2 ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="o2" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">O2</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="o2" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="o2" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="o2" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- C2 ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="c2" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">C2</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="c2" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="c2" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="c2" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- M3 ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-control-group" data-slot="m3" style="padding: 4px; border: 1px solid #f0f0f0; border-radius: 3px;">
          <div style="font-weight: bold; font-size: 11px; margin-bottom: 2px; color: #444; text-align: center;">M3</div>
          <div style="display: flex; flex-direction: column; gap: 2px; font-size: 10px;">
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m3" data-type="image" checked> ğŸ–¼ï¸</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m3" data-type="text" checked> ğŸ“„</label>
            <label style="display: flex; align-items: center; gap: 2px;"><input type="checkbox" class="visibility-checkbox" data-slot="m3" data-type="auxtext" checked> ğŸ“</label>
          </div>
        </div>
        
        <!-- å…¨è¡¨ç¤ºãƒœã‚¿ãƒ³ -->
        <button id="reset-all-visibility" style="background-color: #4CAF50; color: white; border: none; padding: 6px 10px; font-size: 11px; cursor: pointer; border-radius: 3px; margin-left: 8px;">å…¨è¡¨ç¤º</button>
      </div>
    </div>
  </div>
  <section>
   <button id="randomize-all">
    ä¾‹æ–‡ã‚·ãƒ£ãƒƒãƒ•ãƒ«
   </button>
   <h2 style="margin-bottom: 15px; margin-top: 20px;">
    ä¾‹æ–‡
   </h2>
   <div class="slot-wrapper">
    <div class="slot-container" id="slot-m1">
     <label>
      M1
     </label>
     <img alt="image for M1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
     <div class="subslot-toggle-button" style="margin-top: 4px;">
      <button data-subslot-toggle="m1">
       â–¼ è©³ç´°
      </button>
     </div>
     <div class="individual-randomize-button" style="margin-top: 4px;">
      <button class="m1-individual-randomize-btn" style="margin-left: 8px;">
       ğŸ²
      </button>
     </div>
    </div>
    <div class="slot-container" id="slot-s">
     <label>
      S
     </label>
     <img alt="image for S" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
     <div class="subslot-toggle-button" style="margin-top: 4px;">
      <button data-subslot-toggle="s">
       â–¼ è©³ç´°
      </button>
     </div>
     <div class="individual-randomize-button" style="margin-top: 4px;">
      <button class="s-individual-randomize-btn" style="margin-left: 8px;">
       ğŸ²
      </button>
     </div>
    </div>
    <div class="slot-container" id="slot-aux">
     <label>
      AUX
     </label>
     <img alt="image for AUX" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="slot-container" id="slot-m2">
     <label>
      M2
     </label>
     <img alt="image for M2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
     <div class="subslot-toggle-button" style="margin-top: 4px;">
      <button data-subslot-toggle="m2">
       â–¼ è©³ç´°
      </button>
     </div>
     <div class="individual-randomize-button" style="margin-top: 4px;">
      <button class="m2-individual-randomize-btn" style="margin-left: 8px;">
       ğŸ²
      </button>
     </div>
    </div>
    <div class="slot-container" id="slot-v">
     <label>
      V
     </label>
     <img alt="image for V" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="slot-container" id="slot-c1">
     <label>
      C1
     </label>
     <img alt="image for C" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
     <div class="subslot-toggle-button" style="margin-top: 4px;">
      <button data-subslot-toggle="c1">
       â–¼ è©³ç´°
      </button>
     </div>
     <div class="individual-randomize-button" style="margin-top: 4px;">
      <button class="c1-individual-randomize-btn" style="margin-left: 8px;">
       ğŸ²
      </button>
     </div>
    </div>
    <div class="slot-container" id="slot-o1">
     <label>
      O1
     </label>
     <img alt="image for O1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
     <div class="subslot-toggle-button" style="margin-top: 4px;">
      <button data-subslot-toggle="o1">
       â–¼ è©³ç´°
      </button>
     </div>
     <div class="individual-randomize-button" style="margin-top: 4px;">
      <button class="o1-individual-randomize-btn" style="margin-left: 8px;">
       ğŸ²
      </button>
     </div>
    </div>
    <div class="slot-container" id="slot-o2">
     <label>
      O2
     </label>
     <img alt="image for O2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
     <div class="subslot-toggle-button" style="margin-top: 4px;">
      <button data-subslot-toggle="o2">
       â–¼ è©³ç´°
      </button>
     </div>
     <div class="individual-randomize-button" style="margin-top: 4px;">
      <button class="o2-individual-randomize-btn" style="margin-left: 8px;">
       ğŸ²
      </button>
     </div>
    </div>
    <div class="slot-container" id="slot-c2">
     <label>
      C2
     </label>
     <img alt="image for C2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
     <div class="subslot-toggle-button" style="margin-top: 4px;">
      <button data-subslot-toggle="c2">
       â–¼ è©³ç´°
      </button>
     </div>
     <div class="individual-randomize-button" style="margin-top: 4px;">
      <button class="c2-individual-randomize-btn" style="margin-left: 8px;">
       ğŸ²
      </button>
     </div>
    </div>
    <div class="slot-container" id="slot-m3">
     <label>
      M3
     </label>
     <img alt="image for M3" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
     <!-- M3ã‚¹ãƒ­ãƒƒãƒˆç”¨ãƒœã‚¿ãƒ³ -->
     <div class="subslot-toggle-button" style="margin-top: 4px;">
      <button data-subslot-toggle="m3">
       â–¼ è©³ç´°
      </button>
     </div>
     <div class="individual-randomize-button" style="margin-top: 4px;">
      <button class="m3-individual-randomize-btn" style="margin-left: 8px;">
       ğŸ²
      </button>
     </div>
    </div>
   </div>
   <div class="slot-wrapper" id="slot-o1-sub" style="display: none;">
    <div class="subslot-label" style="font-weight: bold; margin-bottom: 0.5rem;">
     ç¾åœ¨å±•é–‹ä¸­ï¼šO1 ã® subslot
    </div>
    <div class="subslot" id="slot-o1-sub-m1" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M1
     </label>
     <img alt="image for M1" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-s" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      S
     </label>
     <img alt="image for S" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-aux" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      AUX
     </label>
     <img alt="image for AUX" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-m2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M2
     </label>
     <img alt="image for M2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-v" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      V
     </label>
     <img alt="image for V" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-c1">
     <label>
      C1
     </label>
     <img alt="image for C1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-o1" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      O1
     </label>
     <img alt="image for O1" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-o2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      O2
     </label>
     <img alt="image for O2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-c2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      C2
     </label>
     <img alt="image for C2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o1-sub-m3" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M3
     </label>
     <img alt="image for M3" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
   </div>
   <div class="slot-wrapper" id="slot-m1-sub" style="display: none;">
    <div class="subslot-label" style="font-weight: bold; margin-bottom: 0.5rem;">
     ç¾åœ¨å±•é–‹ä¸­ï¼šM1 ã® subslot
    </div>
    <div class="subslot" id="slot-m1-sub-m1" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M1
     </label>
     <img alt="image for M1" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-s" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      S
     </label>
     <img alt="image for S" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-aux" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      AUX
     </label>
     <img alt="image for AUX" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-m2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M2
     </label>
     <img alt="image for M2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-v" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      V
     </label>
     <img alt="image for V" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-c1">
     <label>
      C1
     </label>
     <img alt="image for C1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-o1" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      O1
     </label>
     <img alt="image for O1" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-o2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      O2
     </label>
     <img alt="image for O2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-c2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      C2
     </label>
     <img alt="image for C2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m1-sub-m3" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M3
     </label>
     <img alt="image for M3" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
   </div>
   <div class="slot-wrapper" id="slot-o2-sub" style="display: none;">
    <div class="subslot-label" style="font-weight: bold; margin-bottom: 0.5rem;">
     ç¾åœ¨å±•é–‹ä¸­ï¼šO2 ã® subslot
    </div>
    <div class="subslot" id="slot-o2-sub-m1" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M1
     </label>
     <img alt="image for M1" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-s" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      S
     </label>
     <img alt="image for S" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-aux" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      AUX
     </label>
     <img alt="image for AUX" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-m2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M2
     </label>
     <img alt="image for M2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-v" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      V
     </label>
     <img alt="image for V" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-c1">
     <label>
      C1
     </label>
     <img alt="image for C1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-o1" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      O1
     </label>
     <img alt="image for O1" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-o2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      O2
     </label>
     <img alt="image for O2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-c2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      C2
     </label>
     <img alt="image for C2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-o2-sub-m3" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M3
     </label>
     <img alt="image for M3" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
   </div>
   <div class="slot-wrapper" id="slot-m2-sub" style="display: none;">
    <div class="subslot-label">
     ç¾åœ¨å±•é–‹ä¸­ï¼šM2 ã® subslot
    </div>
    <div class="subslot" id="slot-m2-sub-m1">
     <label>
      M1
     </label>
     <img alt="image for M1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-s">
     <label>
      S
     </label>
     <img alt="image for S" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-aux">
     <label>
      AUX
     </label>
     <img alt="image for AUX" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-m2">
     <label>
      M2
     </label>
     <img alt="image for M2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-v">
     <label>
      V
     </label>
     <img alt="image for V" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-c1">
     <label>
      C1
     </label>
     <img alt="image for C1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-o1">
     <label>
      O1
     </label>
     <img alt="image for O1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-o2">
     <label>
      O2
     </label>
     <img alt="image for O2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-c2">
     <label>
      C2
     </label>
     <img alt="image for C2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m2-sub-m3">
     <label>
      M3
     </label>
     <img alt="image for M3" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
   </div>
   <div class="slot-wrapper" id="slot-c2-sub" style="display: none;">
    <div class="subslot-label">
     ç¾åœ¨å±•é–‹ä¸­ï¼šC2 ã® subslot
    </div>
    <div class="subslot" id="slot-c2-sub-m1">
     <label>
      M1
     </label>
     <img alt="image for M1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-s">
     <label>
      S
     </label>
     <img alt="image for S" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-aux">
     <label>
      AUX
     </label>
     <img alt="image for AUX" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-m2">
     <label>
      M2
     </label>
     <img alt="image for M2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-v">
     <label>
      V
     </label>
     <img alt="image for V" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-c1">
     <label>
      C1
     </label>
     <img alt="image for C1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-o1" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      O1
     </label>
     <img alt="image for O1" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-o2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      O2
     </label>
     <img alt="image for O2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-c2" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      C2
     </label>
     <img alt="image for C2" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-c2-sub-m3" style="display: flex; flex-direction: column; align-items: center;">
     <label>
      M3
     </label>
     <img alt="image for M3" class="slot-image"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
   </div>
   <div class="slot-wrapper" id="slot-m3-sub" style="display: none;">
    <div class="subslot-label">
     ç¾åœ¨å±•é–‹ä¸­ï¼šM3 ã® subslot
    </div>
    <div class="subslot" id="slot-m3-sub-m1">
     <label>
      M1
     </label>
     <img alt="image for M1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-s">
     <label>
      S
     </label>
     <img alt="image for S" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-aux">
     <label>
      AUX
     </label>
     <img alt="image for AUX" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-m2">
     <label>
      M2
     </label>
     <img alt="image for M2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-v">
     <label>
      V
     </label>
     <img alt="image for V" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-c1">
     <label>
      C1
     </label>
     <img alt="image for C1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-o1">
     <label>
      O1
     </label>
     <img alt="image for O1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-o2">
     <label>
      O2
     </label>
     <img alt="image for O2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-c2">
     <label>
      C2
     </label>
     <img alt="image for C2" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
    <div class="subslot" id="slot-m3-sub-m3">
     <label>
      M3
     </label>
     <img alt="image for M3" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
     <div class="slot-text">
        <div class="slot-phrase"></div>
     </div>
    </div>
   </div>
  </section>
  <div class="slot-wrapper" id="slot-s-sub" style="display: none;">
   <div class="subslot-label">
    ç¾åœ¨å±•é–‹ä¸­ï¼šS ã® subslot
   </div>
   <div class="subslot" id="slot-s-sub-m1">
    <label>
     M1
    </label>
    <img alt="image for M1" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-s">
    <label>
     S
    </label>
    <img alt="image for S" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-aux">
    <label>
     AUX
    </label>
    <img alt="image for AUX" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-m2">
    <label>
     M2
    </label>
    <img alt="image for M2" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-v">
    <label>
     V
    </label>
    <img alt="image for V" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-c1">
    <label>
     C1
    </label>
    <img alt="image for C1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-o1">
    <label>
     O1
    </label>
    <img alt="image for O1" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-o2">
    <label>
     O2
    </label>
    <img alt="image for O2" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-c2">
    <label>
     C2
    </label>
    <img alt="image for C2" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-s-sub-m3">
    <label>
     M3
    </label>
    <img alt="image for M3" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
  </div>
  <div class="slot-wrapper" id="slot-c1-sub" style="display: none;">
   <div class="subslot-label">
    ç¾åœ¨å±•é–‹ä¸­ï¼šC1 ã® subslot
   </div>
   <div class="subslot" id="slot-c1-sub-m1">
    <label>
     M1
    </label>
    <img alt="image for M1" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-s">
    <label>
     S
    </label>
    <img alt="image for S" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-aux">
    <label>
     AUX
    </label>
    <img alt="image for AUX" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-m2">
    <label>
     M2
    </label>
    <img alt="image for M2" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-v">
    <label>
     V
    </label>
    <img alt="image for V" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-c1">
    <label>
     C1
    </label>
    <img alt="image for C1" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-o1">
    <label>
     O1
    </label>
    <img alt="image for O1" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-o2">
    <label>
     O2
    </label>
    <img alt="image for O2" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-c2">
    <label>
     C2
    </label>
    <img alt="image for C2" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
   <div class="subslot" id="slot-c1-sub-m3">
    <label>
     M3
    </label>
    <img alt="image for M3" class="slot-image"/>
        <div class="slot-phrase"></div>
    <div class="slot-text">
        <div class="slot-phrase"></div>
    </div>
   </div>
  </div>
  
  
<script src="js/insert_test_data_clean.js"></script>

<!-- å‹•çš„è¨˜è¼‰ã‚¨ãƒªã‚¢ç”¨ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¦ç´ ã‚’è¿½åŠ  -->
<section id="dynamic-area-container" style="margin-top: 30px;">
  <button id="toggle-dynamic-area" style="background-color: #4CAF50; color: white; border: none; padding: 8px 16px; font-size: 16px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;">
    â–¼ è§£ç­”å…¨æ–‡
  </button>
  <!-- å‹•çš„è¨˜è¼‰ã‚¨ãƒªã‚¢ãŒã“ã“ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
  <div id="dynamic-slot-area-wrapper" style="display: none;"></div>
</section>

<script>
  // å‹•çš„ã‚¨ãƒªã‚¢ã®ç”Ÿæˆä½ç½®ã‚’æŒ‡å®š
  window.addEventListener("DOMContentLoaded", () => {
    const dynamicArea = document.getElementById("dynamic-slot-area");
    const wrapper = document.getElementById("dynamic-slot-area-wrapper");
    
    // æ—¢å­˜ã®dynamic-slot-areaãŒã‚ã‚Œã°ç§»å‹•
    if (dynamicArea && wrapper) {
      // å‹•çš„ã‚¨ãƒªã‚¢ã‚’ãƒ©ãƒƒãƒ‘ãƒ¼ã«ç§»å‹•
      wrapper.appendChild(dynamicArea);
      
      // ã•ã‚‰ã«ã€å‹•çš„ã‚¨ãƒªã‚¢ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’æ–‡æ›¸ã®æœ«å°¾ã«ç§»å‹•
      const container = document.getElementById("dynamic-area-container");
      if (container) {
        document.body.appendChild(container);
        console.log("âœ… å‹•çš„è¨˜è¼‰ã‚¨ãƒªã‚¢ã‚³ãƒ³ãƒ†ãƒŠã‚’æ–‡æ›¸ã®æœ€å¾Œã«ç§»å‹•ã—ã¾ã—ãŸ");
      }
      
      console.log("âœ… å‹•çš„è¨˜è¼‰ã‚¨ãƒªã‚¢ã‚’é©åˆ‡ãªä½ç½®ã«ç§»å‹•ã—ã¾ã—ãŸ");
    } else {
      console.warn("âš  å‹•çš„è¨˜è¼‰ã‚¨ãƒªã‚¢ã¾ãŸã¯ãƒ©ãƒƒãƒ‘ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
    }
  });

  // è§£ç­”å…¨æ–‡ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
  document.getElementById("toggle-dynamic-area").addEventListener("click", () => {
    const wrapper = document.getElementById("dynamic-slot-area-wrapper");
    const button = document.getElementById("toggle-dynamic-area");
    
    if (wrapper.style.display === "none") {
      wrapper.style.display = "block";
      button.textContent = "â–² è§£ç­”å…¨æ–‡";
      button.style.backgroundColor = "#f44336"; // èµ¤è‰²ï¼ˆé–‰ã˜ã‚‹çŠ¶æ…‹ï¼‰
      console.log("âœ… è§£ç­”å…¨æ–‡ã‚¨ãƒªã‚¢ã‚’è¡¨ç¤ºã—ã¾ã—ãŸ");
    } else {
      wrapper.style.display = "none";
      button.textContent = "â–¼ è§£ç­”å…¨æ–‡";
      button.style.backgroundColor = "#4CAF50"; // ç·‘è‰²ï¼ˆé–‹ãçŠ¶æ…‹ï¼‰
      console.log("âœ… è§£ç­”å…¨æ–‡ã‚¨ãƒªã‚¢ã‚’éè¡¨ç¤ºã«ã—ã¾ã—ãŸ");
    }
  });

  // syncDynamicToStatic() ã‚’DOMæç”»å®Œäº†å¾Œã«é…å»¶å®Ÿè¡Œ
  window.addEventListener("load", () => {
    // ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã‚’æ˜ç¤ºçš„ã«åˆæœŸåŒ–ï¼ˆå†åº¦å®Ÿè¡Œã—ã¦ç¢ºå®Ÿã«é–‰ã˜ã‚‹ï¼‰
    if (typeof initializeSubslots === 'function') {
      console.log("ğŸ”’ ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã‚’åˆæœŸåŒ–");
      initializeSubslots();
    }
    
    setTimeout(() => {
      console.log("ğŸš€ syncDynamicToStatic() é…å»¶å‘¼ã³å‡ºã—");
      if (typeof syncDynamicToStatic === "function") {
        syncDynamicToStatic();
      } else {
        console.warn("âš  syncDynamicToStatic é–¢æ•°ãŒæœªå®šç¾©ã§ã™");
      }
    }, 200);
  });
</script>

</body>
</html>

<script type="module">
import { randomizeAll } from './js/randomizer_all.js';
import { buildStructure } from './js/structure_builder.js';

let loadedJsonData = null;

document.getElementById("loadJsonButton").addEventListener("click", () => {
  const fileInput = document.getElementById("jsonFileInput");
  if (fileInput.files.length === 0) {
    alert("ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„");
    return;
  }
  const file = fileInput.files[0];
  const reader = new FileReader();
  reader.onload = (e) => {
    try {
      loadedJsonData = JSON.parse(e.target.result);
      window.loadedJsonData = loadedJsonData;  // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç¢ºèªç”¨
      console.log("ğŸŸ¢ window.loadedJsonData ã‚»ãƒƒãƒˆå®Œäº†:", window.loadedJsonData);
      const data = randomizeAll(loadedJsonData);
      console.log("ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºçµæœè©³ç´°:", JSON.stringify(data, null, 2));
      validateSlotsModified(data);
      window.loadedJsonData = data;
      buildStructure(data);
      syncDynamicToStatic();
      
      // ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã®åˆæœŸåŒ–ã‚‚å®Ÿè¡Œ
      if (typeof initializeSubslots === 'function') {
        console.log("ğŸ”’ JSONãƒ­ãƒ¼ãƒ‰å¾Œã«ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã‚’åˆæœŸåŒ–");
        initializeSubslots();
      }
      
      // æ˜ç¤ºçš„ã«ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆã¨ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã®åŒæœŸã‚’å‘¼ã³å‡ºã™
      if (typeof syncUpperSlotsFromJson === 'function') {
        console.log("ğŸ”„ JSONãƒ­ãƒ¼ãƒ‰å¾Œã®æ˜ç¤ºçš„åŒæœŸå‘¼ã³å‡ºã—");
        syncUpperSlotsFromJson(data);
        if (typeof syncSubslotsFromJson === 'function') {
          syncSubslotsFromJson(data);
        }
        
        // è¡¨ç¤ºé †åˆ¶å¾¡æ©Ÿèƒ½ã®å‘¼ã³å‡ºã—
        if (typeof applyOrderToAllSlots === 'function') {
          console.log("ğŸ”¢ JSONãƒ­ãƒ¼ãƒ‰å¾Œã«ã‚¹ãƒ­ãƒƒãƒˆè¡¨ç¤ºé †é©ç”¨");
          applyOrderToAllSlots(data);
        }
        
        if (typeof debugM1Slot === 'function') {
          console.log("ğŸ” M1ã‚¹ãƒ­ãƒƒãƒˆã®ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œ");
          debugM1Slot();
        }
      }
    } catch (err) {
      console.error("âŒ JSON ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã¾ãŸã¯å‡¦ç†ä¾‹å¤–", err);
      alert("ç„¡åŠ¹ãª JSON ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™");
    }
  };
  reader.readAsText(file);
});

document.getElementById("randomize-all").addEventListener("click", () => {
  if (!loadedJsonData || !Array.isArray(loadedJsonData)) {
    alert("å…ˆã«æ­£ã—ã„JSONãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„");
    console.error("âŒ å…¨ä½“ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºï¼šãƒ­ãƒ¼ãƒ‰æ¸ˆãƒ‡ãƒ¼ã‚¿ãŒä¸æ­£ã¾ãŸã¯æœªãƒ­ãƒ¼ãƒ‰");
    return;
  }
  const data = randomizeAll(loadedJsonData);
  console.log("ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºçµæœè©³ç´°ï¼ˆå…¨ä½“ãƒœã‚¿ãƒ³ï¼‰:", JSON.stringify(data, null, 2));
  validateSlotsModified(data);
  window.loadedJsonData = data;
  buildStructure(data);
  syncDynamicToStatic();
  
  // ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã®åˆæœŸåŒ–ã‚‚å®Ÿè¡Œ
  if (typeof initializeSubslots === 'function') {
    console.log("ğŸ”’ ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºå¾Œã«ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã‚’åˆæœŸåŒ–");
    initializeSubslots();
  }
  
  // ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºå¾Œã‚‚è¡¨ç¤ºé †åˆ¶å¾¡ã‚’é©ç”¨
  if (typeof applyOrderToAllSlots === 'function') {
    console.log("ğŸ”¢ ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºå¾Œã®ã‚¹ãƒ­ãƒƒãƒˆè¡¨ç¤ºé †é©ç”¨");
    applyOrderToAllSlots(data);
  }
});

// Sã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
document.addEventListener("DOMContentLoaded", () => {
  const sIndividualBtn = document.querySelector(".s-individual-randomize-btn");
  if (sIndividualBtn) {
    sIndividualBtn.addEventListener("click", () => {
      console.log("ğŸ² Sã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      if (typeof window.randomizeSlotSIndividual === "function") {
        window.randomizeSlotSIndividual();
      } else {
        console.error("âŒ randomizeSlotSIndividualé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        alert("ã‚¨ãƒ©ãƒ¼: Sã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
      }
    });
    console.log("âœ… Sã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ");
  } else {
    console.error("âŒ Sã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
});

// M1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
document.addEventListener("DOMContentLoaded", () => {
  const m1IndividualBtn = document.querySelector(".m1-individual-randomize-btn");
  if (m1IndividualBtn) {
    m1IndividualBtn.addEventListener("click", () => {
      console.log("ğŸ² M1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      if (typeof window.randomizeSlotM1Individual === "function") {
        window.randomizeSlotM1Individual();
      } else {
        console.error("âŒ randomizeSlotM1Individualé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        alert("ã‚¨ãƒ©ãƒ¼: M1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
      }
    });
    console.log("âœ… M1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ");
  } else {
    console.error("âŒ M1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
});

// M2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
document.addEventListener("DOMContentLoaded", () => {
  const m2IndividualBtn = document.querySelector(".m2-individual-randomize-btn");
  if (m2IndividualBtn) {
    m2IndividualBtn.addEventListener("click", () => {
      console.log("ğŸ² M2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      if (typeof window.randomizeSlotM2Individual === "function") {
        window.randomizeSlotM2Individual();
      } else {
        console.error("âŒ randomizeSlotM2Individualé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        alert("ã‚¨ãƒ©ãƒ¼: M2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
      }
    });
    console.log("âœ… M2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ");
  } else {
    console.error("âŒ M2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
});

// C1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
document.addEventListener("DOMContentLoaded", () => {
  const c1IndividualBtn = document.querySelector(".c1-individual-randomize-btn");
  if (c1IndividualBtn) {
    c1IndividualBtn.addEventListener("click", () => {
      console.log("ğŸ² C1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      if (typeof window.randomizeSlotC1Individual === "function") {
        window.randomizeSlotC1Individual();
      } else {
        console.error("âŒ randomizeSlotC1Individualé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        alert("ã‚¨ãƒ©ãƒ¼: C1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
      }
    });
    console.log("âœ… C1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ");
  } else {
    console.error("âŒ C1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
});

// O1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
document.addEventListener("DOMContentLoaded", () => {
  const o1IndividualBtn = document.querySelector(".o1-individual-randomize-btn");
  if (o1IndividualBtn) {
    o1IndividualBtn.addEventListener("click", () => {
      console.log("ğŸ² O1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      if (typeof window.randomizeSlotO1Individual === "function") {
        window.randomizeSlotO1Individual();
      } else {
        console.error("âŒ randomizeSlotO1Individualé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        alert("ã‚¨ãƒ©ãƒ¼: O1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
      }
    });
    console.log("âœ… O1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ");
  } else {
    console.error("âŒ O1ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
});

// O2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
document.addEventListener("DOMContentLoaded", () => {
  const o2IndividualBtn = document.querySelector(".o2-individual-randomize-btn");
  if (o2IndividualBtn) {
    o2IndividualBtn.addEventListener("click", () => {
      console.log("ğŸ² O2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      if (typeof window.randomizeSlotO2Individual === "function") {
        window.randomizeSlotO2Individual();
      } else {
        console.error("âŒ randomizeSlotO2Individualé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        alert("ã‚¨ãƒ©ãƒ¼: O2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
      }
    });
    console.log("âœ… O2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ");
  } else {
    console.error("âŒ O2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
});

// C2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
document.addEventListener("DOMContentLoaded", () => {
  const c2IndividualBtn = document.querySelector(".c2-individual-randomize-btn");
  if (c2IndividualBtn) {
    c2IndividualBtn.addEventListener("click", () => {
      console.log("ğŸ² C2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      if (typeof window.randomizeSlotC2Individual === "function") {
        window.randomizeSlotC2Individual();
      } else {
        console.error("âŒ randomizeSlotC2Individualé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        alert("ã‚¨ãƒ©ãƒ¼: C2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
      }
    });
    console.log("âœ… C2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ");
  } else {
    console.error("âŒ C2ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
});

// M3ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
document.addEventListener("DOMContentLoaded", () => {
  const m3IndividualBtn = document.querySelector(".m3-individual-randomize-btn");
  if (m3IndividualBtn) {
    m3IndividualBtn.addEventListener("click", () => {
      console.log("ğŸ² M3ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      if (typeof window.randomizeSlotM3Individual === "function") {
        window.randomizeSlotM3Individual();
      } else {
        console.error("âŒ randomizeSlotM3Individualé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        alert("ã‚¨ãƒ©ãƒ¼: M3ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
      }
    });
    console.log("âœ… M3ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ");
  } else {
    console.error("âŒ M3ã‚¹ãƒ­ãƒƒãƒˆå€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
});

function validateSlotsModified(data) {
  const requiredSlots = ["M1", "S", "V"];
  const presentSlots = data.map(d => d.Slot);
  requiredSlots.forEach(slot => {
    if (!presentSlots.includes(slot)) {
      console.warn(`âš  å¿…é ˆã‚¹ãƒ­ãƒƒãƒˆ ${slot} ãŒãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºçµæœã«å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“`);
    }
  });
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ç–‘å•è©ã‚¨ãƒªã‚¢ã‚’åˆæœŸåŒ–
document.addEventListener('DOMContentLoaded', function() {
  console.log("ğŸ”„ ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ç–‘å•è©ã‚¨ãƒªã‚¢åˆæœŸåŒ–");
  if (window.initializeQuestionWordArea) {
    window.initializeQuestionWordArea();
  }
  
  // åˆ¶å¾¡ãƒ‘ãƒãƒ«è¡¨ç¤º/éè¡¨ç¤ºãƒœã‚¿ãƒ³ã®æ©Ÿèƒ½ã‚’è¿½åŠ 
  const toggleControlPanelsBtn = document.getElementById('toggle-control-panels');
  
  if (toggleControlPanelsBtn) {
    toggleControlPanelsBtn.addEventListener('click', function() {
      if (window.toggleAllControlPanels) {
        window.toggleAllControlPanels();
      } else {
        console.error("âŒ toggleAllControlPanelsé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
      }
    });
    
    console.log("âœ… åˆ¶å¾¡ãƒ‘ãƒãƒ«è¡¨ç¤º/éè¡¨ç¤ºæ©Ÿèƒ½ã‚’åˆæœŸåŒ–ã—ã¾ã—ãŸ");
  } else {
    console.warn("âš  åˆ¶å¾¡ãƒ‘ãƒãƒ«ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
  
  // ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã‚‚ç–‘å•è©ã‚¨ãƒªã‚¢ã‚’åˆæœŸåŒ–
  const randomizeAllButton = document.getElementById('randomize-all');
  if (randomizeAllButton) {
    randomizeAllButton.addEventListener('click', function() {
      // ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºå‡¦ç†ã®å‰ã«ç–‘å•è©ã‚¨ãƒªã‚¢ã‚’åˆæœŸåŒ–
      setTimeout(() => {
        if (window.initializeQuestionWordArea) {
          window.initializeQuestionWordArea();
          console.log("ğŸ”„ ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºå¾Œã®ç–‘å•è©ã‚¨ãƒªã‚¢åˆæœŸåŒ–");
        }
      }, 100); // ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºå‡¦ç†å®Œäº†å¾Œã«å®Ÿè¡Œ
    });
  }
});
</script>
