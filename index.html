<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>randomizer_all.js テスト（ランダム表示）</title>
  <script type="module">
    import { randomizeAll } from './randomizer_all.js';
    import { updateSlotDisplay, safe } from './common.js';
    import { applyImages } from './image_handler.js';
    import { applySlotText, applySubSlotText } from './structure_analyzer.js';

    document.addEventListener("DOMContentLoaded", () => {
      const variants = [
        {
          image_v: "test_image.png",
          chunk_s: "He", chunk_aux: "can", chunk_v: "run", chunk_o1: "fast", chunk_m1: "every day",
          chunk_sub_v: "run", chunk_sub_o1: "fast", chunk_sub_m3: "every day"
        },
        {
          image_v: "test_image.png",
          chunk_s: "She", chunk_aux: "will", chunk_v: "sing", chunk_o1: "a song", chunk_m1: "tonight",
          chunk_sub_v: "sing", chunk_sub_o1: "a song", chunk_sub_m3: "softly"
        },
        {
          image_v: "test_image.png",
          chunk_s: "They", chunk_aux: "must", chunk_v: "study", chunk_o1: "math", chunk_m1: "this weekend",
          chunk_sub_v: "study", chunk_sub_o1: "math", chunk_sub_m3: "diligently"
        }
      ];

      function doRandomize() {
        const data = variants[Math.floor(Math.random() * variants.length)];
        randomizeAll(data);
      }

      document.getElementById("randomize-all").addEventListener("click", doRandomize);
      doRandomize(); // 初期表示
    });
  </script>
  <style>
    .slot-box {
      border: 1px solid #aaa;
      padding: 10px;
      margin: 5px;
      min-height: 30px;
    }
  </style>
</head>
<body>
  <h1>randomizer_all.js テストページ（ランダム表示）</h1>
  <button id="randomize-all">🔁 ランダマイズ</button>

  <h2>主スロット</h2>
  <div id="slot-s" class="slot-box">slot-s</div>
  <div id="slot-aux" class="slot-box">slot-aux</div>
  <div id="slot-v" class="slot-box">slot-v</div>
  <div id="slot-o1" class="slot-box">slot-o1</div>
  <div id="slot-m1" class="slot-box">slot-m1</div>

  <h2>subスロット</h2>
  <div id="slot-o1-v" class="slot-box">slot-o1-v</div>
  <div id="slot-o1-o1" class="slot-box">slot-o1-o1</div>
  <div id="slot-o1-m3" class="slot-box">slot-o1-m3</div>
</body>
</html>