<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>randomizer_all.js テスト</title>
  <script type="module">
    import { randomizeAll } from './randomizer_all.js';
    import { updateSlotDisplay, safe } from './common.js';
    import { applyImages } from './image_handler.js';
    import { applySlotText, applySubSlotText } from './structure_analyzer.js';

    document.addEventListener("DOMContentLoaded", () => {
      const dummyData = {
        image_v: "test_image.png",
        image_sub_o1: "test_image.png",

        chunk_s: "He",
        chunk_aux: "can",
        chunk_v: "run",
        chunk_o1: "fast",
        chunk_m1: "every day",

        chunk_sub_v: "run",
        chunk_sub_o1: "fast",
        chunk_sub_m3: "every day"
      };

      const button = document.getElementById("randomize-all");
      button.addEventListener("click", () => {
        randomizeAll(dummyData);
      });

      // 初期表示として1回実行
      randomizeAll(dummyData);
    });
  </script>
  <style>
    .slot-box {
      border: 1px solid #aaa;
      padding: 10px;
      margin: 5px;
      min-height: 30px;
    }
  </style>
</head>
<body>
  <h1>randomizer_all.js テストページ</h1>
  <button id="randomize-all">🔁 ランダマイズ（初期化）</button>

  <h2>主スロット</h2>
  <div id="slot-s" class="slot-box">slot-s</div>
  <div id="slot-aux" class="slot-box">slot-aux</div>
  <div id="slot-v" class="slot-box">slot-v</div>
  <div id="slot-o1" class="slot-box">slot-o1</div>
  <div id="slot-m1" class="slot-box">slot-m1</div>

  <h2>subスロット</h2>
  <div id="slot-o1-v" class="slot-box">slot-o1-v</div>
  <div id="slot-o1-o1" class="slot-box">slot-o1-o1</div>
  <div id="slot-o1-m3" class="slot-box">slot-o1-m3</div>
</body>
</html>