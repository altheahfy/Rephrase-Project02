<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>Rephrase Structured UI</title>
  <link href="style.css" rel="stylesheet"/>
  <script src="js/subslot_toggle.js"></script>
  <script type="module">
   document.addEventListener("DOMContentLoaded", () => {
    const loadButton = document.getElementById("loadButton");
    if (loadButton) {
      loadButton.addEventListener("click", () => {
        const fileInput = document.getElementById("fileInput");
        if (!fileInput.files[0]) {
          alert("先に data.json を選んでください。");
          return;
        }
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
          const jsonData = JSON.parse(e.target.result);
          window.lastSlotData = jsonData;
          import("./js/structure_builder.js").then(builderModule => {
            if (window.lastSlotData) {
              builderModule.buildStructureFromJson(window.lastSlotData);
            } else {
              console.warn("lastSlotData がセットされていません");
            }
          });
        };
        reader.readAsText(file);
      });
    }
   });
  </script>
 </head>
 <body>
  <section>
   <label for="fileInput">data.json を選択：</label>
   <input accept=".json" id="fileInput" type="file"/>
   <button id="loadButton">📘 JSONから構造構築</button>
  </section>
  <h1>🧪 Subslot Structured Test with Upper Slots</h1>
  <section>
   <h2>Full Structure</h2>
   <div class="slot-wrapper">
    <!-- スロット構造は元のを流用・復元してください -->
   </div>
  </section>
  <script src="js/renderer_core.js" type="module"></script>
  <script src="./js/test_controller.js" type="module"></script>
 </body>
</html>
