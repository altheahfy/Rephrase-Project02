# ç·åˆå®Ÿè£…è¨ˆç”»æ›¸

## â‘¢ å…¨ä½“è¨ˆç”»ã®è©³ç´°æ–‡æ›¸åŒ–

### ç·åˆæˆ¦ç•¥: æ®µéšçš„å¾©æ—§â†’çµ±åˆâ†’æœ€é©åŒ–

---

## Phase 1: ç·Šæ€¥å¾©æ—§ãƒ•ã‚§ãƒ¼ã‚º ğŸš‘ (1-2æ—¥)

### 1.1 å³åº§å®Ÿè¡Œé …ç›® (Priority: CRITICAL)
```bash
# Step 1: å‹•ä½œã—ã¦ã„ãŸçŠ¶æ…‹ã¸ã®å¾©å¸°
git reset --hard 1bac1ffa

# Step 2: ç¾çŠ¶ç¢ºèª
git status
git log --oneline -5
```

### 1.2 å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ
```javascript
// ãƒ†ã‚¹ãƒˆé …ç›®
1. åˆ¶å¾¡ãƒ‘ãƒãƒ«è¡¨ç¤º/éè¡¨ç¤ºãƒœã‚¿ãƒ³
2. å€‹åˆ¥ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹åˆ¶å¾¡  
3. ã€Œå…¨è¡¨ç¤ºã€ã€Œå…¨è‹±æ–‡éè¡¨ç¤ºã€ãƒœã‚¿ãƒ³
4. ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆå‹•çš„ç”Ÿæˆ
5. ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆåˆ¶å¾¡ãƒ‘ãƒãƒ«ç”Ÿæˆ
6. å€‹åˆ¥ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºå¾Œã®çŠ¶æ…‹ç¶™æ‰¿
```

### 1.3 å‰Šé™¤ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½åˆ†æ
```javascript
// åˆ†æå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
1. visibility_control.js (549è¡Œ)
   - ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
   - localStorage: rephrase_visibility_state
   
2. subslot_visibility_control.js (625è¡Œ)  
   - ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
   - localStorage: rephrase_subslot_visibility_state
   
3. ä¸¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ç›¸äº’ä¾å­˜é–¢ä¿‚
4. å‹•çš„ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºæ–¹æ³•
```

---

## Phase 2: ã‚·ã‚¹ãƒ†ãƒ ç†è§£ãƒ»è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚º ğŸ” (2-3æ—¥)

### 2.1 æ—¢å­˜ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å®Œå…¨ãƒãƒƒãƒ”ãƒ³ã‚°
```javascript
// ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ä½œæˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åˆ¶å¾¡ãƒ‘ãƒãƒ«     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆåˆ¶å¾¡  â”‚ â† visibility_control.js
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆåˆ¶å¾¡   â”‚ â† subslot_visibility_control.js  
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‹•çš„ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ  â”‚ â† structure_builder.js
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 localStorage ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€è¨­è¨ˆ
```javascript
// ç¾çŠ¶ã‚·ã‚¹ãƒ†ãƒ åˆ†æ
rephrase_visibility_state: {
  // ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆçŠ¶æ…‹ (11ã‚¹ãƒ­ãƒƒãƒˆ Ã— 2è¦ç´ )
  "question-word": { "auxtext": true, "text": true },
  "s": { "auxtext": true, "text": false },
  // ...
}

rephrase_subslot_visibility_state: {
  // å‹•çš„ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆçŠ¶æ…‹
  "slot-v-sub-go": { "text": false, "auxtext": true },
  "slot-m1-sub-quickly": { "text": false, "auxtext": true },
  "global_control_panels_visible": true
}

// çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ¡ˆ
unified_visibility_state: {
  "upper_slots": { /* ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ */ },
  "subslots": { /* ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆ */ },
  "global_settings": { /* ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š */ },
  "metadata": { "version": "2.0", "last_updated": timestamp }
}
```

### 2.3 çŠ¶æ…‹ç¶™æ‰¿ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ
```javascript
// ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆç”Ÿæˆæ™‚ã®çŠ¶æ…‹ç¶™æ‰¿ãƒ•ãƒ­ãƒ¼
function generateSubslot(slotKey, subslotData) {
  // 1. ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆçŠ¶æ…‹ã‚’å–å¾—
  const upperState = getUpperSlotState(slotKey);
  
  // 2. ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆè¦ç´ ç”Ÿæˆ
  const subslotElement = createSubslotDOM(subslotData);
  
  // 3. ä¸Šä½çŠ¶æ…‹ã‚’ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã«é©ç”¨
  applyInheritedState(subslotElement, upperState);
  
  // 4. ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆå›ºæœ‰çŠ¶æ…‹ã‚’è¨­å®š
  setSubslotSpecificState(subslotElement, subslotData.id);
}
```

---

## Phase 3: æ®µéšçš„çµ±åˆãƒ•ã‚§ãƒ¼ã‚º ğŸ”§ (3-5æ—¥)

### 3.1 ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çµ±åˆæˆ¦ç•¥
```javascript
// æˆåŠŸã—ãŸmanager modulesã‚’æ´»ç”¨
const IntegratedControlPanel = {
  stateManager: new RephraseStateManager(),
  visibilityManager: new VisibilityManager(),
  subslotManager: new SubslotVisibilityManager(),
  
  // æ®µéšçš„çµ±åˆ
  phase1: "å€‹åˆ¥åˆ¶å¾¡æ©Ÿèƒ½",
  phase2: "ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆ¶å¾¡æ©Ÿèƒ½", 
  phase3: "çŠ¶æ…‹ç¶™æ‰¿æ©Ÿèƒ½",
  phase4: "å‹•çš„ç”Ÿæˆé€£æº"
};
```

### 3.2 å®Ÿè£…é †åº (Critical Path)
```javascript
// å„ªå…ˆé †ä½ä»˜ãå®Ÿè£…ãƒªã‚¹ãƒˆ
1. localStorageçµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£… (Priority: HIGH)
   - æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ©Ÿèƒ½
   - å¾Œæ–¹äº’æ›æ€§ç¶­æŒ
   
2. çŠ¶æ…‹ç¶™æ‰¿ã‚·ã‚¹ãƒ†ãƒ å¾©æ—§ (Priority: CRITICAL)
   - structure_builder.js ã¨ã®é€£æº
   - å‹•çš„ç”Ÿæˆæ™‚ã®çŠ¶æ…‹é©ç”¨
   
3. åˆ¶å¾¡ãƒ‘ãƒãƒ«çµ±åˆå®Ÿè£… (Priority: MEDIUM)
   - control_panel_manager.js æ‹¡å¼µ
   - æ—¢å­˜æ©Ÿèƒ½ã®æ®µéšçš„ç§»æ¤
   
4. ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆæ§‹ç¯‰ (Priority: HIGH)
   - E2Eãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–
   - å›å¸°ãƒ†ã‚¹ãƒˆé˜²æ­¢
```

### 3.3 å¾Œæ–¹äº’æ›æ€§æˆ¦ç•¥
```javascript
// æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ä¿è­·
const BackwardCompatibility = {
  // å¤ã„localStorageã‚­ãƒ¼ã®ã‚µãƒãƒ¼ãƒˆç¶™ç¶š
  legacySupport: {
    'rephrase_visibility_state': 'supported',
    'rephrase_subslot_visibility_state': 'supported'
  },
  
  // æ®µéšçš„ç§»è¡Œ
  migrationStrategy: {
    phase1: "æ–°æ—§ã‚·ã‚¹ãƒ†ãƒ ä¸¦è¡Œå‹•ä½œ",
    phase2: "ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã¨validation", 
    phase3: "æ–°ã‚·ã‚¹ãƒ†ãƒ ã¸ã®å®Œå…¨ç§»è¡Œ"
  }
};
```

---

## Phase 4: æ©Ÿèƒ½æ‹¡å¼µãƒ•ã‚§ãƒ¼ã‚º âš¡ (3-4æ—¥)

### 4.1 é«˜åº¦ãªçµ±åˆæ©Ÿèƒ½
```javascript
// æˆåŠŸäº‹ä¾‹ã‚’æ´»ç”¨ã—ãŸæ‹¡å¼µ
const AdvancedFeatures = {
  imageAutoHide: new ImageAutoHideManager(),
  zoomController: new ZoomControllerManager(),
  explanationSystem: new ExplanationManager(),
  subslotToggle: new SubslotToggleManager()
};
```

### 4.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
```javascript
// æœ€é©åŒ–æˆ¦ç•¥
const OptimizationStrategy = {
  // DOMæ“ä½œã®æœ€é©åŒ–
  domOptimization: "batch updates, virtual DOM concepts",
  
  // localStorage ã®æœ€é©åŒ–  
  storageOptimization: "compression, lazy loading",
  
  // ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®æœ€é©åŒ–
  eventOptimization: "debouncing, throttling"
};
```

---

## Phase 5: å“è³ªä¿è¨¼ãƒ•ã‚§ãƒ¼ã‚º âœ… (2-3æ—¥)

### 5.1 åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
```javascript
// ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
const TestStrategy = {
  unit: "å€‹åˆ¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ",
  integration: "ã‚·ã‚¹ãƒ†ãƒ é–“é€£æºãƒ†ã‚¹ãƒˆ", 
  e2e: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ",
  performance: "è² è·ãƒ»é€Ÿåº¦ãƒ†ã‚¹ãƒˆ",
  compatibility: "ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆ"
};
```

### 5.2 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
```markdown
## å¿…è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
2. API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹  
3. å®Ÿè£…ã‚¬ã‚¤ãƒ‰
4. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
5. é–‹ç™ºè€…å‘ã‘FAQ
```

---

## Phase 6: é‹ç”¨ãƒ»ç›£è¦–ãƒ•ã‚§ãƒ¼ã‚º ğŸ“Š (ç¶™ç¶š)

### 6.1 ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
```javascript
// é‹ç”¨ç›£è¦–
const MonitoringSystem = {
  errorTracking: "ã‚¨ãƒ©ãƒ¼è¿½è·¡ãƒ»ãƒ¬ãƒãƒ¼ãƒˆ",
  performanceMonitoring: "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–",
  userBehaviorAnalytics: "ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æ",
  systemHealthCheck: "ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ç¢ºèª"
};
```

### 6.2 ç¶™ç¶šçš„æ”¹å–„
```javascript
// æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«
const ContinuousImprovement = {
  feedback: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†",
  analysis: "ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»èª²é¡Œç‰¹å®š", 
  planning: "æ”¹å–„è¨ˆç”»ç­–å®š",
  implementation: "æ®µéšçš„å®Ÿè£…",
  validation: "åŠ¹æœæ¤œè¨¼"
};
```

---

## æˆåŠŸæŒ‡æ¨™ (KPI)

### æŠ€è¡“æŒ‡æ¨™
- **æ©Ÿèƒ½å®Œå…¨æ€§**: 100% (å‰Šé™¤å‰ã¨åŒç­‰æ©Ÿèƒ½)
- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: 95%ä»¥ä¸Š
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰3ç§’ä»¥å†…
- **ã‚¨ãƒ©ãƒ¼ç‡**: 0.1%ä»¥ä¸‹

### å“è³ªæŒ‡æ¨™  
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: SonarQube ã‚¹ã‚³ã‚¢ A
- **å¯èª­æ€§**: æ–°è¦é–‹ç™ºè€…ãŒ1æ—¥ã§ç†è§£å¯èƒ½
- **ä¿å®ˆæ€§**: æ©Ÿèƒ½è¿½åŠ æ™‚ã®å½±éŸ¿ç¯„å›²æ˜ç¢º
- **æ‹¡å¼µæ€§**: æ–°æ©Ÿèƒ½è¿½åŠ ãŒå®¹æ˜“

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæŒ‡æ¨™
- **é€²æ—éµå®ˆ**: å„ãƒ•ã‚§ãƒ¼ã‚ºäºˆå®šé€šã‚Šå®Œäº†
- **å“è³ªåŸºæº–**: å…¨ãƒ†ã‚¹ãƒˆ pass, ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: 100%æ•´å‚™å®Œäº†
- **çŸ¥è­˜å…±æœ‰**: ãƒãƒ¼ãƒ å…¨å“¡ãŒå…¨ä½“ç†è§£

---

## ãƒªã‚¹ã‚¯ç®¡ç†

### é«˜ãƒªã‚¹ã‚¯é …ç›®
1. **ãƒ‡ãƒ¼ã‚¿æå¤±**: localStorage ãƒ‡ãƒ¼ã‚¿ã®ç ´æãƒ»æ¶ˆå¤±
2. **æ©Ÿèƒ½é€€è¡Œ**: æ—¢å­˜æ©Ÿèƒ½ã®æ„å›³ã—ãªã„ç ´å£Š
3. **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é…å»¶**: è¤‡é›‘ãªç›¸äº’ä¾å­˜ã«ã‚ˆã‚‹å®Ÿè£…å›°é›£

### å¯¾ç­–
```javascript
const RiskMitigation = {
  backup: "å„ãƒ•ã‚§ãƒ¼ã‚ºå‰ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆ",
  testing: "æ®µéšçš„ãƒ†ã‚¹ãƒˆã€æ—©æœŸå•é¡Œç™ºè¦‹",
  rollback: "å³åº§ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯èƒ½ãªè¨­è¨ˆ",
  monitoring: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ"
};
```

---

## æˆåŠŸè¦å› 

### æŠ€è¡“çš„è¦å› 
1. **æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: å°ã•ãªå¤‰æ›´ã®ç©ã¿é‡ã­
2. **ãƒ†ã‚¹ãƒˆé§†å‹•**: å„å¤‰æ›´å¾Œã®ç¢ºå®Ÿãªå‹•ä½œç¢ºèª
3. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ**: ç‹¬ç«‹æ€§ã®é«˜ã„è¨­è¨ˆ
4. **å¾Œæ–¹äº’æ›æ€§**: æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å…±å­˜

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è¦å› 
1. **æ˜ç¢ºãªè¨ˆç”»**: è©³ç´°ãªãƒ•ã‚§ãƒ¼ã‚ºåˆ†ã‘ã¨æˆæœç‰©å®šç¾©
2. **ãƒªã‚¹ã‚¯ç®¡ç†**: äº‹å‰ã®å•é¡Œäºˆæ¸¬ã¨å¯¾ç­–æº–å‚™  
3. **å“è³ªç®¡ç†**: å³æ ¼ãªå“è³ªåŸºæº–ã¨æ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹
4. **çŸ¥è­˜å…±æœ‰**: åŒ…æ‹¬çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
