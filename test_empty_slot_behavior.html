<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç©ºã‚¹ãƒ­ãƒƒãƒˆãƒ»ã‚¤ãƒ©ã‚¹ãƒˆåŒ–ä¸å¯ãƒ†ã‚¹ãƒˆ</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        .test-controls button {
            padding: 8px 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-controls button:hover {
            background: #0056b3;
        }
        .slot-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        .slot {
            width: 180px;
            height: 180px;
            border: 2px solid #ddd;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            background: #f9f9f9;
        }
        .slot-text {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            text-align: center;
            min-height: 20px;
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            width: calc(100% - 20px);
        }
        .slot-image {
            max-width: 160px;
            max-height: 140px;
            object-fit: contain;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .status-info {
            margin-top: 10px;
            padding: 10px;
            background: #e9ecef;
            border-radius: 4px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª ç©ºã‚¹ãƒ­ãƒƒãƒˆãƒ»ã‚¤ãƒ©ã‚¹ãƒˆåŒ–ä¸å¯ãƒ†ã‚¹ãƒˆ</h1>
    <p>Type wordã‚„ç©ºãƒ†ã‚­ã‚¹ãƒˆã®å ´åˆã«ã€ç”»åƒã‚¹ãƒ­ãƒƒãƒˆãŒç©ºã«ãªã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§ã™ã€‚</p>

    <div class="test-section">
        <h2>ğŸ“ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: ç©ºãƒ†ã‚­ã‚¹ãƒˆ</h2>
        <div class="test-controls">
            <button onclick="testEmptyText()">ç©ºãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚»ãƒƒãƒˆ</button>
            <button onclick="clearTestSlots()">å…¨ã‚¯ãƒªã‚¢</button>
        </div>
        <div class="slot-container">
            <div class="slot" id="slot-m1">
                <div class="slot-text" id="slot-m1-text">ï¼ˆç©ºï¼‰</div>
                <img class="slot-image" id="slot-m1-img" src="" alt="">
            </div>
            <div class="slot" id="slot-v">
                <div class="slot-text" id="slot-v-text">ï¼ˆç©ºï¼‰</div>
                <img class="slot-image" id="slot-v-img" src="" alt="">
            </div>
            <div class="slot" id="slot-o1">
                <div class="slot-text" id="slot-o1-text">ï¼ˆç©ºï¼‰</div>
                <img class="slot-image" id="slot-o1-img" src="" alt="">
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”¤ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: Type wordï¼ˆã‚¤ãƒ©ã‚¹ãƒˆåŒ–ä¸å¯ï¼‰</h2>
        <div class="test-controls">
            <button onclick="testTypeWords()">Type wordã‚’ã‚»ãƒƒãƒˆ</button>
            <button onclick="clearTestSlots()">å…¨ã‚¯ãƒªã‚¢</button>
        </div>
        <div class="slot-container">
            <div class="slot" id="slot-s">
                <div class="slot-text" id="slot-s-text">the</div>
                <img class="slot-image" id="slot-s-img" src="" alt="">
            </div>
            <div class="slot" id="slot-aux">
                <div class="slot-text" id="slot-aux-text">is</div>
                <img class="slot-image" id="slot-aux-img" src="" alt="">
            </div>
            <div class="slot" id="slot-c1">
                <div class="slot-text" id="slot-c1-text">and</div>
                <img class="slot-image" id="slot-c1-img" src="" alt="">
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ–¼ï¸ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: ã‚¤ãƒ©ã‚¹ãƒˆåŒ–å¯èƒ½å˜èª</h2>
        <div class="test-controls">
            <button onclick="testValidWords()">ã‚¤ãƒ©ã‚¹ãƒˆåŒ–å¯èƒ½å˜èªã‚’ã‚»ãƒƒãƒˆ</button>
            <button onclick="clearTestSlots()">å…¨ã‚¯ãƒªã‚¢</button>
        </div>
        <div class="slot-container">
            <div class="slot" id="slot-m2">
                <div class="slot-text" id="slot-m2-text">cat</div>
                <img class="slot-image" id="slot-m2-img" src="" alt="">
            </div>
            <div class="slot" id="slot-o2">
                <div class="slot-text" id="slot-o2-text">dog</div>
                <img class="slot-image" id="slot-o2-img" src="" alt="">
            </div>
            <div class="slot" id="slot-c2">
                <div class="slot-text" id="slot-c2-text">book</div>
                <img class="slot-image" id="slot-c2-img" src="" alt="">
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š çŠ¶æ…‹ç¢ºèª</h2>
        <div class="status-info" id="status-info">
            ã“ã“ã«ç”»åƒã®çŠ¶æ…‹æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
        </div>
    </div>

    <script src="js/universal_image_system.js"></script>
    <script>
        // ğŸ¯ ãƒ¡ã‚¿ã‚¿ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
        loadImageMetaTags().then(() => {
            console.log('âœ… ãƒ¡ã‚¿ã‚¿ã‚°ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†');
            updateStatusInfo();
        });

        // ç©ºãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ
        function testEmptyText() {
            console.log('ğŸ§ª ç©ºãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            // ãƒ†ã‚­ã‚¹ãƒˆã‚’ç©ºã«ã‚»ãƒƒãƒˆ
            document.getElementById('slot-m1-text').textContent = '';
            document.getElementById('slot-v-text').textContent = '';
            document.getElementById('slot-o1-text').textContent = '';
            
            // ç”»åƒé©ç”¨
            applyImageToSlot('slot-m1', '', true);
            applyImageToSlot('slot-v', '', true);
            applyImageToSlot('slot-o1', '', true);
            
            setTimeout(updateStatusInfo, 500);
        }

        // Type wordãƒ†ã‚¹ãƒˆ
        function testTypeWords() {
            console.log('ğŸ§ª Type wordãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            // Type wordã‚’ã‚»ãƒƒãƒˆ
            document.getElementById('slot-s-text').textContent = 'the';
            document.getElementById('slot-aux-text').textContent = 'is';
            document.getElementById('slot-c1-text').textContent = 'and';
            
            // ç”»åƒé©ç”¨
            applyImageToSlot('slot-s', 'the', true);
            applyImageToSlot('slot-aux', 'is', true);
            applyImageToSlot('slot-c1', 'and', true);
            
            setTimeout(updateStatusInfo, 500);
        }

        // ã‚¤ãƒ©ã‚¹ãƒˆåŒ–å¯èƒ½å˜èªãƒ†ã‚¹ãƒˆ
        function testValidWords() {
            console.log('ğŸ§ª ã‚¤ãƒ©ã‚¹ãƒˆåŒ–å¯èƒ½å˜èªãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            // ã‚¤ãƒ©ã‚¹ãƒˆåŒ–å¯èƒ½å˜èªã‚’ã‚»ãƒƒãƒˆ
            document.getElementById('slot-m2-text').textContent = 'cat';
            document.getElementById('slot-o2-text').textContent = 'dog';
            document.getElementById('slot-c2-text').textContent = 'book';
            
            // ç”»åƒé©ç”¨
            applyImageToSlot('slot-m2', 'cat', true);
            applyImageToSlot('slot-o2', 'dog', true);
            applyImageToSlot('slot-c2', 'book', true);
            
            setTimeout(updateStatusInfo, 500);
        }

        // å…¨ã‚¯ãƒªã‚¢
        function clearTestSlots() {
            console.log('ğŸ§¹ å…¨ã‚¹ãƒ­ãƒƒãƒˆã‚¯ãƒªã‚¢');
            
            const slotIds = ['slot-m1', 'slot-v', 'slot-o1', 'slot-s', 'slot-aux', 'slot-c1', 'slot-m2', 'slot-o2', 'slot-c2'];
            
            slotIds.forEach(slotId => {
                const textEl = document.getElementById(slotId + '-text');
                const imgEl = document.getElementById(slotId + '-img');
                
                if (textEl) textEl.textContent = 'ï¼ˆç©ºï¼‰';
                if (imgEl) {
                    // ğŸ¯ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ç”»åƒã‚’ã‚¯ãƒªã‚¢
                    imgEl.onload = null;
                    imgEl.onerror = null;
                    imgEl.src = '';
                    imgEl.alt = '';
                    imgEl.style.display = 'none';
                }
            });
            
            setTimeout(updateStatusInfo, 500);
        }

        // çŠ¶æ…‹æƒ…å ±æ›´æ–°
        function updateStatusInfo() {
            const slotIds = ['slot-m1', 'slot-v', 'slot-o1', 'slot-s', 'slot-aux', 'slot-c1', 'slot-m2', 'slot-o2', 'slot-c2'];
            let statusHTML = '<h3>ğŸ“Š å„ã‚¹ãƒ­ãƒƒãƒˆã®ç”»åƒçŠ¶æ…‹:</h3>';
            
            slotIds.forEach(slotId => {
                const imgEl = document.getElementById(slotId + '-img');
                const textEl = document.getElementById(slotId + '-text');
                
                if (imgEl && textEl) {
                    const hasImage = imgEl.src && imgEl.src !== '' && !imgEl.src.includes('undefined');
                    const isVisible = imgEl.style.display !== 'none';
                    const text = textEl.textContent;
                    
                    statusHTML += `<div><strong>${slotId}:</strong> ãƒ†ã‚­ã‚¹ãƒˆ="${text}" | ç”»åƒ=${hasImage ? 'æœ‰' : 'ç„¡'} | è¡¨ç¤º=${isVisible ? 'æœ‰' : 'ç„¡'}</div>`;
                }
            });
            
            document.getElementById('status-info').innerHTML = statusHTML;
        }
    </script>
</body>
</html>
