# 🚀 Rephrase デプロイチェックリスト

## ✅ デプロイ前必須確認事項

### 1. 設定ファイル確認
- [ ] `.htaccess`ファイルがルートディレクトリにある
- [ ] `training/index.html`の`SKIP_AUTH_FOR_DEVELOPMENT = false`に設定済み
- [ ] セキュリティヘッダーが有効になっている

### 2. ファイル・フォルダ構造確認
```
Rephrase-Project/
├── .htaccess                     ✅ セキュリティ設定
├── index.html                    ✅ メインページ
├── README.md                     ✅ ドキュメント
├── assets/                       ✅ CSSリソース
│   └── styles/
├── training/                     ✅ メイン機能
│   ├── index.html               ✅ トレーニングUI
│   ├── js/                      ✅ JavaScript機能
│   ├── css/                     ✅ スタイル
│   ├── data/                    ✅ JSONデータ
│   └── slot_images/             ✅ 学習用画像
└── commercial/                   ✅ 商用機能
```

### 3. さくらインターネット デプロイ手順

#### Step 1: ファイルアップロード
1. FTPクライアント（FileZilla推奨）でサーバーに接続
2. `/home/[ユーザー名]/www/`ディレクトリに全ファイルをアップロード
3. ファイル権限を適切に設定

#### Step 2: 権限設定（重要）
```bash
# ディレクトリ権限（さくらレンタルサーバー）
chmod 755 training/
chmod 755 training/data/
chmod 755 training/slot_images/
chmod 755 assets/

# ファイル権限
chmod 644 *.html
chmod 644 training/data/*.json
chmod 644 .htaccess
```

#### Step 3: 動作確認
1. **メインページ**: `https://[ドメイン]/index.html`
2. **トレーニング**: `https://[ドメイン]/training/`
3. **音声機能**: HTTPS環境で音声認識テスト
4. **画像表示**: スロット画像の正常表示確認
5. **JSON読み込み**: データ選択機能の動作確認

### 4. 本番環境での必須テスト項目

#### 🔒 セキュリティ確認
- [ ] HTTPSアクセスが強制されている
- [ ] セキュリティヘッダーが有効
- [ ] 不要なファイルへのアクセスが制限されている

#### 🎤 音声機能確認（重要）
- [ ] PC Chromeで音声認識が動作
- [ ] Androidで音声認識が動作
- [ ] 録音・再生機能が正常
- [ ] 音声分析結果が表示される

#### 📱 モバイル対応確認
- [ ] スマートフォンで正常表示
- [ ] タッチ操作が適切に動作
- [ ] レスポンシブデザインが機能

#### 📊 データ機能確認
- [ ] プリセットJSONデータの読み込み
- [ ] ランダマイズ機能の動作
- [ ] スロット表示制御の動作
- [ ] 解説システムの動作

### 5. パフォーマンス最適化確認
- [ ] 画像が遅延読み込みされている
- [ ] JavaScriptの圧縮・最適化
- [ ] CSSの最適化
- [ ] Gzip圧縮が有効

### 6. 緊急時対応準備
- [ ] バックアップファイルの保存
- [ ] エラーログの確認方法
- [ ] 設定戻し手順の確認

## 🆘 よくある問題と解決法

### Q1: 音声認識が動作しない
**A**: HTTPSでアクセスし、ブラウザのマイク許可を確認

### Q2: 画像が表示されない  
**A**: `training/slot_images/`の権限を755に設定

### Q3: JSONデータが読み込めない
**A**: `training/data/`の権限を755に設定、CORSエラー確認

### Q4: .htaccessが効かない
**A**: さくらレンタルサーバーの設定でmod_rewriteが有効か確認

## 📞 技術サポート

### 自動エラー監視機能
- エラーハンドリング: 自動エラー記録
- レート制限監視: 過負荷検出
- セキュリティ監視: 不正アクセス検出

### デバッグ方法
1. ブラウザ開発者ツール（F12）でコンソール確認
2. ネットワークタブでリソース読み込み確認
3. `training/`ページで📱デバッグボタン利用

## ✅ 最終チェック

すべての項目をクリアしたら、デプロイ準備完了です！

- [ ] 全ファイルアップロード完了
- [ ] 権限設定完了  
- [ ] HTTPS動作確認完了
- [ ] 音声機能動作確認完了
- [ ] モバイル表示確認完了
- [ ] データ読み込み確認完了

---

**🎉 デプロイ成功後は、快適な英語学習環境をお楽しみください！**
