<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±ç”¨ç”»åƒã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .slot-test {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            background: #fafafa;
        }
        .slot-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .slot-image {
            width: 80px;
            height: 80px;
            border: 1px solid #ccc;
            border-radius: 4px;
            object-fit: cover;
        }
        .slot-text {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }
        .slot-phrase {
            font-size: 14px;
            color: #666;
        }
        .test-controls {
            margin: 20px 0;
            text-align: center;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            background: #007bff;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background: #0056b3;
        }
        .info-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
    </style>
</head>
<body>
    <h1>ğŸ¨ æ±ç”¨ç”»åƒã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-container">
        <h2>ğŸ“‹ ãƒ†ã‚¹ãƒˆæ¦‚è¦</h2>
        <div class="info-box">
            <p><strong>ç›®çš„:</strong> å…¨ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆã§ã®ã‚¤ãƒ©ã‚¹ãƒˆè‡ªå‹•è¡¨ç¤ºæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™</p>
            <p><strong>å¯¾è±¡ã‚¹ãƒ­ãƒƒãƒˆ:</strong> M1, S, Aux, M2, V, C1, O1, O2, C2, M3</p>
            <p><strong>æ©Ÿèƒ½:</strong> ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹ã«åŸºã¥ã„ã¦é©åˆ‡ãªã‚¤ãƒ©ã‚¹ãƒˆã‚’è‡ªå‹•è¡¨ç¤º</p>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ¯ ã‚¹ãƒ­ãƒƒãƒˆåˆ¥ãƒ†ã‚¹ãƒˆ</h2>
        
        <!-- M1ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>M1ã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-m1" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for M1" class="slot-image">
                <div>
                    <div class="slot-text">manager</div>
                    <div class="slot-phrase">ç®¡ç†è·</div>
                </div>
            </div>
        </div>

        <!-- Sã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>Sã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-s" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for S" class="slot-image">
                <div>
                    <div class="slot-text">engineer</div>
                    <div class="slot-phrase">ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</div>
                </div>
            </div>
        </div>

        <!-- Auxã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>Auxã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-aux" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for Aux" class="slot-image">
                <div>
                    <div class="slot-text">can</div>
                    <div class="slot-phrase">ã§ãã‚‹</div>
                </div>
            </div>
        </div>

        <!-- M2ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>M2ã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-m2" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for M2" class="slot-image">
                <div>
                    <div class="slot-text">carefully</div>
                    <div class="slot-phrase">æ³¨æ„æ·±ã</div>
                </div>
            </div>
        </div>

        <!-- Vã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>Vã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-v" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for V" class="slot-image">
                <div>
                    <div class="slot-text">analyze</div>
                    <div class="slot-phrase">åˆ†æã™ã‚‹</div>
                </div>
            </div>
        </div>

        <!-- C1ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>C1ã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-c1" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for C1" class="slot-image">
                <div>
                    <div class="slot-text">complex</div>
                    <div class="slot-phrase">è¤‡é›‘ãª</div>
                </div>
            </div>
        </div>

        <!-- O1ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>O1ã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-o1" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for O1" class="slot-image">
                <div>
                    <div class="slot-text">data</div>
                    <div class="slot-phrase">ãƒ‡ãƒ¼ã‚¿</div>
                </div>
            </div>
        </div>

        <!-- O2ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>O2ã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-o2" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for O2" class="slot-image">
                <div>
                    <div class="slot-text">laboratory</div>
                    <div class="slot-phrase">ç ”ç©¶å®¤</div>
                </div>
            </div>
        </div>

        <!-- C2ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>C2ã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-c2" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for C2" class="slot-image">
                <div>
                    <div class="slot-text">successful</div>
                    <div class="slot-phrase">æˆåŠŸã—ãŸ</div>
                </div>
            </div>
        </div>

        <!-- M3ã‚¹ãƒ­ãƒƒãƒˆ -->
        <div class="slot-test">
            <h3>M3ã‚¹ãƒ­ãƒƒãƒˆ</h3>
            <div id="slot-m3" class="slot-container">
                <img src="slot_images/common/placeholder.png" alt="image for M3" class="slot-image">
                <div>
                    <div class="slot-text">yesterday</div>
                    <div class="slot-phrase">æ˜¨æ—¥</div>
                </div>
            </div>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ”§ ãƒ†ã‚¹ãƒˆåˆ¶å¾¡</h2>
        <div class="test-controls">
            <button onclick="testAllSlots()">å…¨ã‚¹ãƒ­ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
            <button onclick="testSpecificSlot('slot-v')">Vã‚¹ãƒ­ãƒƒãƒˆã®ã¿ãƒ†ã‚¹ãƒˆ</button>
            <button onclick="testSpecificSlot('slot-m1')">M1ã‚¹ãƒ­ãƒƒãƒˆã®ã¿ãƒ†ã‚¹ãƒˆ</button>
            <button onclick="updateAllImages()">å…¨ç”»åƒå¼·åˆ¶æ›´æ–°</button>
            <button onclick="showSystemStatus()">ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèª</button>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœãƒ­ã‚°</h2>
        <div id="test-log" class="info-box" style="height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px; white-space: pre-wrap;"></div>
    </div>

    <script src="js/universal_image_system.js"></script>
    <script>
        // ãƒ­ã‚°å‡ºåŠ›æ©Ÿèƒ½
        function log(message, type = 'info') {
            const logElement = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = type === 'error' ? 'error' : type === 'success' ? 'success' : '';
            
            logElement.innerHTML += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
            
            // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚‚å‡ºåŠ›
            console.log(`[TEST] ${message}`);
        }

        // å…¨ã‚¹ãƒ­ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        function testAllSlots() {
            log('=== å…¨ã‚¹ãƒ­ãƒƒãƒˆãƒ†ã‚¹ãƒˆé–‹å§‹ ===');
            
            if (typeof window.testUniversalImageSystem === 'function') {
                window.testUniversalImageSystem();
                log('âœ… æ±ç”¨ç”»åƒã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå®Œäº†', 'success');
            } else {
                log('âŒ æ±ç”¨ç”»åƒã‚·ã‚¹ãƒ†ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'error');
            }
        }

        // ç‰¹å®šã‚¹ãƒ­ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
        function testSpecificSlot(slotId) {
            log(`=== ${slotId} å€‹åˆ¥ãƒ†ã‚¹ãƒˆé–‹å§‹ ===`);
            
            if (typeof window.updateSlotImage === 'function') {
                window.updateSlotImage(slotId, true);
                log(`âœ… ${slotId} ç”»åƒæ›´æ–°å®Œäº†`, 'success');
            } else {
                log(`âŒ updateSlotImageé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`, 'error');
            }
        }

        // å…¨ç”»åƒå¼·åˆ¶æ›´æ–°
        function updateAllImages() {
            log('=== å…¨ç”»åƒå¼·åˆ¶æ›´æ–°é–‹å§‹ ===');
            
            if (typeof window.updateAllSlotImages === 'function') {
                window.updateAllSlotImages(true);
                log('âœ… å…¨ç”»åƒå¼·åˆ¶æ›´æ–°å®Œäº†', 'success');
            } else {
                log('âŒ updateAllSlotImagesé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'error');
            }
        }

        // ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèª
        function showSystemStatus() {
            log('=== ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèª ===');
            
            // åˆ©ç”¨å¯èƒ½ãªé–¢æ•°ã®ç¢ºèª
            const functions = [
                'window.initializeUniversalImageSystem',
                'window.updateAllSlotImages',
                'window.updateSlotImage',
                'window.updateAllSlotImagesAfterDataChange',
                'window.testUniversalImageSystem'
            ];
            
            functions.forEach(func => {
                const exists = eval(`typeof ${func} === 'function'`);
                log(`${func}: ${exists ? 'âœ… åˆ©ç”¨å¯èƒ½' : 'âŒ æœªå®šç¾©'}`, exists ? 'success' : 'error');
            });
            
            // ãƒ¡ã‚¿ã‚¿ã‚°ãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
            if (typeof window.imageMetaTags !== 'undefined') {
                log(`ãƒ¡ã‚¿ã‚¿ã‚°ãƒ‡ãƒ¼ã‚¿: ${window.imageMetaTags ? window.imageMetaTags.length + 'ä»¶' : 'æœªèª­ã¿è¾¼ã¿'}`);
            } else {
                log('ãƒ¡ã‚¿ã‚¿ã‚°ãƒ‡ãƒ¼ã‚¿: æœªå®šç¾©', 'error');
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            log('ğŸš€ ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸åˆæœŸåŒ–å®Œäº†');
            
            // 3ç§’å¾Œã«è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
            setTimeout(() => {
                log('ğŸ”„ è‡ªå‹•ãƒ†ã‚¹ãƒˆé–‹å§‹...');
                testAllSlots();
            }, 3000);
        });
    </script>
</body>
</html>
