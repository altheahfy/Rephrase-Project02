<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sã‚¹ãƒ­ãƒƒãƒˆ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆç”»åƒè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</title>
    <link href="style.css" rel="stylesheet"/>
    <script src="js/subslot_toggle.js"></script>
    <script src="js/universal_image_system.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .slot-container {
            border: 2px solid #333;
            margin: 10px;
            padding: 10px;
            border-radius: 8px;
        }
        .subslot-container {
            border: 1px solid #666;
            margin: 5px;
            padding: 8px;
            border-radius: 4px;
            background: #f9f9f9;
        }
        .slot-image {
            max-width: 100px;
            max-height: 100px;
            margin: 5px;
        }
        .slot-wrapper {
            margin: 15px 0;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 8px;
        }
        .test-controls {
            margin: 20px 0;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 8px;
        }
        button {
            margin: 5px;
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            background: #007bff;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
        .log-area {
            background: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 4px;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Sã‚¹ãƒ­ãƒƒãƒˆ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆç”»åƒè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</h1>

    <div class="test-controls">
        <h3>ãƒ†ã‚¹ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</h3>
        <button onclick="testLoadMetaTags()">ğŸ“„ ãƒ¡ã‚¿ã‚¿ã‚°èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testSSubslotToggle()">ğŸ”„ Sã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆé–‹é–‰ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testSubslotImageUpdate()">ğŸ–¼ï¸ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆç”»åƒæ›´æ–°ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="clearLogArea()">ğŸ§¹ ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
    </div>

    <!-- Sã‚¹ãƒ­ãƒƒãƒˆï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰ -->
    <div class="slot-container" id="slot-s">
        <label><strong>S ã‚¹ãƒ­ãƒƒãƒˆ</strong></label>
        <img alt="image for S" class="slot-image" src="slot_images/common/placeholder.png"/>
        <div class="slot-text">engineer</div>
        <div class="slot-phrase">software engineer</div>
        <div class="subslot-toggle-button">
            <button data-subslot-toggle="s">â–¼ è©³ç´°</button>
        </div>
    </div>

    <!-- Sã‚¹ãƒ­ãƒƒãƒˆã®ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆï¼ˆè©³ç´°ãƒœã‚¿ãƒ³ã§è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰ -->
    <div class="slot-wrapper" id="slot-s-sub" style="display: none;">
        <div class="subslot-label" style="font-weight: bold; margin-bottom: 0.5rem;">
            ç¾åœ¨å±•é–‹ä¸­ï¼šS ã® subslot
        </div>
        <div class="subslot-container" id="slot-s-sub-m1">
            <label>M1</label>
            <img alt="image for M1" class="slot-image" src="slot_images/common/placeholder.png"/>
            <div class="slot-text">intense</div>
            <div class="slot-phrase">intense morning</div>
        </div>
        <div class="subslot-container" id="slot-s-sub-s">
            <label>S</label>
            <img alt="image for S" class="slot-image" src="slot_images/common/placeholder.png"/>
            <div class="slot-text">engineer</div>
            <div class="slot-phrase">software engineer</div>
        </div>
        <div class="subslot-container" id="slot-s-sub-aux">
            <label>AUX</label>
            <img alt="image for AUX" class="slot-image" src="slot_images/common/placeholder.png"/>
            <div class="slot-text">did</div>
            <div class="slot-phrase">did not</div>
        </div>
        <div class="subslot-container" id="slot-s-sub-v">
            <label>V</label>
            <img alt="image for V" class="slot-image" src="slot_images/common/placeholder.png"/>
            <div class="slot-text">analyze</div>
            <div class="slot-phrase">analyze data</div>
        </div>
        <div class="subslot-container" id="slot-s-sub-o1">
            <label>O1</label>
            <img alt="image for O1" class="slot-image" src="slot_images/common/placeholder.png"/>
            <div class="slot-text">performance</div>
            <div class="slot-phrase">system performance</div>
        </div>
    </div>

    <div class="test-section">
        <h3>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°</h3>
        <div id="log-area" class="log-area"></div>
    </div>

    <script>
        // ç°¡æ˜“ãƒ­ã‚°è¡¨ç¤º
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logArea = document.getElementById('log-area');
            if (logArea) {
                const logEntry = document.createElement('div');
                logEntry.textContent = args.join(' ');
                logArea.appendChild(logEntry);
                logArea.scrollTop = logArea.scrollHeight;
            }
        };

        // ãƒ¢ãƒƒã‚¯JSONãƒ‡ãƒ¼ã‚¿ - insert_test_data_clean.jsãŒæœŸå¾…ã™ã‚‹å½¢å¼
        window.loadedJsonData = [
            // Sã‚¹ãƒ­ãƒƒãƒˆ ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿
            {
                "Slot": "S",
                "SlotPhrase": "engineer",
                "SlotText": "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
                "PhraseType": "word",
                "SubslotID": "",
                "SubslotElement": "",
                "SubslotText": ""
            },
            // Sã‚¹ãƒ­ãƒƒãƒˆã®ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆ
            {
                "Slot": "S", 
                "SlotPhrase": "engineer",
                "SlotText": "",
                "PhraseType": "",
                "SubslotID": "sub-s",
                "SubslotElement": "eng",
                "SubslotText": "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ç•¥"
            },
            {
                "Slot": "S",
                "SlotPhrase": "engineer", 
                "SlotText": "",
                "PhraseType": "",
                "SubslotID": "sub-aux",
                "SubslotElement": "eer",
                "SubslotText": "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢èªå°¾"
            },
            {
                "Slot": "S",
                "SlotPhrase": "engineer",
                "SlotText": "",
                "PhraseType": "",
                "SubslotID": "sub-m2", 
                "SubslotElement": "in",
                "SubslotText": "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢èªå¹¹"
            }
        ];

        // ãƒ†ã‚¹ãƒˆé–¢æ•°
        function testLoadMetaTags() {
            console.log('ğŸ§ª ãƒ¡ã‚¿ã‚¿ã‚°èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆé–‹å§‹...');
            if (window.loadImageMetaTags) {
                window.loadImageMetaTags();
            } else {
                console.error('âŒ loadImageMetaTags é–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        }

        function testSSubslotToggle() {
            console.log('ğŸ§ª Sã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆé–‹é–‰ãƒ†ã‚¹ãƒˆé–‹å§‹...');
            if (window.toggleExclusiveSubslot) {
                window.toggleExclusiveSubslot('s');
            } else {
                console.error('âŒ toggleExclusiveSubslot é–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        }

        function testSubslotImageUpdate() {
            console.log('ğŸ§ª ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆç”»åƒæ›´æ–°ãƒ†ã‚¹ãƒˆé–‹å§‹...');
            if (window.updateSubslotImages) {
                window.updateSubslotImages('s');
            } else {
                console.error('âŒ updateSubslotImages é–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        }

        function clearLogArea() {
            const logArea = document.getElementById('log-area');
            if (logArea) {
                logArea.innerHTML = '';
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
            console.log('ğŸ“¦ åˆ©ç”¨å¯èƒ½ãªé–¢æ•°ãƒã‚§ãƒƒã‚¯:');
            console.log('  - loadImageMetaTags:', typeof window.loadImageMetaTags);
            console.log('  - toggleExclusiveSubslot:', typeof window.toggleExclusiveSubslot);
            console.log('  - updateSubslotImages:', typeof window.updateSubslotImages);
            console.log('  - handleSubslotDisplay:', typeof window.handleSubslotDisplay);
        });
    </script>
</body>
</html>
