# Unified Stanza-Rephrase Mapper è¨­è¨ˆä»•æ§˜æ›¸ãƒ»é–‹ç™ºå·¥ç¨‹è¡¨
**ä½œæˆæ—¥**: 2025å¹´8æœˆ15æ—¥  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Rephraseè‹±èªå­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ  - çµ±åˆå‹æ–‡æ³•åˆ†è§£ã‚¨ãƒ³ã‚¸ãƒ³  
**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼ï¼ˆå€‹åˆ¥ã‚¨ãƒ³ã‚¸ãƒ³çŸ¥è­˜ã®çµ±åˆï¼‰

---

## ğŸ“‹ 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ç›®çš„
æ—¢å­˜ã®15å€‹åˆ¥ã‚¨ãƒ³ã‚¸ãƒ³ã®å„ªç§€ãªãƒãƒƒãƒ”ãƒ³ã‚°çŸ¥è­˜ã‚’ã€é¸æŠä¸è¦ã®çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã«å†ç·¨æˆã—ã€ã€Œæ–‡æ³•æ¤œå‡ºâ†’ã‚¨ãƒ³ã‚¸ãƒ³é¸æŠâ†’åˆ†è§£ã€ã®å•é¡Œã‚’ã€ŒåŒæ™‚ä¸¦è¡Œå‡¦ç†ã€ã§è§£æ±ºã™ã‚‹ã€‚

### 1.2 æ ¸å¿ƒæ€æƒ³
- **Stanzaè§£æçµæœ â†’ Rephraseå½¢å¼ã‚¹ãƒ­ãƒƒãƒˆã®ä½“ç³»çš„ãƒãƒƒãƒ”ãƒ³ã‚°**
- **é¸æŠå•é¡Œã®æ’é™¤**: å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒåŒæ™‚å®Ÿè¡Œ
- **æ—¢å­˜è³‡ç”£æ´»ç”¨**: 15å€‹åˆ¥ã‚¨ãƒ³ã‚¸ãƒ³ã®å®Ÿè£…çŸ¥è­˜ã‚’ç¶™æ‰¿

### 1.3 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```python
class UnifiedStanzaRephraseMapper:
    def process(self, sentence):
        doc = stanza.nlp(sentence)
        result = {}
        
        # å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒåŒæ™‚å®Ÿè¡Œï¼ˆé¸æŠä¸è¦ï¼‰
        for token in doc.sentences[0].words:
            self._handle_relative_clause(token, result)
            self._handle_passive_voice(token, result)
            self._handle_conjunction(token, result)
            # ... å…¨æ–‡æ³•ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
            
        return result
```

---

## ğŸš€ 2. é–‹ç™ºå·¥ç¨‹è¡¨

### Phase 0: åŸºç›¤æ§‹ç¯‰ (1-2æ—¥)
```
âœ… ç›®æ¨™: çµ±åˆãƒ•ã‚¡ã‚¤ãƒ«ã®åŸºç›¤ã¨ãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰
ğŸ“„ æˆæœç‰©:
- unified_stanza_rephrase_mapper.py (åŸºç›¤ã‚¯ãƒ©ã‚¹)
- test_unified_mapper.py (æ®µéšçš„ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ )
- migration_source/ (ç§»æ¤å…ƒãƒ•ã‚¡ã‚¤ãƒ«é›†ç´„)

ğŸ§ª ãƒ†ã‚¹ãƒˆé …ç›®:
- Stanzaãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³åˆæœŸåŒ–
- åŸºæœ¬çš„ãªæ§‹é€ è§£æå‹•ä½œç¢ºèª
```

### Phase 1: é–¢ä¿‚ç¯€å‡¦ç† (2-3æ—¥)  
```
âœ… ç›®æ¨™: simple_relative_engine.py ã®æ©Ÿèƒ½ç§»æ¤
ğŸ“„ æ©Ÿèƒ½:
- _handle_relative_clause() ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- 'acl:relcl', 'nsubj', 'obj', 'nmod:poss', 'advmod' å‡¦ç†
- å…ˆè¡Œè©æŠ½å‡ºã€é–¢ä¿‚ä»£åè©ãƒ»é–¢ä¿‚å‰¯è©å¯¾å¿œ

ğŸ§ª ãƒ†ã‚¹ãƒˆä¾‹æ–‡:
- "The car which we saw was red."
- "The man who runs is fast."  
- "The man whose car is red lives here."
- "The place where I live is Tokyo."

âœ… æˆåŠŸåŸºæº–: 4ä¾‹æ–‡ã™ã¹ã¦ã§æ­£ç¢ºãªã‚¹ãƒ­ãƒƒãƒˆåˆ†è§£
```

### Phase 2: å—å‹•æ…‹å‡¦ç† (2-3æ—¥)
```
âœ… ç›®æ¨™: passive_voice_engine.py ã®æ©Ÿèƒ½è¿½åŠ 
ğŸ“„ æ©Ÿèƒ½:
- _handle_passive_voice() ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- 'nsubj:pass', 'aux:pass', 'obl:agent' å‡¦ç†
- byå¥ã®é©åˆ‡ãªé…ç½®

ğŸ§ª ãƒ†ã‚¹ãƒˆä¾‹æ–‡:
- "The car was bought."
- "The car was bought by him."
- "The book which was read was interesting."

âœ… æˆåŠŸåŸºæº–: å—å‹•æ…‹å˜ç‹¬ + é–¢ä¿‚ç¯€ã¨ã®è¤‡åˆå‡¦ç†
```

### Phase 3: æ¥ç¶šè©å‡¦ç† (2-3æ—¥)
```
âœ… ç›®æ¨™: stanza_based_conjunction_engine.py ã®æ©Ÿèƒ½è¿½åŠ 
ğŸ“„ æ©Ÿèƒ½:
- _handle_conjunction() ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- 'mark', 'advcl' å‡¦ç†ã€æ„å‘³åˆ†é¡(M1/M2/M3)
- å¾“å±ç¯€ã¨ä¸»ç¯€ã®é©åˆ‡ãªåˆ†é›¢

ğŸ§ª ãƒ†ã‚¹ãƒˆä¾‹æ–‡:
- "I came because it rained."
- "Although he is tired, he works."
- "When she arrived, I left."

âœ… æˆåŠŸåŸºæº–: æ¥ç¶šè©å˜ç‹¬ + æ—¢å­˜æ©Ÿèƒ½ã¨ã®è¤‡åˆå‡¦ç†
```

### Phase 4-15: æ®µéšçš„æ©Ÿèƒ½æ‹¡å¼µ (å„2-3æ—¥)
```
Phase 4:  é€²è¡Œå½¢å‡¦ç†      (progressive_tenses_engine.py)
Phase 5:  å‰ç½®è©å¥å‡¦ç†    (prepositional_phrase_engine.py)
Phase 6:  å®Œäº†é€²è¡Œå½¢å‡¦ç†  (perfect_progressive_engine.py)
Phase 7:  åˆ†è©å‡¦ç†        (participle_engine.py)
Phase 8:  å‹•åè©å‡¦ç†      (gerund_engine.py)
Phase 9:  ä¸å®šè©å‡¦ç†      (infinitive_engine.py)
Phase 10: ç–‘å•æ–‡å‡¦ç†      (question_formation_engine.py)
Phase 11: ä»®å®šæ³•å‡¦ç†      (subjunctive_conditional_engine.py)
Phase 12: å€’ç½®å‡¦ç†        (inversion_engine.py)
Phase 13: æ¯”è¼ƒæ§‹æ–‡å‡¦ç†    (comparative_superlative_engine.py)
Phase 14: åŸºæœ¬5æ–‡å‹å‡¦ç†   (basic_five_pattern_engine.py)
Phase 15: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»æœ€é©åŒ–
```

### Phase 16: å®Œæˆãƒ»çµ±åˆ (3-5æ—¥)
```
âœ… ç›®æ¨™: å…¨æ©Ÿèƒ½çµ±åˆãƒ†ã‚¹ãƒˆãƒ»æ–‡æ›¸åŒ–ãƒ»æœ¬ç•ªé©ç”¨
ğŸ“„ æˆæœç‰©:
- åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ
- é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ğŸ§ª ãƒ†ã‚¹ãƒˆé …ç›®:
- è¶…è¤‡é›‘æ–‡å‡¦ç†ãƒ†ã‚¹ãƒˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ  
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
- æ—¢å­˜UIé€£æºãƒ†ã‚¹ãƒˆ
```

---

## ğŸ“ 3. ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### æ–°è¦ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«
```
unified_stanza_rephrase_mapper.py    # ãƒ¡ã‚¤ãƒ³çµ±åˆã‚¨ãƒ³ã‚¸ãƒ³ (2000-3000è¡Œäºˆå®š)
test_unified_mapper.py               # æ®µéšçš„ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ 
migration_checklist.md               # ç§»æ¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
performance_benchmark.py             # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
```

### ç§»æ¤å…ƒå‚ç…§ãƒ•ã‚¡ã‚¤ãƒ«
```
migration_source/                    # ç§»æ¤å…ƒãƒ•ã‚¡ã‚¤ãƒ«é›†ç´„ãƒ•ã‚©ãƒ«ãƒ€
â”œâ”€â”€ simple_relative_engine.py
â”œâ”€â”€ passive_voice_engine.py  
â”œâ”€â”€ stanza_based_conjunction_engine.py
â”œâ”€â”€ progressive_tenses_engine.py
â”œâ”€â”€ prepositional_phrase_engine.py
â””â”€â”€ ... (å…¨15å€‹åˆ¥ã‚¨ãƒ³ã‚¸ãƒ³)
```

---

## âš¡ 4. æŠ€è¡“ä»•æ§˜

### 4.1 ä¾å­˜é–¢ä¿‚
- **Stanza**: ä¸»è¦NLPè§£æã‚¨ãƒ³ã‚¸ãƒ³
- **Python 3.8+**: é–‹ç™ºç’°å¢ƒ

### 4.2 å…¥å‡ºåŠ›ä»•æ§˜
```python
# å…¥åŠ›
sentence: str = "The car which we saw was red."

# å‡ºåŠ›  
result: Dict[str, str] = {
    "S": "The car",
    "V": "was", 
    "C1": "red",
    "sub-s": "we",
    "sub-v": "saw", 
    "sub-o1": "which"  # é–¢ä¿‚ä»£åè©æƒ…å ±
}
```

### 4.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™
- **å‡¦ç†é€Ÿåº¦**: 1æ–‡ã‚ãŸã‚Š0.1-0.3ç§’ä»¥å†…
- **ç²¾åº¦**: åŸºæœ¬æ§‹æ–‡95%ä»¥ä¸Šã€è¤‡åˆæ§‹æ–‡85%ä»¥ä¸Š
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨**: 50MBä»¥ä¸‹

---

## ğŸ¯ 5. å“è³ªä¿è¨¼

### 5.1 æ®µéšçš„ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
å„Phaseå®Œäº†æ™‚ã«å¿…é ˆï¼š
1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**: è©²å½“æ–‡æ³•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Œå…¨å‹•ä½œç¢ºèª
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: æ—¢å­˜æ©Ÿèƒ½ã¨ã®çµ„ã¿åˆã‚ã›ç¢ºèª  
3. **å›å¸°ãƒ†ã‚¹ãƒˆ**: æ—¢å­˜æ©Ÿèƒ½ã®åŠ£åŒ–ãªã—ç¢ºèª

### 5.2 ãƒ†ã‚¹ãƒˆä¾‹æ–‡ã‚»ãƒƒãƒˆ
- **åŸºæœ¬ä¾‹æ–‡**: å„æ–‡æ³•5-10ä¾‹æ–‡
- **è¤‡åˆä¾‹æ–‡**: æ–‡æ³•çµ„ã¿åˆã‚ã›ä¾‹æ–‡
- **ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹**: ç‰¹æ®Šãƒ»ä¾‹å¤–çš„æ§‹æ–‡

---

## ğŸ”„ 6. ç§»è¡Œæˆ¦ç•¥

### 6.1 æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®ä½µç”¨
é–‹ç™ºæœŸé–“ä¸­ã¯æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ä¸¦è¡Œé‹ç”¨ã—ã€æ®µéšçš„ã«ç½®ãæ›ãˆ

### 6.2 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
çµ±åˆã‚¨ãƒ³ã‚¸ãƒ³ã§å‡¦ç†ã§ããªã„å ´åˆã®æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ å‘¼ã³å‡ºã—

---

## ğŸ“ˆ 7. æˆåŠŸæŒ‡æ¨™

- âœ… **æ©Ÿèƒ½å®Œå…¨æ€§**: 15å€‹åˆ¥ã‚¨ãƒ³ã‚¸ãƒ³ã®å…¨æ©Ÿèƒ½ç§»æ¤å®Œäº†
- âœ… **ç²¾åº¦å‘ä¸Š**: ç¾åœ¨ã®simple_unified_integratoræ¯”20%ä»¥ä¸Šå‘ä¸Š
- âœ… **å‡¦ç†é€Ÿåº¦**: ç¾åœ¨ã‚·ã‚¹ãƒ†ãƒ åŒç­‰ä»¥ä¸Š
- âœ… **ä¿å®ˆæ€§**: å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ç®¡ç†å®Ÿç¾

---

**å‚™è€ƒ**: ã“ã®ä»•æ§˜æ›¸ã¯é–‹ç™ºé€²è¡Œã«å¿œã˜ã¦éšæ™‚æ›´æ–°ã•ã‚Œã¾ã™ã€‚
