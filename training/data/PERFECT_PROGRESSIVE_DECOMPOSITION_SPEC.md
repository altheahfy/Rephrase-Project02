# å®Œäº†é€²è¡Œå½¢ã‚¨ãƒ³ã‚¸ãƒ³ åˆ†è§£ãƒ‘ã‚¿ãƒ¼ãƒ³è¨­è¨ˆä»•æ§˜æ›¸

## ğŸ“‹ å®Ÿè£…äºˆå®šæ¦‚è¦

**ã‚¨ãƒ³ã‚¸ãƒ³å**: Perfect Progressive Engine  
**å®Ÿè£…æ—¥**: 2025å¹´8æœˆ12æ—¥  
**çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: Phase 2 é«˜é »åº¦æ§‹æ–‡ãƒ‘ã‚¿ãƒ¼ãƒ³  
**å‡¦ç†å¯¾è±¡**: å®Œäº†é€²è¡Œå½¢æ§‹æ–‡ã®ä¸Šä½+ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆäºŒé‡åˆ†è§£  

---

## ğŸ¯ åˆ†è§£ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°äºˆå®š

### 1. ç¾åœ¨å®Œäº†é€²è¡Œå½¢ (Present Perfect Progressive)

#### **A. åŸºæœ¬ç¾åœ¨å®Œäº†é€²è¡Œå½¢**
```
å…¥åŠ›: "I have been working here for three years."
äºˆå®šåˆ†è§£:
â”œâ”€â”€ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ (ç‹¬ç«‹æ–‡ç”¨)
â”‚   â”œâ”€â”€ S: "I"
â”‚   â”œâ”€â”€ V: "working"
â”‚   â”œâ”€â”€ Aux: "have been"
â”‚   â”œâ”€â”€ M1: "here"
â”‚   â””â”€â”€ M2: "for three years"
â”œâ”€â”€ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆ (å¾“å±ç¯€ç”¨) â€»åŒã˜åŸºæœ¬æ§‹é€ ã‚’ç¶­æŒ
â”‚   â”œâ”€â”€ sub-s: "I"
â”‚   â”œâ”€â”€ sub-v: "working"
â”‚   â”œâ”€â”€ sub-aux: "have been"
â”‚   â”œâ”€â”€ sub-m1: "here"
â”‚   â””â”€â”€ sub-m2: "for three years"
â””â”€â”€ å®Œäº†é€²è¡Œå½¢ãƒ¡ã‚¿æƒ…å ±
    â”œâ”€â”€ tense_type: "present_perfect_progressive"
    â”œâ”€â”€ auxiliary: "have been"
    â”œâ”€â”€ main_verb: "working"
    â”œâ”€â”€ duration: "for three years"
    â””â”€â”€ location: "here"
```

#### **B. ç–‘å•æ–‡å®Œäº†é€²è¡Œå½¢**
```
å…¥åŠ›: "How long have you been studying English?"
äºˆå®šåˆ†è§£:
â”œâ”€â”€ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ
â”‚   â”œâ”€â”€ M1: "How long"
â”‚   â”œâ”€â”€ Aux: "have been"
â”‚   â”œâ”€â”€ S: "you"
â”‚   â”œâ”€â”€ V: "studying"
â”‚   â””â”€â”€ O1: "English"
â”œâ”€â”€ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆ â€»åŒã˜åŸºæœ¬æ§‹é€ ã‚’ç¶­æŒ
â”‚   â”œâ”€â”€ sub-m1: "How long"
â”‚   â”œâ”€â”€ sub-aux: "have been"
â”‚   â”œâ”€â”€ sub-s: "you"
â”‚   â”œâ”€â”€ sub-v: "studying"
â”‚   â””â”€â”€ sub-o1: "English"
â””â”€â”€ å®Œäº†é€²è¡Œå½¢ãƒ¡ã‚¿æƒ…å ±
    â”œâ”€â”€ tense_type: "present_perfect_progressive"
    â”œâ”€â”€ sentence_type: "interrogative"
    â”œâ”€â”€ wh_word: "How long"
    â””â”€â”€ auxiliary: "have been"
```

### 2. éå»å®Œäº†é€²è¡Œå½¢ (Past Perfect Progressive)

#### **A. åŸºæœ¬éå»å®Œäº†é€²è¡Œå½¢**
```
å…¥åŠ›: "She had been waiting for an hour when I arrived."
äºˆå®šåˆ†è§£:
â”œâ”€â”€ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ
â”‚   â”œâ”€â”€ S: "She"
â”‚   â”œâ”€â”€ Aux: "had been"
â”‚   â”œâ”€â”€ V: "waiting"
â”‚   â”œâ”€â”€ M1: "for an hour"
â”‚   â””â”€â”€ M2: "when I arrived"
â”œâ”€â”€ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆ â€»åŒã˜åŸºæœ¬æ§‹é€ ã‚’ç¶­æŒ
â”‚   â”œâ”€â”€ sub-s: "She"
â”‚   â”œâ”€â”€ sub-aux: "had been"
â”‚   â”œâ”€â”€ sub-v: "waiting"
â”‚   â”œâ”€â”€ sub-m1: "for an hour"
â”‚   â””â”€â”€ sub-m2: "when I arrived"
â””â”€â”€ å®Œäº†é€²è¡Œå½¢ãƒ¡ã‚¿æƒ…å ±
    â”œâ”€â”€ tense_type: "past_perfect_progressive"
    â”œâ”€â”€ auxiliary: "had been"
    â”œâ”€â”€ duration: "for an hour"
    â””â”€â”€ time_clause: "when I arrived"
```

#### **B. ç†ç”±ãƒ»çµæœè¡¨ç¾**
```
å…¥åŠ›: "He was tired because he had been running all morning."
äºˆå®šåˆ†è§£:
â”œâ”€â”€ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ
â”‚   â”œâ”€â”€ S: "He"
â”‚   â”œâ”€â”€ V: "was"
â”‚   â”œâ”€â”€ C1: "tired"
â”‚   â””â”€â”€ M1: "because he had been running all morning"
â”œâ”€â”€ M1å†…éƒ¨ã®ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆåˆ†è§£ ("he had been running all morning")
â”‚   â”œâ”€â”€ sub-s: "he"
â”‚   â”œâ”€â”€ sub-aux: "had been"
â”‚   â”œâ”€â”€ sub-v: "running"
â”‚   â””â”€â”€ sub-m1: "all morning"
â””â”€â”€ å®Œäº†é€²è¡Œå½¢ãƒ¡ã‚¿æƒ…å ±
    â”œâ”€â”€ tense_type: "past_perfect_progressive"
    â”œâ”€â”€ context: "causal_relationship"
    â””â”€â”€ duration: "all morning"
```

### 3. æœªæ¥å®Œäº†é€²è¡Œå½¢ (Future Perfect Progressive)

#### **A. åŸºæœ¬æœªæ¥å®Œäº†é€²è¡Œå½¢**
```
å…¥åŠ›: "By next year, I will have been living here for five years."
äºˆå®šåˆ†è§£:
â”œâ”€â”€ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ
â”‚   â”œâ”€â”€ M1: "By next year"
â”‚   â”œâ”€â”€ S: "I"
â”‚   â”œâ”€â”€ Aux: "will have been"
â”‚   â”œâ”€â”€ V: "living"
â”‚   â”œâ”€â”€ M2: "here"
â”‚   â””â”€â”€ M3: "for five years"
â”œâ”€â”€ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆ â€»åŒã˜åŸºæœ¬æ§‹é€ ã‚’ç¶­æŒ
â”‚   â”œâ”€â”€ sub-m1: "By next year"
â”‚   â”œâ”€â”€ sub-s: "I"
â”‚   â”œâ”€â”€ sub-aux: "will have been"
â”‚   â”œâ”€â”€ sub-v: "living"
â”‚   â”œâ”€â”€ sub-m2: "here"
â”‚   â””â”€â”€ sub-m3: "for five years"
â””â”€â”€ å®Œäº†é€²è¡Œå½¢ãƒ¡ã‚¿æƒ…å ±
    â”œâ”€â”€ tense_type: "future_perfect_progressive"
    â”œâ”€â”€ auxiliary: "will have been"
    â”œâ”€â”€ time_reference: "By next year"
    â”œâ”€â”€ duration: "for five years"
    â””â”€â”€ location: "here"
```

### 4. ç‰¹æ®Šå®Œäº†é€²è¡Œå½¢æ§‹æ–‡

#### **A. å—å‹•å®Œäº†é€²è¡Œå½¢**
```
å…¥åŠ›: "The project has been being developed since January."
äºˆå®šåˆ†è§£:
â”œâ”€â”€ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ
â”‚   â”œâ”€â”€ S: "The project"
â”‚   â”œâ”€â”€ Aux: "has been being"
â”‚   â”œâ”€â”€ V: "developed"
â”‚   â””â”€â”€ M1: "since January"
â”œâ”€â”€ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆ â€»åŒã˜åŸºæœ¬æ§‹é€ ã‚’ç¶­æŒ
â”‚   â”œâ”€â”€ sub-s: "The project"
â”‚   â”œâ”€â”€ sub-aux: "has been being"
â”‚   â”œâ”€â”€ sub-v: "developed"
â”‚   â””â”€â”€ sub-m1: "since January"
â””â”€â”€ å®Œäº†é€²è¡Œå½¢ãƒ¡ã‚¿æƒ…å ±
    â”œâ”€â”€ tense_type: "present_perfect_progressive_passive"
    â”œâ”€â”€ auxiliary: "has been being"
    â”œâ”€â”€ voice: "passive"
    â””â”€â”€ time_reference: "since January"
```

#### **B. æ¡ä»¶æ–‡å†…å®Œäº†é€²è¡Œå½¢**
```
å…¥åŠ›: "If I had been studying harder, I would have passed the exam."
äºˆå®šåˆ†è§£:
â”œâ”€â”€ ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ â€»Rephraseã¯3é‡å…¥ã‚Œå­ã‚’æ‰±ã‚ãªã„ãŸã‚ã€ã“ã‚ŒãŒã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã«å…¥ã‚‹ã“ã¨ã¯ãªã„
â”‚   â”œâ”€â”€ M1: "If I had been studying harder"
â”‚   â”œâ”€â”€ S: "I"
â”‚   â”œâ”€â”€ Aux: "would have"
â”‚   â”œâ”€â”€ V: "passed"
â”‚   â””â”€â”€ O1: "the exam"
â”œâ”€â”€ M1å†…éƒ¨ã®ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆåˆ†è§£ ("I had been studying harder")
â”‚   â”œâ”€â”€ sub-s: "I"
â”‚   â”œâ”€â”€ sub-aux: "had been"
â”‚   â”œâ”€â”€ sub-v: "studying"
â”‚   â””â”€â”€ sub-m1: "harder"
â””â”€â”€ å®Œäº†é€²è¡Œå½¢ãƒ¡ã‚¿æƒ…å ±
    â”œâ”€â”€ tense_type: "past_perfect_progressive_conditional"
    â”œâ”€â”€ sentence_type: "conditional"
    â”œâ”€â”€ condition_auxiliary: "had been"
    â””â”€â”€ result_auxiliary: "would have"
```

---

## ğŸ”§ æŠ€è¡“å®Ÿè£…äºˆå®š

### Stanzaä¾å­˜é–¢ä¿‚åˆ†æãƒ‘ã‚¿ãƒ¼ãƒ³

#### **å®Œäº†é€²è¡Œå½¢æ¤œå‡ºãƒ‘ã‚¿ãƒ¼ãƒ³**
```python
# æƒ³å®šã•ã‚Œã‚‹ä¾å­˜é–¢ä¿‚ãƒ©ãƒ™ãƒ«
- aux: åŠ©å‹•è© ("have", "had", "will")
- aux:pass: å—å‹•åŠ©å‹•è© ("been")  
- root: ä¸»å‹•è© (ç¾åœ¨åˆ†è© "-ing")
- nsubj: ä¸»èª
- advmod: å‰¯è©ä¿®é£¾ ("already", "just", "still")
- obl:tmod: æ™‚é–“è¡¨ç¾ ("for three years", "since January")
```

#### **åŠ©å‹•è©é€£é–ãƒ‘ã‚¿ãƒ¼ãƒ³**
```python
# å®Œäº†é€²è¡Œå½¢ã®åŠ©å‹•è©ãƒ‘ã‚¿ãƒ¼ãƒ³
present_perfect_progressive: "have/has + been + Ving"
past_perfect_progressive: "had + been + Ving"  
future_perfect_progressive: "will + have + been + Ving"
passive_perfect_progressive: "have/has + been + being + Ved"
```

### ã‚¨ãƒ³ã‚¸ãƒ³å‡¦ç†ãƒ•ãƒ­ãƒ¼äºˆå®š

```python
class PerfectProgressiveEngine:
    def process(self, sentence):
        # 1. å®Œäº†é€²è¡Œå½¢æ§‹æ–‡æ¤œå‡º
        perfect_progressive_info = self._detect_perfect_progressive_structure(sentence)
        
        # 2. æ™‚åˆ¶åˆ†é¡
        if perfect_progressive_info['tense'] == 'present_perfect_progressive':
            return self._process_present_perfect_progressive(sentence, perfect_progressive_info)
        elif perfect_progressive_info['tense'] == 'past_perfect_progressive':
            return self._process_past_perfect_progressive(sentence, perfect_progressive_info)
        elif perfect_progressive_info['tense'] == 'future_perfect_progressive':
            return self._process_future_perfect_progressive(sentence, perfect_progressive_info)
        
        # 3. çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†è§£
        return self._unified_decomposition(sentence, perfect_progressive_info)
    
    def process_as_subslot(self, sentence):
        # å¾“å±ç¯€å†…å®Œäº†é€²è¡Œå½¢ã®ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆå°‚ç”¨å‡¦ç†
        return self._process_perfect_progressive_as_subslot(sentence)
```

---

## ğŸ¯ å®Ÿè£…å„ªå…ˆé †ä½

### **Phase 1: åŸºæœ¬å®Œäº†é€²è¡Œå½¢**
1. ç¾åœ¨å®Œäº†é€²è¡Œå½¢ (`have/has been + Ving`)
2. éå»å®Œäº†é€²è¡Œå½¢ (`had been + Ving`) 
3. æœªæ¥å®Œäº†é€²è¡Œå½¢ (`will have been + Ving`)

### **Phase 2: ç‰¹æ®Šå®Œäº†é€²è¡Œå½¢**
4. ç–‘å•æ–‡å®Œäº†é€²è¡Œå½¢ (`How long have you been...?`)
5. å—å‹•å®Œäº†é€²è¡Œå½¢ (`has been being + Ved`)
6. å¦å®šå®Œäº†é€²è¡Œå½¢ (`haven't been + Ving`)

### **Phase 3: è¤‡åˆå®Œäº†é€²è¡Œå½¢**
7. æ¡ä»¶æ–‡å†…å®Œäº†é€²è¡Œå½¢
8. é–¢ä¿‚è©ç¯€å†…å®Œäº†é€²è¡Œå½¢
9. æ¥ç¶šè©ç¯€å†…å®Œäº†é€²è¡Œå½¢

---

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹å‡¦ç†çµæœä¾‹

### **çµ±åˆä¾‹: æ¥ç¶šè© + å®Œäº†é€²è¡Œå½¢**
```
å®Œå…¨æ–‡: "Because I have been working here for three years, I understand the company culture well."

å¾“å±ç¯€å‡¦ç†:
â”œâ”€â”€ Conjunction Engine â†’ M1: "Because I have been working here for three years"
â””â”€â”€ Perfect Progressive Engine (ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆå‡¦ç†):
    â”œâ”€â”€ sub-s: "I"
    â”œâ”€â”€ sub-aux: "have been"
    â”œâ”€â”€ sub-v: "working"
    â”œâ”€â”€ sub-m1: "here"
    â””â”€â”€ sub-m2: "for three years"

æœ€çµ‚çµ±åˆçµæœ:
â”œâ”€â”€ M1: "Because I have been working here for three years" (ä¸Šä½)
â”œâ”€â”€ S: "I", V: "understand", O1: "the company culture", M1: "well" (ä¸»ç¯€)
â””â”€â”€ sub-s: "I", sub-aux: "have been", sub-v: "working", sub-m1: "here", sub-m2: "for three years" (ã‚µãƒ–)
```

ã“ã®è©³ç´°ãªåˆ†è§£ãƒ‘ã‚¿ãƒ¼ãƒ³äºˆå®šã«åŸºã¥ã„ã¦ã€å®Œäº†é€²è¡Œå½¢ã‚¨ãƒ³ã‚¸ãƒ³ã®å®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ
