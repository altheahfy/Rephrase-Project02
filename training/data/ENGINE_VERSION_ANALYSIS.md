# Pure Stanza Engine バージョン分析レポート
**分析日**: 2025年8月12日  
**目的**: 複数バージョンの機能・目的・必要性の分析と整理方針決定

---

## 1. 各バージョンの分析結果

### Pure Stanza Engine v2 (`pure_stanza_engine_v2.py`)
- **クラス名**: `PureStanzaEngine` 
- **メインメソッド**: `decompose(sentence)`
- **特徴**: Step18 hybridエンジン統合、サブスロットマッピング
- **ファイルサイズ**: 964行（大規模実装）
- **実装状況**: 完全実装、複雑な機能含む

### Pure Stanza Engine v3 (`pure_stanza_engine_v3.py`) ⭐
- **クラス名**: `PureStanzaEngineV3`
- **メインメソッド**: `decompose(sentence)`
- **特徴**: ゼロハードコーディング、完全設定駆動型
- **ファイルサイズ**: 477行（最適化済み）
- **実装状況**: ✅ 動作確認済み・実用レベル
- **テスト**: test_engine_v3_phase2.py で全機能成功

### Pure Stanza Engine v4 (`pure_stanza_engine_v4.py`)
- **クラス名**: `PureStanzaEngine_v4`
- **メインメソッド**: `analyze_complex_sentence(text)`
- **特徴**: 複文対応、階層的clause分解アプローチ
- **ファイルサイズ**: 362行（実験的実装）
- **実装状況**: ⚠️ インターフェースが異なる（`decompose`メソッドなし）

---

## 2. バージョン間の関係性

### 進化の流れ
```
v2 (Step18統合) → v3 (設定駆動・最適化) → v4 (複文特化・実験的)
```

### 機能的位置づけ
- **v2**: 初期の包括的実装（多機能・複雑）
- **v3**: 実用最適化版（動作確認済み・推奨）
- **v4**: 実験的複文対応版（未完成・異なるアプローチ）

---

## 3. 整理方針

### 🟢 保持すべきバージョン

#### Pure Stanza Engine v3（メイン）
- **理由**: 
  - 動作確認済み・実用レベル
  - ゼロハードコーディング設計
  - 包括的テストケース完備
  - 最適化された実装
- **用途**: メイン分解エンジン

### 🟡 条件付き保持

#### Pure Stanza Engine v4（評価対象）
- **判断基準**: 
  - 複文分解機能が実際に動作するか？
  - v3との統合可能性は？
  - 独自価値があるか？
- **評価後**: 有効なら保持、無効なら development_archive へ移動

### 🔴 アーカイブ対象

#### Pure Stanza Engine v2（旧版）
- **理由**:
  - v3で機能が改善・最適化済み
  - 964行の複雑な実装（保守困難）
  - v3が実用レベルで動作確認済み
- **処理**: development_archive/old_engines/ へ移動

---

## 4. 推奨アクション

### 即座実行
1. **v4評価テスト**: 実際の複文分解能力を確認
2. **v2アーカイブ**: 旧版をold_enginesに移動
3. **v3メイン化**: 明確なメインエンジンとして位置づけ

### 評価後実行
1. **v4統合 or アーカイブ**: 評価結果に基づく判断
2. **統一インターフェース**: 残すエンジンのAPIを統一
3. **ドキュメント更新**: 最終的なエンジン構成の文書化

---

## 5. 期待される効果

### バージョン整理後
- **メインエンジン**: Pure Stanza Engine v3（確実に動作）
- **拡張エンジン**: Pure Stanza Engine v4（評価次第）
- **開発フォーカス**: v3ベースの機能拡張

### 開発効率化
- **混乱防止**: どのバージョンを使うべきか明確化
- **保守性向上**: メンテナンス対象の絞り込み
- **品質向上**: 動作確認済みエンジンに集中

---

**結論**: v3をメインとし、v2をアーカイブ、v4は評価後に判断する方針が最適。
