{
  "version": "3.0",
  "description": "Complete Rephrase Rules with Phase 1, 2 & 3 Extensions - 90%+ Coverage",
  "rules": [
    {
      "id": "aux-have",
      "priority": 10,
      "trigger": {
        "lemma": [
          "have"
        ],
        "pos": [
          "AUX",
          "VERB"
        ],
        "form": [
          "has",
          "have",
          "had"
        ]
      },
      "assign": {
        "slot": "Aux",
        "type": "word"
      }
    },
    {
      "id": "aux-will",
      "priority": 10,
      "trigger": {
        "token": "will"
      },
      "assign": {
        "slot": "Aux",
        "type": "word"
      }
    },
    {
      "id": "be-progressive",
      "priority": 12,
      "trigger": {
        "pattern": "(?i)\\b(am|is|are|was|were)\\s+\\w+ing\\b"
      },
      "assign": [
        {
          "slot": "Aux",
          "type": "word",
          "capture": 1
        },
        {
          "slot": "V",
          "type": "word",
          "capture": 0,
          "note": "V-ing as main verb"
        }
      ]
    },
    {
      "id": "vocative-you-comma",
      "priority": 20,
      "trigger": {
        "pattern": "(?i)^You\\s*,\\s*"
      },
      "assign": {
        "slot": "M1",
        "type": "word",
        "capture": 0,
        "note": "Vocative 'You,' in imperative sentences"
      }
    },
    {
      "id": "wh-why-front",
      "priority": 5,
      "trigger": {
        "pattern": "(?i)^why\\b"
      },
      "assign": {
        "slot": "M3",
        "type": "word",
        "meta": {
          "QuestionType": "wh-word"
        }
      }
    },
    {
      "id": "please-interjection-M3",
      "priority": 15,
      "trigger": {
        "lemma": [
          "please"
        ],
        "pos": [
          "INTJ"
        ],
        "dep": [
          "intj"
        ]
      },
      "conditions": {
        "position": "sentence_final"
      },
      "assign": {
        "slot": "M3",
        "type": "word"
      },
      "description": "文末の感嘆詞「please」をM3スロットに割り当て"
    },
    {
      "id": "phrasal-verb-particle-M2",
      "priority": 12,
      "trigger": {
        "pos": [
          "ADP"
        ],
        "dep": [
          "prt",
          "prep"
        ],
        "conditions": {
          "follows_verb": true,
          "phrasal_verb_particle": [
            "off",
            "on",
            "up",
            "down",
            "out",
            "in",
            "away",
            "back",
            "over",
            "after",
            "through",
            "into",
            "onto",
            "across",
            "along",
            "around",
            "aside",
            "apart",
            "ahead",
            "behind",
            "beyond",
            "beneath",
            "between",
            "toward",
            "towards",
            "underneath"
          ]
        }
      },
      "assign": {
        "slot": "M2",
        "type": "word"
      },
      "description": "句動詞の粒子（off/on/up等）をM2スロットに割り当て"
    },
    {
      "id": "wh-where-front",
      "priority": 5,
      "trigger": {
        "pattern": "(?i)^where\\b"
      },
      "assign": {
        "slot": "M3",
        "value": "where",
        "order": 1,
        "type": "word",
        "meta": {
          "QuestionType": "wh-word"
        }
      }
    },
    {
      "id": "subject-pronoun-np-front",
      "priority": 20,
      "trigger": {
        "pos": [
          "PRON",
          "NOUN",
          "PROPN"
        ],
        "position": "before_first_main_verb"
      },
      "assign": {
        "slot": "S",
        "type": "word",
        "order": 3
      }
    },
    {
      "id": "time-M3",
      "priority": 40,
      "trigger": {
        "pattern": "(?i)\\b(last night|yesterday( morning| afternoon)?|this (morning|weekend)|next week|an? \\w+ ago|at \\d+(?::\\d+)?(\\s?(am|pm))?|at (noon|midnight)|on (monday|tuesday|wednesday|thursday|friday|saturday|sunday|\\b\\w+day)\\b)"
      },
      "assign": {
        "slot": "M3",
        "type": "word"
      }
    },
    {
      "id": "place-M3",
      "priority": 42,
      "trigger": {
        "pattern": "(?i)\\b(on|in|under|by|at)\\b\\s+[\\s\\S]+"
      },
      "assign": {
        "slot": "M3",
        "type": "word"
      }
    },
    {
      "id": "manner-degree-M2",
      "priority": 50,
      "trigger": {
        "pos": [
          "ADV"
        ],
        "position": "after_V"
      },
      "assign": {
        "slot": "M2",
        "type": "word"
      }
    },
    {
      "id": "to-direction-M2",
      "priority": 46,
      "trigger": {
        "pattern": "(?i)\\bto\\b\\s+[\\s\\S]+"
      },
      "assign": {
        "slot": "M2",
        "type": "word"
      }
    },
    {
      "id": "for-purpose-M2",
      "priority": 46,
      "trigger": {
        "pattern": "(?i)\\bfor\\b\\s+[\\s\\S]+"
      },
      "assign": {
        "slot": "M2",
        "type": "word"
      }
    },
    {
      "id": "from-source-M3",
      "priority": 46,
      "trigger": {
        "pattern": "(?i)\\bfrom\\b\\s+[\\s\\S]+"
      },
      "assign": {
        "slot": "M3",
        "type": "word"
      }
    },
    {
      "id": "if-clause-as-M2",
      "priority": 30,
      "trigger": {
        "pattern": "(?i)\\bif\\b\\s+[^?!.]+"
      },
      "assign": {
        "slot": "M2",
        "type": "clause",
        "subslots": [
          {
            "id": "sub-m1",
            "element": "if"
          },
          {
            "id": "sub-s",
            "element_rule": "first NP after if"
          },
          {
            "id": "sub-v",
            "element_rule": "first tensed V after sub-s"
          },
          {
            "id": "sub-o1",
            "element_rule": "direct object of sub-v, if any"
          }
        ]
      }
    },
    {
      "id": "V-recover-intrans",
      "priority": 15,
      "trigger": {
        "lemma": [
          "recover"
        ],
        "frame": "intransitive"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_hint": "M3",
          "note": "prefer FROM-PP as source if present"
        }
      ]
    },
    {
      "id": "V-listen-intrans",
      "priority": 15,
      "trigger": {
        "lemma": [
          "listen"
        ]
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)to\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-leave-intrans-depart",
      "priority": 15,
      "trigger": {
        "lemma": [
          "leave"
        ],
        "sense": "depart"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)for\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-go-intrans",
      "priority": 15,
      "trigger": {
        "lemma": [
          "go"
        ]
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)to\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-pay-intrans",
      "priority": 15,
      "trigger": {
        "lemma": [
          "pay"
        ],
        "frame": "intransitive_or_light"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)for\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-believe-in",
      "priority": 14,
      "trigger": {
        "pattern": "(?i)\\bbelieve\\s+in\\b"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word",
          "text_rule": "use 'believe in' as unit"
        },
        {
          "slot": "O1",
          "type": "word",
          "element_rule": "NP after 'in'"
        }
      ]
    },
    {
      "id": "V-apologize-intrans",
      "priority": 14,
      "trigger": {
        "lemma": [
          "apologize"
        ]
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)(to|for)\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-rain-weather",
      "priority": 14,
      "trigger": {
        "lemma": [
          "rain"
        ]
      },
      "assign": [
        {
          "slot": "S",
          "type": "word",
          "element_rule": "weather 'it' if present"
        },
        {
          "slot": "V",
          "type": "word"
        }
      ]
    },
    {
      "id": "V-be-exist-loc",
      "priority": 14,
      "trigger": {
        "lemma": [
          "be"
        ],
        "sense": "exist_locative"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M3",
          "pattern": "(?i)\\b(on|in|under|by|at)\\b\\s+[^]+"
        }
      ]
    },
    {
      "id": "noun-modifier-nmod-M1",
      "description": "名詞修飾関係の検出（nmod依存関係）",
      "trigger": {
        "dependency": [
          "nmod"
        ],
        "priority": "high"
      },
      "action": {
        "slot": "M1",
        "type": "phrase",
        "extraction_method": "nmod_phrase_extraction"
      },
      "examples": [
        "the book on the table",
        "a man with a hat",
        "the city of Tokyo"
      ],
      "confidence": 0.85
    },
    {
      "id": "open-clausal-complement-xcomp-O2",
      "description": "オープン節補語の検出（to不定詞など）",
      "trigger": {
        "dependency": [
          "xcomp"
        ],
        "priority": "high"
      },
      "action": {
        "slot": "O2",
        "type": "clause",
        "extraction_method": "xcomp_clause_extraction"
      },
      "examples": [
        "I want to go home",
        "She decided to study",
        "We plan to visit Japan"
      ],
      "confidence": 0.9
    },
    {
      "id": "clausal-complement-ccomp-O2",
      "description": "節補語の検出（that節など）",
      "trigger": {
        "dependency": [
          "ccomp"
        ],
        "priority": "high"
      },
      "action": {
        "slot": "O2",
        "type": "clause",
        "extraction_method": "ccomp_clause_extraction"
      },
      "examples": [
        "I think that he is right",
        "She said she would come",
        "We know you are busy"
      ],
      "confidence": 0.9
    },
    {
      "id": "passive-auxiliary-auxpass-Aux",
      "description": "受動態助動詞の検出（be + 過去分詞）",
      "trigger": {
        "dependency": [
          "auxpass"
        ],
        "priority": "high"
      },
      "action": {
        "slot": "Aux",
        "type": "auxiliary",
        "extraction_method": "auxpass_extraction"
      },
      "examples": [
        "The book was written by him",
        "The car is being repaired",
        "The problem will be solved"
      ],
      "confidence": 0.95
    },
    {
      "id": "passive-agent-by-M3",
      "description": "受動態の動作主検出（by句）",
      "trigger": {
        "dependency": [
          "agent"
        ],
        "pattern": "(?i)\\bby\\s+[\\s\\S]+",
        "priority": "high"
      },
      "action": {
        "slot": "M3",
        "type": "phrase",
        "extraction_method": "agent_phrase_extraction"
      },
      "examples": [
        "written by Shakespeare",
        "designed by the architect",
        "discovered by scientists"
      ],
      "confidence": 0.9
    },
    {
      "id": "prepositional-complement-pcomp-M2",
      "description": "前置詞補語の検出",
      "trigger": {
        "dependency": [
          "pcomp"
        ],
        "priority": "medium"
      },
      "action": {
        "slot": "M2",
        "type": "complement",
        "extraction_method": "pcomp_extraction"
      },
      "examples": [
        "interested in learning",
        "good at playing",
        "afraid of flying"
      ],
      "confidence": 0.8
    },
    {
      "id": "dative-indirect-object-O2",
      "description": "与格・間接目的語の検出",
      "trigger": {
        "dependency": [
          "dative"
        ],
        "priority": "high"
      },
      "action": {
        "slot": "O2",
        "type": "indirect_object",
        "extraction_method": "dative_extraction"
      },
      "examples": [
        "give him a book",
        "show her the way",
        "tell me the truth"
      ],
      "confidence": 0.85
    }
  ],
  "phase3_extensions": [
    {
      "rule_id": "prep_phrase_enhancement",
      "description": "前置詞句の包括的検出と分類",
      "dependency_type": "prep",
      "priority": 1,
      "patterns": [
        "prep + pobj",
        "prep + pcomp",
        "prep + acl"
      ],
      "target_slots": [
        "M2",
        "M3"
      ],
      "examples": [
        "in the house → M3",
        "with great care → M2",
        "during the meeting → M3"
      ]
    },
    {
      "rule_id": "amod_adjective_enhancement",
      "description": "形容詞修飾語の高精度検出",
      "dependency_type": "amod",
      "priority": 2,
      "patterns": [
        "amod + noun",
        "multiple amod + noun",
        "amod + compound"
      ],
      "target_slots": [
        "S",
        "O1",
        "O2"
      ],
      "examples": [
        "big red car → S",
        "beautiful old house → O1",
        "expensive modern computer → O2"
      ]
    },
    {
      "rule_id": "advmod_adverb_enhancement",
      "description": "副詞修飾語の文脈別分類",
      "dependency_type": "advmod",
      "priority": 3,
      "patterns": [
        "advmod + verb",
        "advmod + adj",
        "advmod + adv"
      ],
      "target_slots": [
        "M2",
        "V",
        "M1"
      ],
      "examples": [
        "quickly ran → M2",
        "very beautiful → embedded",
        "quite slowly → M2"
      ]
    },
    {
      "rule_id": "det_determiner_enhancement",
      "description": "限定詞の包括的処理",
      "dependency_type": "det",
      "priority": 4,
      "patterns": [
        "det + noun",
        "det + compound",
        "quantifier patterns"
      ],
      "target_slots": [
        "embedded_in_phrases"
      ],
      "examples": [
        "the book → embedded",
        "some people → quantifier",
        "this computer → demonstrative"
      ]
    },
    {
      "rule_id": "attr_attribute_enhancement",
      "description": "属性補語の高精度検出",
      "dependency_type": "attr",
      "priority": 5,
      "patterns": [
        "copula + attr",
        "wh-question + attr"
      ],
      "target_slots": [
        "C1"
      ],
      "examples": [
        "is a teacher → C1",
        "What is this? → C1"
      ]
    },
    {
      "rule_id": "relcl_relative_enhancement",
      "description": "関係節の完全統合",
      "dependency_type": "relcl",
      "priority": 6,
      "patterns": [
        "noun + that/which + relcl",
        "noun + who + relcl"
      ],
      "target_slots": [
        "sub_structures"
      ],
      "examples": [
        "book that I read → sub_clause",
        "person who came → sub_clause"
      ]
    },
    {
      "rule_id": "expl_expletive_enhancement",
      "description": "There構文の特殊処理",
      "dependency_type": "expl",
      "priority": 7,
      "patterns": [
        "There + be + noun",
        "There + be + adj + noun"
      ],
      "target_slots": [
        "S",
        "V",
        "O1"
      ],
      "examples": [
        "There is a book → restructure",
        "There are many people → restructure"
      ]
    },
    {
      "rule_id": "acl_adjectival_enhancement",
      "description": "形容詞節の高度処理",
      "dependency_type": "acl",
      "priority": 8,
      "patterns": [
        "noun + to-infinitive",
        "noun + participle"
      ],
      "target_slots": [
        "sub_structures"
      ],
      "examples": [
        "book to read → sub_clause",
        "man walking → sub_clause"
      ]
    },
    {
      "rule_id": "appos_apposition_enhancement",
      "description": "同格語句の統合処理",
      "dependency_type": "appos",
      "priority": 9,
      "patterns": [
        "noun , noun",
        "noun ( explanation )"
      ],
      "target_slots": [
        "embedded_expansion"
      ],
      "examples": [
        "John, my friend → expansion",
        "Tokyo (capital) → expansion"
      ]
    },
    {
      "rule_id": "mark_subordinate_enhancement",
      "description": "従属接続詞マーカーの処理",
      "dependency_type": "mark",
      "priority": 10,
      "patterns": [
        "because + clause",
        "when + clause",
        "if + clause"
      ],
      "target_slots": [
        "M2",
        "sub_structures"
      ],
      "examples": [
        "because it's late → M2",
        "when he comes → sub_clause"
      ]
    }
  ],
  "coverage_stats": {
    "existing_rules": 32,
    "phase3_extensions": 10,
    "total_rules": 42,
    "target_coverage": "90.0%",
    "spacy_dependencies_covered": 44,
    "implementation_status": "Phase 3 - Advanced Grammar Features"
  },
  "phase_progression": {
    "phase1": "Basic Dependencies (compound, conj+cc, neg, nummod) - 75%",
    "phase2": "Structural Extensions (nmod, xcomp, ccomp, auxpass, agent, pcomp, dative) - 80%",
    "phase3": "Advanced Grammar (prep, amod, advmod, det, attr, relcl, expl, acl, appos, mark) - 90%+"
  }
}