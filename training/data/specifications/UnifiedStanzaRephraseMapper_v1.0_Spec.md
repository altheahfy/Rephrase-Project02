# UnifiedStanzaRephraseMapper v1.4 è¨­è¨ˆä»•æ§˜æ›¸

**ä½œæˆæ—¥**: 2025å¹´8æœˆ16æ—¥  
**æœ€çµ‚æ›´æ–°**: 2025å¹´8æœˆ21æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.4  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: äººé–“æ–‡æ³•èªè­˜ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å®Œäº†ã€100%ç²¾åº¦é”æˆã€"lives"èª¤èªè­˜å•é¡Œè§£æ±ºæ¸ˆã¿  

---

## ğŸ—ï¸ **ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ€æƒ³**

### **æ ¸å¿ƒæ¦‚å¿µ: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‹åŒæ™‚å‡¦ç†æ–¹å¼**

```
ğŸ¯ è¨­è¨ˆåŸç†:
å…¨ã¦ã®å°‚é–€ã‚·ã‚§ãƒ•ãŒåŒæ™‚ã«å¨æˆ¿ã«å…¥ã‚Šã€
å„è‡ªã®å°‚é–€é ˜åŸŸã‚’è¦‹æ¥µã‚ã¦åŒæ™‚ä¸¦è¡Œå‡¦ç†ã‚’è¡Œã†

ğŸ¢ å¾“æ¥æ–¹å¼ã¨ã®å·®ç•°:
âŒ æ—§æ–¹å¼: é †æ¬¡é¸æŠå‹ï¼ˆ15å€‹ã®å€‹åˆ¥ã‚¨ãƒ³ã‚¸ãƒ³ã‹ã‚‰1ã¤ã‚’é¸æŠï¼‰
âœ… æ–°æ–¹å¼: åŒæ™‚å‡¦ç†å‹ï¼ˆå…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒä¸¦è¡Œå‹•ä½œã—ã¦å”èª¿ï¼‰
```

### **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹é€ **

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UnifiedStanzaRephraseMapper v1.4            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çµ±åˆStanzaè§£æ + spaCyãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è£œæ­£      â”‚
â”‚ + ğŸ†• äººé–“æ–‡æ³•èªè­˜ã‚·ã‚¹ãƒ†ãƒ  (v1.4æ–°æ©Ÿèƒ½)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ†• ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“é€£æºã‚·ã‚¹ãƒ†ãƒ  (éƒ¨åˆ†å®Ÿè£…)        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ handler_shared_context                  â”‚ â”‚
â”‚ â”‚ â”œâ”€ predefined_slots (åŸºæœ¬å®Ÿè£…)          â”‚ â”‚
â”‚ â”‚ â”œâ”€ remaining_elements (è¨­è¨ˆã®ã¿)        â”‚ â”‚
â”‚ â”‚ â”œâ”€ handler_metadata (é™å®šå®Ÿè£…)         â”‚ â”‚
â”‚ â”‚ â””â”€ control_flags (éƒ¨åˆ†å®Ÿè£…)             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ†• ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‹å”èª¿ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚·ã‚¹ãƒ†ãƒ          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç†æƒ³: å®Œå…¨å”èª¿å‹å®Ÿè¡Œé †åºåˆ¶å¾¡            â”‚ â”‚
â”‚ â”‚ ç¾å®Ÿ: å›ºå®šé †åº + éƒ¨åˆ†çš„æƒ…å ±å…±æœ‰        â”‚ â”‚
â”‚ â”‚ âœ… _handle_participle_construction      â”‚ â”‚
â”‚ â”‚ âœ… _handle_relative_clause              â”‚ â”‚
â”‚ â”‚ âœ… _handle_basic_five_pattern           â”‚ â”‚
â”‚ â”‚ âœ… _handle_passive_voice                â”‚ â”‚
â”‚ â”‚ âœ… _handle_adverbial_modifier           â”‚ â”‚
â”‚ â”‚ âœ… _handle_auxiliary_complex            â”‚ â”‚
â”‚ â”‚ âœ… _handle_conjunction                  â”‚ â”‚
â”‚ â”‚ ğŸš§ æ±ç”¨ä¸Šä½ã‚µãƒ–é€£çµã‚·ã‚¹ãƒ†ãƒ  (è¨­è¨ˆä¸­)    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ†• åˆ†è©æ§‹æ–‡ä¿è­·ã‚·ã‚¹ãƒ†ãƒ  (å®Ÿè£…å®Œäº†)           â”‚
â”‚ â”œâ”€ participle_detected ãƒ•ãƒ©ã‚°åˆ¶å¾¡          â”‚
â”‚ â”œâ”€ å—å‹•æ…‹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ä¿è­·æ©Ÿèƒ½                â”‚
â”‚ â””â”€ ä¸»ã‚¹ãƒ­ãƒƒãƒˆç«¶åˆå›é¿                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš§ ä½ç½®åˆ¥ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  (éƒ¨åˆ†å®Ÿè£…) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çµæœçµ±åˆãƒ»é‡è¤‡è§£æ±ºãƒ»å„ªå…ˆåº¦å‡¦ç†               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çµæœçµ±åˆãƒ»é‡è¤‡è§£æ±ºãƒ»å„ªå…ˆåº¦å‡¦ç†               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **å®Ÿè£…å®Œäº†ãƒãƒ³ãƒ‰ãƒ©ãƒ¼è©³ç´°**

### **ğŸ†• 0. participle_construction (åˆ†è©æ§‹æ–‡) - v1.3æ–°è¦è¿½åŠ **
- **è²¬ä»»ç¯„å›²**: ç¾åœ¨åˆ†è©ã€éå»åˆ†è©ã€being+éå»åˆ†è©ã®åˆ†è©æ§‹æ–‡å‡¦ç†
- **å¯¾å¿œä¾‹æ–‡**: ä¿®é£¾åˆ†è©ã€åˆ†è©æ§‹æ–‡ã€beingæ§‹æ–‡
- **å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº† (v1.3)
- **ä¿è­·æ©Ÿèƒ½**: `participle_detected`ãƒ•ãƒ©ã‚°ã«ã‚ˆã‚‹ä»–ãƒãƒ³ãƒ‰ãƒ©ãƒ¼åˆ¶å¾¡
- **ä¾‹**: "The children playing..." â†’ S:'', sub-v:'the children playing'

### **1. basic_five_pattern (åŸºæœ¬5æ–‡å‹)**
- **è²¬ä»»ç¯„å›²**: S, V, O1, O2, C1, C2, Aux ã®åŸºæœ¬æ§‹é€ èªè­˜
- **å¯¾å¿œä¾‹æ–‡**: ç¬¬1-5æ–‡å‹ã€åŠ©å‹•è©ã€æ™‚åˆ¶ã®åŸºæœ¬å½¢
- **å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†
- **ğŸ†• v1.3å¼·åŒ–**: åˆ†è©æ§‹æ–‡ä¿è­·æ©Ÿèƒ½ã€å…±æœ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå¯¾å¿œ
- **ä¾‹**: "I love you." â†’ S:I, V:love, O1:you

### **2. relative_clause (é–¢ä¿‚ç¯€)**
- **è²¬ä»»ç¯„å›²**: who, which, that, whose, where, when, why, how ã®é–¢ä¿‚ç¯€å‡¦ç†
- **å¯¾å¿œä¾‹æ–‡**: é–¢ä¿‚ä»£åè©ã€é–¢ä¿‚å‰¯è©ã€çœç•¥é–¢ä¿‚ä»£åè©
- **å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†
- **ğŸ†• v1.3å¼·åŒ–**: ä¸»ã‚¹ãƒ­ãƒƒãƒˆå æœ‰æƒ…å ±ã®å…±æœ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¼é”
- **ä¾‹**: "The man who runs is fast." â†’ S:"", V:is, C1:fast + sub-slots

### **3. passive_voice (å—å‹•æ…‹)**
- **è²¬ä»»ç¯„å›²**: beå‹•è© + éå»åˆ†è©ã®å—å‹•æ…‹æ§‹é€ èªè­˜
- **å¯¾å¿œä¾‹æ–‡**: èƒ½å‹•æ…‹â†”å—å‹•æ…‹å¤‰æ›ã€byå¥å‡¦ç†
- **å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†
- **ğŸ†• v1.3å¼·åŒ–**: åˆ†è©æ§‹æ–‡ä¿è­·æ©Ÿèƒ½å®Ÿè£…
- **ä¾‹**: "The letter was written by John." â†’ S:The letter, Aux:was, V:written, M1:by John

### **4. adverbial_modifier (å‰¯è©ä¿®é£¾)**
- **è²¬ä»»ç¯„å›²**: å‰¯è©ã€å‰¯è©å¥ã€æ™‚é–“ãƒ»å ´æ‰€ãƒ»æ–¹æ³•è¡¨ç¾
- **å¯¾å¿œä¾‹æ–‡**: M1, M2, M3 ä¿®é£¾è¦ç´ ã®é©åˆ‡ãªåˆ†é¡
- **å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†
- **ä¾‹**: "She sings beautifully." â†’ S:She, V:sings, M1:beautifully

### **5. auxiliary_complex (è¤‡åˆåŠ©å‹•è©)**
- **è²¬ä»»ç¯„å›²**: è¤‡æ•°åŠ©å‹•è©ã®çµ„ã¿åˆã‚ã›ã€å®Œäº†å½¢ã€å—å‹•æ…‹åŠ©å‹•è©
- **å¯¾å¿œä¾‹æ–‡**: have been, will have, might have beenç­‰ã®è¤‡åˆæ§‹é€ 
- **å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†
- **ğŸ†• v1.3å¼·åŒ–**: åˆ†è©æ§‹æ–‡sub-auxä¿è­·æ©Ÿèƒ½
- **ä¾‹**: "He has been working." â†’ S:He, Aux:has been, V:working

### **ğŸ†• 6. conjunction (æ¥ç¶šè©) - v1.3æ–°è¦è¿½åŠ **
- **è²¬ä»»ç¯„å›²**: and, but, orç­‰ã®æ¥ç¶šè©å‡¦ç†
- **å¯¾å¿œä¾‹æ–‡**: ç­‰ä½æ¥ç¶šã€å¾“å±æ¥ç¶š
- **å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº† (v1.3)
- **ä¾‹**: åŸºæœ¬çš„ãªæ¥ç¶šè©æ§‹æ–‡å¯¾å¿œ

---

## ï¿½ **ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“é€£æºã‚·ã‚¹ãƒ†ãƒ è©³ç´° (v1.3æ–°æ©Ÿèƒ½)**

### **ğŸ—ï¸ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“é€£æºã‚·ã‚¹ãƒ†ãƒ  (occupied_main_slots)**

#### **handler_shared_context æ§‹é€  (å®Ÿè£…æ¸ˆã¿)**
```python
handler_shared_context = {
    'occupied_main_slots': set(),        # âœ… å æœ‰ã•ã‚ŒãŸä¸»ã‚¹ãƒ­ãƒƒãƒˆç®¡ç†
    'handler_metadata': {               # âœ… é–¢ä¿‚ç¯€æƒ…å ±ã®ã¿å®Ÿè£…
        'relative_clause': {
            'occupied_slot': str,        # å æœ‰ã‚¹ãƒ­ãƒƒãƒˆå
            'antecedent': str,          # å…ˆè¡Œè©
            'processed_sub_slots': list  # å‡¦ç†æ¸ˆã¿ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆ
        }
    }
}
```

#### **å æœ‰ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  (å®Ÿè£…æ¸ˆã¿)**
```python
# é–¢ä¿‚ç¯€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã«ã‚ˆã‚‹ä¸»ã‚¹ãƒ­ãƒƒãƒˆå æœ‰å®£è¨€
shared_context['occupied_main_slots'].add(antecedent_position)

# 5æ–‡å‹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ã®å æœ‰ãƒã‚§ãƒƒã‚¯
occupied_slots = shared_context.get('occupied_main_slots', set())
if occupied_slots:
    # éƒ¨åˆ†çš„ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºã‚’å®Ÿè¡Œ
    perform_partial_pattern_detection()
```

### **ğŸ›¡ï¸ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“é€£æºã‚·ã‚¹ãƒ†ãƒ è©³ç´°**

#### **ğŸ¯ è¨­è¨ˆç†å¿µ (ã‚ã‚‹ã¹ãå§¿)**
```
æ±ç”¨ä¸Šä½ã‚µãƒ–é€£çµã‚·ã‚¹ãƒ†ãƒ :
å…¨ã¦ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒå¥ãƒ»ç¯€æƒ…å ±ã‚’çµ±ä¸€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§äº¤æ›ã—ã€
å‹•çš„ã«å®Ÿè¡Œé †åºã‚’æœ€é©åŒ–ã™ã‚‹å®Œå…¨å”èª¿å‹ã‚·ã‚¹ãƒ†ãƒ 
```

#### **ğŸ” ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³**

**âœ… å®Ÿè£…å®Œäº†æ©Ÿèƒ½:**
```python
# åŸºæœ¬çš„ãªå…±æœ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
handler_shared_context = {
    'occupied_main_slots': set(),  # å æœ‰æ¸ˆã¿ä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆ (åŸºæœ¬å®Ÿè£…)
    'remaining_elements': {},      # æ®‹ã‚Šè¦ç´ æƒ…å ± (æ§‹é€ ã®ã¿)
    'handler_metadata': {}         # ãƒãƒ³ãƒ‰ãƒ©ãƒ¼åˆ¥ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ (é™å®šå®Ÿè£…)
}

# é–¢ä¿‚ç¯€â†’5æ–‡å‹ã¸ã®æƒ…å ±ä¼é” (æˆåŠŸä¾‹)
shared_context['occupied_main_slots'].add(antecedent_position)
occupied_slots = shared_context.get('occupied_main_slots', set())
```

**ï¿½ éƒ¨åˆ†å®Ÿè£…æ©Ÿèƒ½:**
```python
# åˆ†è©æ§‹æ–‡ä¿è­·ã‚·ã‚¹ãƒ†ãƒ  (ãƒ•ãƒ©ã‚°ãƒ™ãƒ¼ã‚¹)
control_flags['participle_detected'] = True

# ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè¡Œé †åº (å›ºå®šé †åº)
ordered_handlers = [
    'participle_construction',  # æœ€å„ªå…ˆ
    'relative_clause',         # å æœ‰æƒ…å ±è¨­å®š
    'basic_five_pattern',      # å æœ‰æƒ…å ±å‚ç…§
    # ... æ®‹ã‚Šã¯å›ºå®šé †åº
]
```

**âŒ æœªå®Ÿè£…ãƒ»è¨­è¨ˆä¸­æ©Ÿèƒ½:**
```python
# ç†æƒ³çš„ãªæ±ç”¨é€£æºã‚·ã‚¹ãƒ†ãƒ  (æœªå®Ÿè£…)
class HandlerProtocol:
    def declare_dependencies(self) -> List[str]
    def provide_information(self, context) -> HandlerInfo
    def consume_information(self, available_info) -> ProcessingDecision

# å‹•çš„å®Ÿè¡Œé †åºåˆ¶å¾¡ (æœªå®Ÿè£…)
def optimize_handler_execution_order(dependencies, available_handlers)

# whoseæ§‹æ–‡ã®ã€Œå‡¦ç†å§”è¨—ã€å…ˆã‚·ã‚¹ãƒ†ãƒ  (ã‚³ãƒ¡ãƒ³ãƒˆã®ã¿ã€å®Ÿè£…ãªã—)
# ç¾å®Ÿ: basic_five_pattern ã®é€šå¸¸å‡¦ç†ã«ä¾å­˜
def generic_upper_sub_connection_system(clause_info, main_structure)
```

**ğŸ” ç¾çŠ¶ã®æŠ€è¡“çš„è² å‚µ:**
- whoseæ§‹æ–‡: "æ±ç”¨ã‚·ã‚¹ãƒ†ãƒ ã«å§”è¨—"ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚ã‚Šã€å®Ÿéš›ã¯5æ–‡å‹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒå‡¦ç†
- æƒ…å ±ä¼é”: é–¢ä¿‚ç¯€â†’5æ–‡å‹ã®ã¿å®Ÿè£…ã€ä»–ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“ã¯æœªå¯¾å¿œ
- å®Ÿè¡Œé †åº: å›ºå®šé †åºã€ä¾å­˜é–¢ä¿‚ã«ã‚ˆã‚‹å‹•çš„åˆ¶å¾¡ãªã—

#### **ï¿½ ä»Šå¾Œã®å®Ÿè£…æ–¹é‡**

**Phase 2.1: ãƒ—ãƒ­ãƒˆã‚³ãƒ«çµ±ä¸€**
- å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“ã®æƒ…å ±äº¤æ›ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµ±ä¸€
- whoseæ§‹æ–‡å‡¦ç†ã®å®Ÿéš›ã®æ±ç”¨ã‚·ã‚¹ãƒ†ãƒ ç§»è¡Œ
- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å…±æœ‰ã®å®Œå…¨å®Ÿè£…

**Phase 2.2: å‹•çš„åˆ¶å¾¡**
- ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•è§£æ±º
- å®Ÿè¡Œé †åºã®å‹•çš„æœ€é©åŒ–
- å¥ãƒ»ç¯€å¢ƒç•Œã®è‡ªå‹•èªè­˜

---

## ï¿½ğŸ”„ **å‡¦ç†ãƒ•ãƒ­ãƒ¼**

### **Phase 1: çµ±åˆè§£æ**
1. **Stanzaè§£æ**: åŸºæœ¬çš„ãªå“è©ãƒ»ä¾å­˜é–¢ä¿‚åˆ†æ
2. **spaCyãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è£œæ­£**: ç‰¹å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã®è§£æä¿®æ­£
3. **çµ±ä¸€docç”Ÿæˆ**: å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å…±é€šã®è§£æçµæœ

### **Phase 2: ä¸¦è¡Œãƒãƒ³ãƒ‰ãƒ©ãƒ¼å‡¦ç†**
```python
# å…¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®åŒæ™‚å®Ÿè¡Œ
for handler_name in self.active_handlers:
    handler_method = getattr(self, f'_handle_{handler_name}')
    handler_result = handler_method(main_sentence, result.copy())
    
    if handler_result:
        result = self._merge_handler_results(result, handler_result, handler_name)
```

### **Phase 3: çµæœçµ±åˆ**
1. **é‡è¤‡è§£æ±º**: è¤‡æ•°ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‹ã‚‰ã®ç«¶åˆçµæœã‚’èª¿æ•´
2. **å„ªå…ˆåº¦é©ç”¨**: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å›ºæœ‰ã®å„ªå…ˆåº¦ãƒ«ãƒ¼ãƒ«
3. **ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆçµ±åˆ**: ä½ç½®åˆ¥ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹æ•´ç†

---

## ğŸ“Š **ç¾åœ¨ã®å¯¾å¿œç¯„å›²**

### **âœ… å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ (54ä¾‹æ–‡100%å¯¾å¿œ)**
- **åŸºæœ¬5æ–‡å‹**: 20ä¾‹æ–‡ (37%)
- **é–¢ä¿‚ç¯€**: 18ä¾‹æ–‡ (33%)
- **å—å‹•æ…‹**: 11ä¾‹æ–‡ (20%)
- **å‰¯è©ä¿®é£¾**: 5ä¾‹æ–‡ (9%)

---

## ğŸ“Š **å®Ÿè£…æ¸ˆã¿ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ (2025å¹´8æœˆ19æ—¥æ›´æ–°)**

### **å®Ÿè¨¼æ¸ˆã¿ç²¾åº¦ï¼ˆ53ä¾‹æ–‡æ¨™æº–æ¤œè¨¼ï¼‰**
| ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ | é©ç”¨ä¾‹æ–‡æ•° | è²¢çŒ®åº¦ | ä¸»ãªæˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ |
|-----------|------------|---------|------------------|
| basic_five_pattern | 53/53 | 100% | SV, SVC, SVO, SVOO, SVOC |
| relative_clause | 19/53 | 36% | who, which, that, whoseç¯€ |
| passive_voice | 13/53 | 25% | be + éå»åˆ†è©æ§‹é€  |
| adverbial_modifier | 40/53 | 75% | å‰¯è©ã€å‰ç½®è©å¥ã€æ™‚é–“ãƒ»å ´æ‰€è¡¨ç¾ |
| auxiliary_complex | 19/53 | 36% | have been, will haveç­‰è¤‡åˆåŠ©å‹•è© |

### **å…¨ä½“ç²¾åº¦å®Ÿç¸¾ (æ¨™æº–æ¤œè¨¼v4.0 - äººé–“æ–‡æ³•èªè­˜ã‚·ã‚¹ãƒ†ãƒ å®Œæˆå¾Œ)**
- **å®Œå…¨ä¸€è‡´ç‡**: **100%** (54/54ä¾‹æ–‡) ğŸ† **å®Œå…¨ç²¾åº¦é”æˆï¼**
- **éƒ¨åˆ†ä¸€è‡´ç‡**: 0% (0/54ä¾‹æ–‡) - å…¨ã‚±ãƒ¼ã‚¹å®Œå…¨ä¸€è‡´
- **å‡¦ç†æˆåŠŸç‡**: 100% (54/54ä¾‹æ–‡)
- **å¹³å‡å‡¦ç†æ™‚é–“**: 0.32ç§’/ä¾‹æ–‡
- **é‡è¦ä¿®æ­£**: "The man whose car is red lives here"ã®Stanzaèª¤èªè­˜è§£æ±º

### **ã‚¹ãƒ­ãƒƒãƒˆåˆ¥ç²¾åº¦è©³ç´° (v1.4æœ€æ–°å®Ÿç¸¾)**
- **S (ä¸»èª)**: 100.0% (54/54) âœ… PERFECT
- **V (å‹•è©)**: 100.0% (54/54) âœ… PERFECT  
- **Aux (åŠ©å‹•è©)**: 100.0% (19/19) âœ… PERFECT
- **O1 (ç›®çš„èª)**: 100.0% (7/7) âœ… PERFECT
- **M1 (ä¿®é£¾èª1)**: 100.0% (1/1) âœ… PERFECT
- **M2 (ä¿®é£¾èª2)**: 100.0% (30/30) âœ… PERFECT
- **M3 (ä¿®é£¾èª3)**: 100.0% (10/10) âœ… PERFECT
- **C1 (è£œèª)**: 100.0% (20/20) âœ… PERFECT

### **ï¿½ 100%ç²¾åº¦é”æˆã®æŠ€è¡“çš„è¦å› **
- **äººé–“æ–‡æ³•èªè­˜ã‚·ã‚¹ãƒ†ãƒ **: Stanzaã®"lives"èª¤èªè­˜(NOUNâ†’VERB)ã‚’ä¿®æ­£
- **whoseæ§‹æ–‡ä¿®æ­£ãƒ‘ã‚¿ãƒ¼ãƒ³**: `_correct_whose_ambiguous_verb_pattern`å®Ÿè£…
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ **: æ–‡æ›¸ãƒ¬ãƒ™ãƒ«â†’æ–‡ãƒ¬ãƒ™ãƒ«ã®ä¿®æ­£æƒ…å ±ä¼é”

### **âœ… å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ (v1.4å®Œæˆç‰ˆ)**
- **ğŸ†• äººé–“æ–‡æ³•èªè­˜ã‚·ã‚¹ãƒ†ãƒ **: Stanzaèª¤èªè­˜ã®ä¿®æ­£æ©Ÿèƒ½  
- **ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“é€£æºã‚·ã‚¹ãƒ†ãƒ **: å æœ‰ã‚¹ãƒ­ãƒƒãƒˆæƒ…å ±ã®å‹•çš„å…±æœ‰
- **åˆ†è©æ§‹æ–‡ä¿è­·æ©Ÿèƒ½**: participle_detected ãƒ•ãƒ©ã‚°åˆ¶å¾¡
- **è¶…ã‚·ãƒ³ãƒ—ãƒ«ãƒ«ãƒ¼ãƒ«**: 1å€‹â†’M2, 2å€‹â†’M2,M3, 3å€‹â†’M1,M2,M3
- **Rephraseãƒ«ãƒ¼ãƒ«**: å…¨å˜èªã‚¹ãƒ­ãƒƒãƒˆé…ç½®ã€ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆæ™‚ã®ä¸Šä½ç©ºåŒ–
- **åŠ©å‹•è©ç³»**: will, can, must, shouldç­‰ã®è©³ç´°åˆ†é¡
- **é–¢ä¿‚ç¯€å‡¦ç†**: whose, which, thatç­‰ã®é«˜ç²¾åº¦å‡¦ç†
- **æ™‚åˆ¶ç³»**: å®Œäº†å½¢ã€é€²è¡Œå½¢ã€å—å‹•æ…‹ã®å®Œå…¨å¯¾å¿œ
- **æº–å‹•è©ç³»**: ä¸å®šè©ã€å‹•åè©ã€åˆ†è©ã®å‡¦ç†
- **é–¢ä¿‚è©ç¯€**: whose, which, thatç­‰ã®é«˜ç²¾åº¦å‡¦ç†

---

## ğŸ§ª **ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ  (v1.2æ›´æ–°)**

### **ğŸ”’ æ¨™æº–æ¤œè¨¼æ–¹æ³• (å¿…é ˆæº–æ‹ )**
**âš ï¸ é‡è¦**: éƒ½åº¦ä½œæˆã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ç¦æ­¢ã€‚ä»¥ä¸‹ã®æ¨™æº–æ–¹æ³•ã®ã¿ä½¿ç”¨ã™ã‚‹ã“ã¨ã€‚

#### **Step 1: CLIãƒãƒƒãƒå‡¦ç†**
```bash
# æ¨™æº–ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆå‡¦ç† (53ä¾‹æ–‡)
python unified_stanza_rephrase_mapper.py --input final_test_system/final_54_test_data.json

# çµæœãƒ•ã‚¡ã‚¤ãƒ«: batch_results_YYYYMMDD_HHMMSS.json ãŒç”Ÿæˆã•ã‚Œã‚‹
```

#### **Step 2: ç²¾åº¦åˆ†æ**
```bash
# ç”Ÿæˆã•ã‚ŒãŸçµæœãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†æ
python compare_results.py --results batch_results_YYYYMMDD_HHMMSS.json

# å‡ºåŠ›: å®Œå…¨ä¸€è‡´ç‡ã€éƒ¨åˆ†ä¸€è‡´ç‡ã€ã‚¹ãƒ­ãƒƒãƒˆåˆ¥ç²¾åº¦è©³ç´°
```

#### **Step 3: çµæœæ¤œè¨¼**
- **å®Œå…¨ä¸€è‡´ç‡**: æœŸå¾…å€¤ã¨ã®100%ä¸€è‡´ã‚±ãƒ¼ã‚¹æ•°
- **éƒ¨åˆ†ä¸€è‡´ç‡**: ä¸€éƒ¨ã‚¹ãƒ­ãƒƒãƒˆãŒä¸€è‡´ã™ã‚‹ã‚±ãƒ¼ã‚¹æ•°  
- **ã‚¹ãƒ­ãƒƒãƒˆåˆ¥ç²¾åº¦**: å„ã‚¹ãƒ­ãƒƒãƒˆ(S,V,C1,O1,Aux,M1,M2,M3)ã®ç²¾åº¦

### **ğŸš« ç¦æ­¢äº‹é …**
- âŒ éƒ½åº¦ä½œæˆã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨
- âŒ å€‹åˆ¥ä¾‹æ–‡ã§ã®å˜ç™ºãƒ†ã‚¹ãƒˆ
- âŒ ä¸å®Œå…¨ãªæ¤œè¨¼æ–¹æ³•ã«ã‚ˆã‚‹ç²¾åº¦å ±å‘Š
- âŒ compare_results.pyä»¥å¤–ã®ç²¾åº¦è¨ˆç®—ãƒ„ãƒ¼ãƒ«

### **ğŸ“Š ç¾åœ¨ã®å®Ÿè¨¼æ¸ˆã¿ç²¾åº¦ (2025å¹´8æœˆ21æ—¥) - v1.3æœ€çµ‚æ›´æ–°**
- **å®Œå…¨ä¸€è‡´ç‡**: **98.1%** (52/53ä¾‹æ–‡) [v1.2: 67.9% â†’ +30.2pt å¤§å¹…å‘ä¸Š]
- **éƒ¨åˆ†ä¸€è‡´ç‡**: 1.9% (1/53ä¾‹æ–‡) 
- **å‡¦ç†æˆåŠŸç‡**: 100% (53/53ä¾‹æ–‡)
- **ğŸ¯ ä¸»è¦ã‚¹ãƒ­ãƒƒãƒˆ**: **å®Œå…¨100%ç²¾åº¦é”æˆ** (S,V,Aux,O1,M1,M2,M3)
- **æ®‹èª²é¡Œ**: C1ã‚¹ãƒ­ãƒƒãƒˆ 1ã‚±ãƒ¼ã‚¹ (95.0% â†’ 100%ãŒæœ€çµ‚ç›®æ¨™)
- **æ¤œè¨¼æ–¹æ³•**: CLI + compare_results.py (æ¨™æº–æº–æ‹ )

### **v1.3 ç²¾åº¦å‘ä¸Šå®Ÿç¸¾ - æ­´ä»£æœ€é«˜é”æˆ**
- **è§£æ±ºæ¸ˆã¿ã‚¨ãƒ©ãƒ¼**: å…¨åˆ†è©æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“é€£æºå•é¡Œã€å æœ‰ã‚¹ãƒ­ãƒƒãƒˆç«¶åˆ
- **ã‚·ã‚¹ãƒ†ãƒ å®‰å®šæ€§**: 7ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Œå…¨é€£æºã€å æœ‰æƒ…å ±å…±æœ‰æ©Ÿèƒ½å®Ÿè£…
- **ãƒãƒ³ãƒ‰ãƒ©ãƒ¼åˆ¥ç²¾åº¦**: 
  - S,V,Aux,O1,M1,M2,M3: **100.0%** âœ… PERFECT
  - C1: 95.0% (æ®‹ã‚Š1ã‚±ãƒ¼ã‚¹ã®ã¿)
  - M2: 96.7%, M3: 100.0%ï¼ˆå¤§å¹…æ”¹å–„ï¼‰

### **ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆç’°å¢ƒ**
- **é«˜ç²¾åº¦ãƒ†ã‚¹ãƒˆ**: ã‚«ã‚¹ã‚¿ãƒ 5ä¾‹æ–‡ã§100%ç²¾åº¦é”æˆ
- **æ§‹æˆ**: å®Ÿè£…æ¸ˆã¿5ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Œå…¨å¯¾å¿œç‰ˆ
- **ç¶™ç¶šç›£è¦–**: ãƒãƒƒãƒå‡¦ç†ã«ã‚ˆã‚‹å®šé‡çš„ç²¾åº¦æ¸¬å®š

---

## ğŸ”§ **æŠ€è¡“ä»•æ§˜**

### **ä¾å­˜é–¢ä¿‚**
```python
# å¿…é ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª
import stanza              # æ ¸å¿ƒNLPè§£æ
import spacy              # ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è£œæ­£ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
import logging            # ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
```

### **åˆæœŸåŒ–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**
```python
UnifiedStanzaRephraseMapper(
    language='en',           # å‡¦ç†è¨€èª
    enable_gpu=False,        # GPUä½¿ç”¨ãƒ•ãƒ©ã‚°
    log_level='INFO',        # ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
    use_spacy_hybrid=True    # spaCyãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ä½¿ç”¨
)
```

### **ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç®¡ç†API**
```python
# ãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¿½åŠ 
mapper.add_handler('basic_five_pattern')
mapper.add_handler('relative_clause')
mapper.add_handler('passive_voice') 
mapper.add_handler('adverbial_modifier')

# ãƒãƒ³ãƒ‰ãƒ©ãƒ¼çŠ¶æ…‹ç¢ºèª
active_handlers = mapper.list_active_handlers()
stats = mapper.get_stats()
```

---

## ğŸš€ **é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆ95%ç²¾åº¦é”æˆæˆ¦ç•¥ï¼‰**

### **ğŸ§  åŸºæœ¬æˆ¦ç•¥: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è§£æã‚·ã‚¹ãƒ†ãƒ **

#### **ãƒ¬ã‚¤ãƒ¤ãƒ¼1: Stanza/spaCyåŸºç›¤è§£æ**
- **å½¹å‰²**: åŸºæœ¬çš„ãªä¾å­˜é–¢ä¿‚åˆ†æã€å“è©ã‚¿ã‚°ä»˜ã‘ã€æ§‹æ–‡è§£æ
- **å¾—æ„é ˜åŸŸ**: æ˜ç¢ºãªæ–‡æ³•æ§‹é€ ã€ä¸€èˆ¬çš„ãªæ–‡å‹ãƒ‘ã‚¿ãƒ¼ãƒ³
- **åˆ¶ç´„**: æ›–æ˜§æ€§è§£æ±ºã€æ–‡è„ˆä¾å­˜æ§‹é€ ã«é™ç•Œ

#### **ãƒ¬ã‚¤ãƒ¤ãƒ¼2: äººé–“æ–‡æ³•ãƒ­ã‚¸ãƒƒã‚¯**
- **å½¹å‰²**: NLPè§£æã®æ›–æ˜§æ€§ã‚’æ–‡è„ˆãƒ»ä½ç½®ãƒ»å¾Œç¶šèªã§è§£æ±º
- **æ ¸å¿ƒæŠ€è¡“**: ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚° + æ–‡æ³•çš„æ¨è«–
- **Rephraseã®åˆ©ç‚¹**: 3é‡å…¥ã‚Œå­ãªã—ã§è¤‡é›‘åº¦å¤§å¹…è»½æ¸›

### **ğŸ¯ æ®µéšåˆ¥ç²¾åº¦ç›®æ¨™**

#### **Phase 2-5: åŸºæœ¬æ–‡æ³•å®Œå…¨å¯¾å¿œ (45.3% â†’ 75%)**
```
ç¾åœ¨ã®å¼±ç‚¹ã‚’é›†ä¸­æ”»ç•¥:
â€¢ M1/M2å‰¯è©é…ç½®ç²¾åº¦å‘ä¸Š: 62.5% â†’ 85%
â€¢ æ¥ç¶šè©ãƒ»å‰ç½®è©å¥ã®é©åˆ‡ãªåˆ†é¡
â€¢ è¤‡åˆæ™‚åˆ¶ã®æ­£ç¢ºãªèªè­˜
â€¢ ä¸å®šè©ãƒ»å‹•åè©ã®æ–‡è„ˆåˆ¤æ–­
```

#### **Phase 6-10: æ›–æ˜§æ€§è§£æ±ºã‚·ã‚¹ãƒ†ãƒ  (75% â†’ 90%)**
```
äººé–“æ–‡æ³•ãƒ­ã‚¸ãƒƒã‚¯æœ¬æ ¼å°å…¥:
â€¢ Flying planeså•é¡Œ: å¾Œç¶šèªåˆ†æã§è§£æ±º
â€¢ å‹•åè©vsç¾åœ¨åˆ†è©: æ–‡ä¸­ä½ç½®ã§åˆ¤æ–­
â€¢ é–¢ä¿‚ç¯€çœç•¥: æ–‡è„ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã§è£œå®Œ
â€¢ æ¯”è¼ƒç´šãƒ»æœ€ä¸Šç´š: æ§‹é€ çš„ç‰¹å¾´æŠ½å‡º
```

#### **Phase 11-15: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ç‰¹åŒ– (90% â†’ 95%)**
```
æ®‹ã‚Š5%ã®é›£è§£ã‚±ãƒ¼ã‚¹:
â€¢ æ…£ç”¨è¡¨ç¾ãƒ»å›ºå®šå¥ã®è¾æ›¸ãƒ™ãƒ¼ã‚¹å‡¦ç†
â€¢ å£èªãƒ»çœç•¥å½¢ã®æ­£è¦åŒ–
â€¢ å€’ç½®ãƒ»å¼·èª¿æ§‹æ–‡ã®å¤‰æ›
â€¢ ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯
```

### **ğŸ”§ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–‡æ³•è§£ææˆ¦ç•¥**

#### **NLP + äººé–“æ–‡æ³•ãƒ­ã‚¸ãƒƒã‚¯çµ±åˆã‚·ã‚¹ãƒ†ãƒ **
```python
class HybridGrammarEngine:
    """NLPã‚¨ãƒ³ã‚¸ãƒ³ã¨äººé–“æ–‡æ³•ãƒ­ã‚¸ãƒƒã‚¯ã‚’çµ±åˆã—ãŸè§£æã‚·ã‚¹ãƒ†ãƒ """
    
    def __init__(self):
        self.nlp_engines = {
            'stanza': StanzaPipeline(),
            'spacy': SpacyPipeline()
        }
        self.grammar_logic = StructuralGrammarAnalyzer()
        self.confidence_evaluator = ConfidenceBasedSelector()
    
    def analyze_with_verification(self, sentence):
        """NLPçµæœã‚’æ–‡æ³•ãƒ­ã‚¸ãƒƒã‚¯ã§æ¤œè¨¼ãƒ»ä¿®æ­£"""
        
        # Step 1: NLPåŸºæœ¬è§£æ
        nlp_result = self.nlp_engines['stanza'].analyze(sentence)
        
        # Step 2: æ§‹é€ çš„æ¤œè¨¼
        verification_result = self.grammar_logic.verify_structure(nlp_result)
        
        # Step 3: ä¿¡é ¼åº¦è©•ä¾¡ã«ã‚ˆã‚‹æœ€çµ‚åˆ¤å®š
        if verification_result.confidence > 0.8:
            return verification_result.corrected_result
        else:
            return self.hybrid_resolution(nlp_result, verification_result)
    
    def identify_problematic_patterns(self, sentence):
        """NLPãŒè‹¦æ‰‹ã¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’äº‹å‰æ¤œå‡º"""
        patterns = [
            self._detect_relative_clause_complexity(sentence),
            self._detect_compound_subject_ambiguity(sentence),
            self._detect_modifier_attachment_issues(sentence)
        ]
        return [p for p in patterns if p.requires_correction]
```

#### **Stanza/spaCyèª¤åˆ¤å®šå¯¾å‡¦ã®è¨­è¨ˆæ–¹é‡**

**âš ï¸ é‡è¦**: ä»¥ä¸‹ã¯å…·ä½“çš„ãªå®Ÿè£…ã‚³ãƒ¼ãƒ‰ã§ã¯ãªãã€Stanza/spaCyã®èª¤åˆ¤å®šã«å¯¾å‡¦ã™ã‚‹éš›ã®**è¨­è¨ˆæ€æƒ³ã¨æ–¹æ³•è«–**ã‚’ç¤ºã—ãŸã‚‚ã®ã§ã™ã€‚

##### **åŸºæœ¬çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**
1. **ä¾å­˜é–¢ä¿‚ã«é ¼ã‚‰ãªã„æ±ç”¨ãƒ«ãƒ¼ãƒ«**: Stanza/spaCyã®ä¾å­˜è§£æçµæœãŒé–“é•ã£ã¦ã„ã‚‹å ´åˆã€æ–‡æ³•çš„ä½ç½®é–¢ä¿‚ã«åŸºã¥ãæ±ç”¨ãƒ«ãƒ¼ãƒ«ã§è£œæ­£
2. **äººé–“ã®æ–‡æ³•èªè­˜ãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿè£…**: äººé–“ãŒæ–‡æ³•ãƒ‘ã‚¿ãƒ¼ãƒ³ã§è‹±èªã‚’ç†è§£ã™ã‚‹èªçŸ¥ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚³ãƒ¼ãƒ‰åŒ–ã€‚çµ±è¨ˆçš„åˆ¤å®šã§ã¯ãªãã€æ–‡æ³•çš„ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜ã«ã‚ˆã‚‹åˆ¤å®š
3. **æ±ç”¨çš„æ–‡æ³•ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º**: æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹å®‰æ˜“ãªãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã¯ãªãã€æ§‹é€ çš„ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜ã«ã‚ˆã‚‹æ±ç”¨çš„å®Ÿè£…

##### **äººé–“æ–‡æ³•èªè­˜ã®å…·ä½“ä¾‹**
- **å—å‹•æ…‹åˆ¤å®š**: "be + éå»åˆ†è©" ãƒ‘ã‚¿ãƒ¼ãƒ³ â†’ äººé–“ã¯ç„¡æ„è­˜ã«å—å‹•æ…‹ã¨èªè­˜ â†’ `unexpected`ã¯å‹•è©
- **åˆ†è©æ§‹æ–‡åˆ¤å®š**: "Working overtime, the team completed..." â†’ äººé–“ã¯å¾Œç¶šã®æœ¬å‹•è©`completed`ã‚’è¦‹ã¦`Working`ã‚’å‰¯è©çš„åˆ†è©æ§‹æ–‡ã¨èªè­˜
- **å‹•åè©åˆ¤å®š**: "Swimming is fun" â†’ äººé–“ã¯æ–‡æ§‹é€ ã‹ã‚‰`Swimming`ã‚’ä¸»èªã®å‹•åè©ã¨èªè­˜

##### **å…·ä½“çš„ãªå¯¾å‡¦ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹**

**ãƒ‘ã‚¿ãƒ¼ãƒ³1: å‰¯è©ã®ä¿®é£¾å…ˆèª¤åˆ¤å®š**
- **å•é¡Œ**: "badly damaged" â†’ StanzaãŒ"badly"ã‚’ä¸»æ–‡å‹•è©ã®ä¿®é£¾ã¨èª¤åˆ¤å®š
- **å¯¾å‡¦æ³•**: é–¢ä¿‚è©ç¯€å¢ƒç•Œã‚’æ–‡å­—åˆ—ãƒ‘ã‚¿ãƒ¼ãƒ³ã§åˆ¤å®šã—ã€ä½ç½®ãƒ™ãƒ¼ã‚¹ã§æ­£ã—ã„ã‚¹ãƒ­ãƒƒãƒˆã«é…ç½®
- **å®Ÿè£…æ–¹é‡**: ä¾å­˜é–¢ä¿‚ã§ã¯ãªãã€æ–‡ä¸­ã®ç›¸å¯¾ä½ç½®ã¨æ–‡æ³•ãƒ‘ã‚¿ãƒ¼ãƒ³ã§åˆ¤å®š

**ãƒ‘ã‚¿ãƒ¼ãƒ³2: å—å‹•æ…‹ã§ã®è£œèªèª¤æ¤œå‡º**
- **å•é¡Œ**: "was unexpected" â†’ ã‚·ã‚¹ãƒ†ãƒ ãŒV:"unexpected" + C1:"unexpected"ã¨é‡è¤‡å‡ºåŠ›
- **å¯¾å‡¦æ³•**: å—å‹•æ…‹ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºæ™‚ã¯è£œèªã‚¹ãƒ­ãƒƒãƒˆã‚’ç”Ÿæˆã—ãªã„ãƒ«ãƒ¼ãƒ«
- **å®Ÿè£…æ–¹é‡**: beå‹•è© + éå»åˆ†è©ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ˜ç¤ºçš„åˆ¤å®š

**ãƒ‘ã‚¿ãƒ¼ãƒ³3: åˆ†è©æ§‹æ–‡ã®ã‚¹ãƒ­ãƒƒãƒˆèª¤é…ç½®**
- **å•é¡Œ**: "documents being reviewed" â†’ ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆæ§‹é€ ã®èª¤è§£æ
- **å¯¾å‡¦æ³•**: åˆ†è©ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ–‡æ³•çš„è§£æã«ã‚ˆã‚‹æ­£ã—ã„ã‚¹ãƒ­ãƒƒãƒˆæ§‹é€ ç”Ÿæˆ
- **å®Ÿè£…æ–¹é‡**: åˆ†è©ã®ç¨®é¡ï¼ˆç¾åœ¨åˆ†è©/éå»åˆ†è©ï¼‰ã«ã‚ˆã‚‹æ§‹é€ æ±ºå®šãƒ«ãƒ¼ãƒ«

##### **å®Ÿè£…æ™‚ã®æŒ‡é‡**
```python
# âŒ é¿ã‘ã‚‹ã¹ãè¤‡é›‘ãªå®Ÿè£…ä¾‹
def complex_structural_analysis():
    # è¤‡é›‘ãªè·é›¢è¨ˆç®—ã€ä¿¡é ¼åº¦ãƒ™ãƒ¼ã‚¹åˆ¤å®šã€æ©Ÿæ¢°å­¦ç¿’çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
    pass

# âœ… æ¨å¥¨ã™ã‚‹æ˜ç¢ºãªå®Ÿè£…ä¾‹  
def simple_grammar_rule():
    # æ˜ç¢ºãªæ–‡æ³•ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°
    # ç†è§£ã—ã‚„ã™ã„if-elseæ–‡ã§ã®åˆ¤å®š
    # äººé–“ãŒèª­ã‚“ã§ç†è§£ã§ãã‚‹ãƒ­ã‚¸ãƒƒã‚¯
    pass
```

ã“ã®æ–¹é‡ã«åŸºã¥ãã€æ®‹ã‚Š3ã‚±ãƒ¼ã‚¹ã®å•é¡Œã‚’å€‹åˆ¥ã«è§£æ±ºã—ã¦ã„ãã€‚

#### **å‹•çš„ãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ **
```python
class AdaptivePatternLearner:
    """å¤±æ•—ã‚±ãƒ¼ã‚¹ã‹ã‚‰å­¦ç¿’ã™ã‚‹è‡ªå·±æ”¹å–„ã‚·ã‚¹ãƒ†ãƒ """
    
    def __init__(self):
        self.error_patterns = ErrorPatternDatabase()
        self.correction_strategies = CorrectionStrategyLibrary()
    
    def learn_from_test_failures(self, test_results):
        """ãƒ†ã‚¹ãƒˆçµæœã‹ã‚‰æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’"""
        
        for failure in test_results.failures:
            # ãƒ‘ã‚¿ãƒ¼ãƒ³æŠ½å‡º
            error_pattern = self._extract_error_pattern(
                failure.sentence, 
                failure.system_output, 
                failure.expected_output
            )
            
            # ä¿®æ­£æˆ¦ç•¥ã®å°å‡º
            correction_strategy = self._derive_correction_strategy(error_pattern)
            
            # ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«è¿½åŠ 
            self.correction_strategies.add_strategy(
                pattern=error_pattern,
                strategy=correction_strategy,
                confidence=self._calculate_pattern_confidence(error_pattern)
            )
    
    def apply_learned_corrections(self, sentence, nlp_result):
        """å­¦ç¿’ã—ãŸä¿®æ­£æˆ¦ç•¥ã‚’é©ç”¨"""
        
        applicable_strategies = self.correction_strategies.find_applicable(sentence)
        
        for strategy in applicable_strategies:
            if strategy.confidence > 0.75:
                nlp_result = strategy.apply_correction(nlp_result)
        
        return nlp_result
```
##### **åˆ¤å®šå„ªå…ˆé †ä½ã®è¨­è¨ˆæ–¹é‡**

Stanza/spaCyã¨ç‹¬è‡ªæ–‡æ³•ãƒ«ãƒ¼ãƒ«ãŒç«¶åˆã™ã‚‹å ´åˆã®åˆ¤å®šé †åºï¼š

1. **æ˜ç¢ºãªæ–‡æ³•ãƒ‘ã‚¿ãƒ¼ãƒ³å„ªå…ˆ**: å—å‹•æ…‹ã€é–¢ä¿‚è©ç¯€ãªã©æ˜ç¢ºãªãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ç‹¬è‡ªãƒ«ãƒ¼ãƒ«é©ç”¨
2. **è¶…ã‚·ãƒ³ãƒ—ãƒ«ãƒ«ãƒ¼ãƒ«é©ç”¨**: ä¿®é£¾èªé…ç½®ã¯å€‹æ•°ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ«å„ªå…ˆ
3. **Rephraseãƒ«ãƒ¼ãƒ«éµå®ˆ**: å…¨å˜èªã‚¹ãƒ­ãƒƒãƒˆé…ç½®ã€ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆæ™‚ä¸Šä½ç©ºåŒ–ãƒ«ãƒ¼ãƒ«
4. **NLPçµæœè£œå®Œ**: ä¸Šè¨˜ã§è§£æ±ºã§ããªã„éƒ¨åˆ†ã®ã¿Stanza/spaCyçµæœä½¿ç”¨

##### **ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³å¯¾å‡¦æ–¹é‡**

**ã‚ˆãã‚ã‚‹èª¤åˆ¤å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¯¾å‡¦æŒ‡é‡**:

- `relative_clause_modifier_leak`: é–¢ä¿‚è©ç¯€å†…ã®ä¿®é£¾èªãŒä¸»æ–‡ã«æµå‡º â†’ ç¯€å¢ƒç•Œåˆ¤å®šãƒ«ãƒ¼ãƒ«
- `passive_voice_complement_duplication`: å—å‹•æ…‹ã§ã®è£œèªé‡è¤‡ â†’ å—å‹•æ…‹ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
- `participle_structure_misparse`: åˆ†è©æ§‹æ–‡ã®èª¤è§£æ â†’ åˆ†è©ãƒ‘ã‚¿ãƒ¼ãƒ³ç‰¹å®šãƒ«ãƒ¼ãƒ«
- `modal_auxiliary_confusion`: åŠ©å‹•è©ã®èª¤åˆ†é¡ â†’ åŠ©å‹•è©ãƒªã‚¹ãƒˆç…§åˆ

ã“ã‚Œã‚‰ã®å¯¾å‡¦ã¯ã€è¤‡é›‘ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã¯ãªãã€Œäººé–“ãŒèª­ã‚“ã§ç†è§£ã§ãã‚‹æ˜ç¢ºãªif-elseæ–‡ã€ã§å®Ÿè£…ã™ã‚‹ã€‚
        "correction_strategy": "structural_main_verb_identification",
        "examples": [
            "The man whose car is red lives here.",
            "The book which was written yesterday arrived."
        ],
        "success_rate": 0.92
    },
    
    "compound_subject_verb_attachment": {
        "description": "è¤‡åˆä¸»èªã§ã®å‹•è©ä»˜ã‘å…ˆæ›–æ˜§æ€§",
        "detection_logic": lambda s: detect_compound_subject_pattern(s),
        "correction_strategy": "subject_boundary_analysis", 
        "examples": [
            "Flying planes can be dangerous.",
            "The students working hard succeed."
        ],
        "success_rate": 0.87
    },
    
    "modifier_scope_ambiguity": {
        "description": "ä¿®é£¾èªã®ã‚¹ã‚³ãƒ¼ãƒ—æ›–æ˜§æ€§",
        "detection_logic": lambda s: detect_modifier_ambiguity(s),
        "correction_strategy": "distance_based_attachment",
        "examples": [
            "I saw the man with binoculars.",
            "She works carefully at home daily."
        ],
        "success_rate": 0.84
    }
}
```

---

### **ğŸ¯ 100%å®Œæˆã¸ã®æœ€çµ‚æ®µéš**

#### **ç¾åœ¨ã®çŠ¶æ³ (2025å¹´8æœˆ19æ—¥)**
- **é”æˆæ¸ˆã¿ç²¾åº¦**: 94.3% (50/53)
- **æ®‹ã‚Šèª²é¡Œ**: 3ã‚±ãƒ¼ã‚¹ã®ã‚·ã‚¹ãƒ†ãƒ ä¿®æ­£ã®ã¿
- **å®Ÿè£…å®Œäº†åº¦**: 95%ä»¥ä¸Š

#### **æœ€çµ‚ä¿®æ­£å¯¾è±¡**
1. **Test 40**: é–¢ä¿‚è©ç¯€å†…å‰¯è©ã®ä¸»æ–‡æµå‡º â†’ ç¯€å¢ƒç•Œåˆ¤å®šãƒ«ãƒ¼ãƒ«è¿½åŠ 
2. **Test 42**: å—å‹•æ…‹ã§ã®è£œèªé‡è¤‡å‡ºåŠ› â†’ å—å‹•æ…‹ãƒ‘ã‚¿ãƒ¼ãƒ³ä¿®æ­£
3. **Test 52**: åˆ†è©æ§‹æ–‡ã‚¹ãƒ­ãƒƒãƒˆèª¤é…ç½® â†’ åˆ†è©æ§‹æ–‡ãƒ«ãƒ¼ãƒ«èª¿æ•´

#### **100%é”æˆå¾Œã®é‹ç”¨è¨ˆç”»**
- **å“è³ªä¿è¨¼**: 53ä¾‹æ–‡æ¨™æº–ãƒ†ã‚¹ãƒˆã§ã®ç¶™ç¶šçš„ç²¾åº¦ç¢ºèª
- **æ–°è¦ãƒ‘ã‚¿ãƒ¼ãƒ³**: è¿½åŠ ä¾‹æ–‡ã§ã®ç²¾åº¦ç¶­æŒç¢ºèª
- **å•†ç”¨å±•é–‹**: æœ¬ç•ªç’°å¢ƒã§ã®æ€§èƒ½ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

---

### **ğŸ”„ ç¾åœ¨ã®é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«**

```
ç°¡æ½”ãªæ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹:
1. ç‰¹å®šå•é¡Œã®åˆ†æ â†’ åŸå› ç‰¹å®š
2. æœ€å°é™ã®ä¿®æ­£å®Ÿè£… â†’ è¶…ã‚·ãƒ³ãƒ—ãƒ«ãƒ«ãƒ¼ãƒ«æº–æ‹ 
3. æ¨™æº–ãƒ†ã‚¹ãƒˆã§ã®æ¤œè¨¼ â†’ ç²¾åº¦ç¢ºèª
4. å‰¯ä½œç”¨ã®ç¢ºèª â†’ ä»–ã‚±ãƒ¼ã‚¹ã¸ã®å½±éŸ¿ãƒã‚§ãƒƒã‚¯
5. æ¬¡ã®å•é¡Œã¸ç§»è¡Œ
```

### **ğŸ“Š è¶…ã‚·ãƒ³ãƒ—ãƒ«ãƒ«ãƒ¼ãƒ«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®æˆæœ**

- **æ˜ç¢ºæ€§**: è¤‡é›‘ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ä¸è¦ã€ç†è§£ã—ã‚„ã™ã„ãƒ«ãƒ¼ãƒ«
- **ç²¾åº¦**: 67.9% â†’ 94.3%ã®å¤§å¹…æ”¹å–„
- **ä¿å®ˆæ€§**: äººé–“ãŒèª­ã‚“ã§ç†è§£ã§ãã‚‹ã‚³ãƒ¼ãƒ‰
- **æ‹¡å¼µæ€§**: æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã¸ã®å¯¾å¿œãŒå®¹æ˜“
- **å®Ÿç”¨æ€§**: æ®µéšçš„æ”¹å–„ã§ç¢ºå®Ÿãªç²¾åº¦å‘ä¸Šã‚’å®Ÿç¾
  - ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹åˆ†æãƒ»å¯¾ç­–

#### **Phase 11-15: å®Œæˆåº¦å‘ä¸Š**
- **æœŸé–“**: 6-8é€±é–“
- **ç›®æ¨™ç²¾åº¦**: 90% â†’ 95%
- **å®Ÿè£…å†…å®¹**:
  - æ®‹å­˜ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ç‰¹åŒ–å¯¾ç­–
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
  - åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
  - å•†ç”¨ãƒ¬ãƒ™ãƒ«å“è³ªä¿è¨¼

### **ğŸ”„ ç¶™ç¶šæ”¹å–„ã‚µã‚¤ã‚¯ãƒ«**

```
å„ãƒ•ã‚§ãƒ¼ã‚ºã§å®Ÿè¡Œ:
1. æ–°ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
2. ãƒãƒƒãƒãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹ç²¾åº¦æ¸¬å®š
3. å¤±æ•—ã‚±ãƒ¼ã‚¹åˆ†æãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³æŠ½å‡º  
4. æ–‡è„ˆåˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯å¼·åŒ–
5. å›å¸°ãƒ†ã‚¹ãƒˆãƒ»å“è³ªç¢ºèª
6. æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»èª¿æ•´
```

### **ğŸ“Š æˆåŠŸè¦å› **

- **åŸºç›¤ã®å …ç‰¢æ€§**: ç¾åœ¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒå„ªç§€
- **æ¸¬å®šå¯èƒ½æ€§**: CLIãƒãƒƒãƒå‡¦ç†ã«ã‚ˆã‚‹å®šé‡çš„è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
- **Rephraseã®åˆ¶ç´„**: 3é‡å…¥ã‚Œå­ãªã—ã§è¤‡é›‘åº¦ç®¡ç†å¯èƒ½
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ‰‹æ³•**: NLP + äººé–“æ–‡æ³•ãƒ­ã‚¸ãƒƒã‚¯ã®ç›¸ä¹—åŠ¹æœ

---

## ğŸš€ **æ‹¡å¼µè¨ˆç”»**

### **Phase 5: åŠ©å‹•è©ãƒãƒ³ãƒ‰ãƒ©ãƒ¼**
- **å„ªå…ˆåº¦**: é«˜
- **å¯¾è±¡**: will, can, must, should, may, mightç­‰
- **æœŸå¾…åŠ¹æœ**: æœªæ¥å½¢ã€å¯èƒ½æ€§è¡¨ç¾ã®å®Œå…¨å¯¾å¿œ

### **Phase 6: æ™‚åˆ¶ãƒãƒ³ãƒ‰ãƒ©ãƒ¼**
- **å„ªå…ˆåº¦**: é«˜
- **å¯¾è±¡**: have/has/had + éå»åˆ†è©ã€be + ~ing
- **æœŸå¾…åŠ¹æœ**: å®Œäº†å½¢ã€é€²è¡Œå½¢ã®å®Œå…¨å¯¾å¿œ

### **Phase 7: æº–å‹•è©ãƒãƒ³ãƒ‰ãƒ©ãƒ¼**
- **å„ªå…ˆåº¦**: ä¸­
- **å¯¾è±¡**: toä¸å®šè©ã€å‹•åè©ã€åˆ†è©æ§‹æ–‡
- **æœŸå¾…åŠ¹æœ**: è¤‡é›‘ãªæº–å‹•è©æ§‹é€ ã¸ã®å¯¾å¿œ

---

## ğŸ›¡ï¸ **é‹ç”¨ãƒ»ä¿å®ˆ**

### **å“è³ªä¿è¨¼**
- **ãƒ†ã‚¹ãƒˆé§†å‹•**: æ­£è§£æƒ³å®šãƒã‚§ãƒƒã‚¯ã«ã‚ˆã‚‹ç¶™ç¶šçš„å“è³ªç¢ºèª
- **æ®µéšçš„æ‹¡å¼µ**: 1ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãšã¤ã®æ…é‡ãªæ©Ÿèƒ½è¿½åŠ 
- **å¾Œæ–¹äº’æ›**: æ—¢å­˜ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¸ã®å½±éŸ¿æœ€å°åŒ–

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
- **ä¸¦è¡Œå‡¦ç†**: å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼åŒæ™‚å®Ÿè¡Œã«ã‚ˆã‚‹é«˜é€ŸåŒ–
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: Stanzaè§£æçµæœã®å†åˆ©ç”¨
- **æœ€é©åŒ–**: spaCyãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã®é¸æŠçš„ä½¿ç”¨

### **ãƒ‡ãƒãƒƒã‚°ãƒ»ç›£è¦–**
- **è©³ç´°ãƒ­ã‚°**: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å€‹åˆ¥ã®æˆåŠŸãƒ»å¤±æ•—è¿½è·¡
- **çµ±è¨ˆæƒ…å ±**: å‡¦ç†æ™‚é–“ã€æˆåŠŸç‡ã®ç¶™ç¶šçš„ç›£è¦–
- **ã‚¨ãƒ©ãƒ¼å‡¦ç†**: å€‹åˆ¥ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å¤±æ•—æ™‚ã®å…¨ä½“å½±éŸ¿å›é¿

---

## ï¿½ï¸ **CLIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ä½¿ç”¨æ–¹æ³•**

### **åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰æ§‹æ–‡**

```bash
# åŸºæœ¬çš„ãªä¸€æ‹¬å‡¦ç†
python unified_stanza_rephrase_mapper.py --input [å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«] --output [å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«]

# å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«çœç•¥ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
python unified_stanza_rephrase_mapper.py --input [å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«]

# ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆå¾“æ¥ã®Phase 0-2å®Ÿè¡Œï¼‰
python unified_stanza_rephrase_mapper.py --test-mode

# ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
python unified_stanza_rephrase_mapper.py --help
```

### **çµæœåˆ†æã‚³ãƒãƒ³ãƒ‰**

```bash
# åŸºæœ¬çš„ãªç²¾åº¦åˆ†æ
python compare_results.py --results [çµæœãƒ•ã‚¡ã‚¤ãƒ«]

# è©³ç´°åˆ†æï¼ˆå¤±æ•—ã‚±ãƒ¼ã‚¹è¡¨ç¤ºï¼‰
python compare_results.py --results [çµæœãƒ•ã‚¡ã‚¤ãƒ«] --detail

# åˆ†æãƒ¬ãƒãƒ¼ãƒˆä¿å­˜
python compare_results.py --results [çµæœãƒ•ã‚¡ã‚¤ãƒ«] --save-report [ãƒ¬ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«]
```

### **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿å½¢å¼**

#### **è©³ç´°å½¢å¼ï¼ˆæœŸå¾…å€¤ä»˜ãï¼‰**
```json
{
  "meta": {
    "total_count": 5,
    "description": "ã‚«ã‚¹ã‚¿ãƒ ä¾‹æ–‡ãƒ†ã‚¹ãƒˆ"
  },
  "data": {
    "1": {
      "sentence": "She works carefully.",
      "expected": {
        "main_slots": {
          "S": "She",
          "V": "works",
          "M2": "carefully"
        },
        "sub_slots": {}
      }
    },
    "2": {
      "sentence": "The book is interesting.",
      "expected": {
        "main_slots": {
          "S": "The book",
          "V": "is",
          "C1": "interesting"
        },
        "sub_slots": {}
      }
    }
  }
}
```

#### **ã‚·ãƒ³ãƒ—ãƒ«å½¢å¼ï¼ˆæœŸå¾…å€¤ãªã—ï¼‰**
```json
[
  "She works carefully.",
  "The book is interesting.", 
  "I give him a book.",
  "He has finished his homework.",
  "The letter was written by John."
]
```

### **å®Ÿç”¨çš„ãªä½¿ç”¨ä¾‹**

#### **ä¾‹1: æ—¢å­˜ã®53ä¾‹æ–‡ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚’ä½¿ç”¨**
```bash
# 53ä¾‹æ–‡ä¸€æ‹¬å‡¦ç†
cd training/data
python unified_stanza_rephrase_mapper.py --input final_test_system/final_54_test_data.json

# çµæœç¢ºèª
python compare_results.py --results batch_results_[ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—].json
```

#### **ä¾‹2: ã‚«ã‚¹ã‚¿ãƒ ä¾‹æ–‡ãƒ†ã‚¹ãƒˆ**
```bash
# ã‚«ã‚¹ã‚¿ãƒ ä¾‹æ–‡ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆä¸Šè¨˜JSONå½¢å¼ï¼‰
# my_test_sentences.json

# å‡¦ç†å®Ÿè¡Œ
python unified_stanza_rephrase_mapper.py --input my_test_sentences.json --output my_results.json

# çµæœåˆ†æ
python compare_results.py --results my_results.json --detail
```

#### **ä¾‹3: ç°¡å˜ãªæ–‡æ³•ãƒã‚§ãƒƒã‚¯**
```bash
# ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹æ–‡ãƒªã‚¹ãƒˆä½œæˆ
# simple_sentences.json: ["She works carefully.", "The book is red."]

# å‡¦ç†å®Ÿè¡Œ
python unified_stanza_rephrase_mapper.py --input simple_sentences.json

# çµæœç¢ºèªï¼ˆæœŸå¾…å€¤ãªã—ã®ãŸã‚ã€åˆ†æçµæœã®ã¿ï¼‰
python compare_results.py --results batch_results_[ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—].json
```

### **å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ **

#### **ãƒãƒƒãƒå‡¦ç†çµæœãƒ•ã‚¡ã‚¤ãƒ«**
```json
{
  "meta": {
    "input_file": "my_test_sentences.json",
    "processed_at": "2025-08-17T14:50:00.000000",
    "total_sentences": 5,
    "success_count": 5,
    "error_count": 0
  },
  "results": {
    "1": {
      "sentence": "She works carefully.",
      "analysis_result": {
        "sentence": "She works carefully.",
        "slots": {
          "S": "She",
          "V": "works",
          "M2": "carefully"
        },
        "sub_slots": {},
        "grammar_info": {
          "detected_patterns": ["basic_five_pattern"],
          "handler_contributions": {...}
        },
        "meta": {
          "processing_time": 0.129,
          "sentence_id": 1,
          "active_handlers": 5
        }
      },
      "expected": {...},
      "status": "success"
    }
  }
}
```

#### **ç²¾åº¦åˆ†æãƒ¬ãƒãƒ¼ãƒˆ**
```
ğŸ“Š ç²¾åº¦åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
============================================================
ğŸ“ å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«: my_results.json
â° åˆ†ææ™‚åˆ»: 2025-08-17T14:50:10.616823

ğŸ“ˆ å…¨ä½“çµ±è¨ˆ:
   ç·ã‚±ãƒ¼ã‚¹æ•°: 5
   å®Œå…¨ä¸€è‡´: 5
   éƒ¨åˆ†ä¸€è‡´: 0
   å¤±æ•—: 0
   ğŸ¯ å®Œå…¨ä¸€è‡´ç‡: 100.0%

ğŸ” ã‚¹ãƒ­ãƒƒãƒˆåˆ¥ç²¾åº¦:
   S: 100.0% (5/5)
   V: 100.0% (5/5)
   M2: 100.0% (1/1)
   O1: 100.0% (2/2)
   Aux: 100.0% (2/2)
```

### **å®Ÿè¨¼æ¸ˆã¿ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**

| ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆ | å®Œå…¨ä¸€è‡´ç‡ | å‡¦ç†æˆåŠŸç‡ | ä¸»è¦ã‚¹ãƒ­ãƒƒãƒˆç²¾åº¦ |
|------------|------------|------------|----------------|
| ã‚«ã‚¹ã‚¿ãƒ 5ä¾‹æ–‡ | 100.0% | 100.0% | S:100%, V:100%, M2:100% |
| æ¨™æº–53ä¾‹æ–‡ | 45.3% | 100.0% | S:88.7%, V:96.2%, C1:95.2% |

### **é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨é€”**

```bash
# è©³ç´°ãƒ­ã‚°å‡ºåŠ›ã§å®Ÿè¡Œ
python unified_stanza_rephrase_mapper.py --input test.json 2>&1 | tee debug.log

# ç‰¹å®šä¾‹æ–‡ã®ã¿ãƒ†ã‚¹ãƒˆ
echo '["She works carefully."]' > quick_test.json
python unified_stanza_rephrase_mapper.py --input quick_test.json

# å¾“æ¥ã®ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã¨ã®æ¯”è¼ƒ
python unified_stanza_rephrase_mapper.py --test-mode
```

---

---

## ğŸš€ **æ¬¡æœŸé–‹ç™ºè¨ˆç”» (v2.0ç³» çµ±åˆé–‹ç™ºå·¥ç¨‹)**

### **ğŸ“‹ 4å¤§é–‹ç™ºèª²é¡Œã¨å®Ÿè£…å·¥ç¨‹**

**å®Ÿè£…å„ªå…ˆé †ä½**: Aæ¡ˆï¼ˆåŸºç›¤å¼·åŒ–å„ªå…ˆï¼‰æ¡ç”¨
- Phase 2.0: åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ å¼·åŒ– (å„ªå…ˆåº¦: æœ€é«˜)
- Phase 2.1: ä½ç½®ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£… (å„ªå…ˆåº¦: é«˜)  
- Phase 2.2: æ–‡æ³•ã‚«ãƒãƒ¬ãƒƒã‚¸æ‹¡å¼µ (å„ªå…ˆåº¦: ä¸­)

---

### **ğŸ”§ Phase 2.0: åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ å¼·åŒ– (v2.0-v2.1)**

#### **èª²é¡Œâ‘¡: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“æƒ…å ±ä¼é”ã‚·ã‚¹ãƒ†ãƒ å…¨é¢æ‹¡å……**
**ç›®æ¨™æœŸé–“**: 2025å¹´8æœˆ22æ—¥-25æ—¥  
**å®Ÿè£…ç¯„å›²**: å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“ã§ã®å¥ãƒ»ç¯€æƒ…å ±ã®çµ±ä¸€ãƒ—ãƒ­ãƒˆã‚³ãƒ«åŒ–

**æŠ€è¡“ä»•æ§˜**:
```python
# çµ±ä¸€æƒ…å ±äº¤æ›ãƒ—ãƒ­ãƒˆã‚³ãƒ«
class HandlerProtocol:
    def declare_phrase_clause_info(self, context) -> HandlerInfo:
        """å¥ãƒ»ç¯€æƒ…å ±ã®å®£è¨€"""
        return {
            'element_type': 'phrase' | 'clause',
            'target_slots': ['S', 'O1', 'M2'],  # å½±éŸ¿ã™ã‚‹ã‚¹ãƒ­ãƒƒãƒˆ
            'processing_priority': int,
            'dependency_handlers': ['relative_clause']
        }
    
    def consume_shared_info(self, available_info) -> ProcessingDecision:
        """ä»–ãƒãƒ³ãƒ‰ãƒ©ãƒ¼æƒ…å ±ã®å–å¾—ã¨å‡¦ç†åˆ¤æ–­"""
        pass

# å‹•çš„å®Ÿè¡Œé †åºåˆ¶å¾¡
def optimize_handler_execution_order(dependencies, available_handlers):
    """ä¾å­˜é–¢ä¿‚ã«åŸºã¥ãå®Ÿè¡Œé †åºã®å‹•çš„æœ€é©åŒ–"""
    pass
```

**å®Ÿè£…å¯¾è±¡ãƒãƒ³ãƒ‰ãƒ©ãƒ¼**:
- âœ… relative_clause â†’ basic_five_pattern (å®Ÿè£…æ¸ˆã¿)
- ğŸ”„ participle_construction â†’ passive_voice  
- ğŸ”„ noun_clause â†’ basic_five_pattern (æ–°è¦)
- ğŸ”„ auxiliary_complex â†’ basic_five_pattern
- ğŸ”„ adverbial_modifier â†’ å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼

#### **èª²é¡Œâ‘ : ä¸Šä½ã‚µãƒ–é€£çµæ±ç”¨ã‚·ã‚¹ãƒ†ãƒ å…¨é¢é©ç”¨**  
**ç›®æ¨™æœŸé–“**: 2025å¹´8æœˆ26æ—¥-29æ—¥  
**å®Ÿè£…ç¯„å›²**: å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ã®ä½ç½®æƒ…å ±çµ±ä¸€ç®¡ç†

**æŠ€è¡“ä»•æ§˜**:
```python
# æ±ç”¨ä¸Šä½ã‚µãƒ–é€£çµã‚·ã‚¹ãƒ†ãƒ 
class UniversalSlotPositionSystem:
    def __init__(self):
        self.slot_positions = {}  # {sub_slot: main_slot}
        self.position_metadata = {}  # ä½ç½®æ±ºå®šã®æ ¹æ‹ æƒ…å ±
    
    def register_sub_slot_position(self, sub_slot, main_position, rationale):
        """ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆã®ä½ç½®ç™»éŒ²"""
        self.slot_positions[sub_slot] = main_position
        self.position_metadata[sub_slot] = {
            'handler': rationale.handler_name,
            'grammatical_role': rationale.deprel,
            'confidence': rationale.confidence
        }
    
    def apply_position_based_emptying(self, slots, sub_slots):
        """ä½ç½®æƒ…å ±ã«åŸºã¥ãä¸Šä½ã‚¹ãƒ­ãƒƒãƒˆç©ºåŒ–"""
        for sub_slot, main_pos in self.slot_positions.items():
            if sub_slot in sub_slots and main_pos in slots:
                slots[main_pos] = ''
        return slots
```

**å®Ÿè£…å¯¾è±¡ãƒãƒ³ãƒ‰ãƒ©ãƒ¼**:
- âœ… relative_clause (å®Ÿè£…æ¸ˆã¿: sub-sâ†’S, sub-auxâ†’S, sub-vâ†’S)
- ğŸ”„ participle_construction (sub-vâ†’S, sub-m2â†’S)  
- ğŸ†• noun_clause (sub-sâ†’S/O1, sub-vâ†’å†…éƒ¨, sub-o1â†’å†…éƒ¨)
- ğŸ†• adverbial_clause (sub-m2â†’M1/M2/M3)
- ğŸ”„ passive_voice (ä½ç½®æƒ…å ±è€ƒæ…®)
- ğŸ”„ auxiliary_complex (sub-auxä½ç½®æƒ…å ±)

---

### **ğŸ“ Phase 2.1: ä½ç½®ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£… (v2.2-v2.3)**

#### **èª²é¡Œâ‘¢: orderã‚·ã‚¹ãƒ†ãƒ å°å…¥**
**ç›®æ¨™æœŸé–“**: 2025å¹´8æœˆ30æ—¥-9æœˆ2æ—¥  
**å®Ÿè£…ç¯„å›²**: å…¨ã‚¹ãƒ­ãƒƒãƒˆã®èªé †ãƒ‡ãƒ¼ã‚¿ä»˜ä¸

**æŠ€è¡“ä»•æ§˜**:
```python
# èªé †æƒ…å ±ä»˜ãã‚¹ãƒ­ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ 
class OrderedSlotSystem:
    def __init__(self):
        self.slot_orders = {}  # ã‚¹ãƒ­ãƒƒãƒˆå â†’ èªé †ç•ªå·
        self.sub_slot_orders = {}  # ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆå â†’ èªé †ç•ªå·
    
    def analyze_word_order(self, sentence_tokens):
        """æ–‡ä¸­ã®èªé †ã‚’åˆ†æã—ã¦ã‚¹ãƒ­ãƒƒãƒˆã«ç•ªå·ä»˜ä¸"""
        order_mapping = {}
        
        # ä¾‹: "Yesterday I worked quickly"
        # â†’ M1_1:"yesterday", S_2:"I", V_3:"worked", M2_4:"quickly"
        
        for i, token in enumerate(sentence_tokens, 1):
            slot_assignment = self._determine_slot_assignment(token)
            if slot_assignment:
                order_mapping[f"{slot_assignment}_{i}"] = token.text
        
        return order_mapping
    
    def generate_ordered_output(self, slots, sub_slots):
        """èªé †æƒ…å ±ä»˜ãå‡ºåŠ›ã®ç”Ÿæˆ"""
        ordered_slots = {}
        
        # ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ­ãƒƒãƒˆèªé †ä»˜ä¸
        for slot_name, content in slots.items():
            order_num = self._get_word_position(content)
            ordered_slots[f"{slot_name}_{order_num}"] = content
        
        # ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆèªé †ä»˜ä¸  
        for sub_slot, content in sub_slots.items():
            parent_slot = self._get_parent_slot(sub_slot)
            sub_order = self._get_sub_word_position(content, parent_slot)
            ordered_slots[f"{parent_slot}-{sub_slot}_{sub_order}"] = content
        
        return ordered_slots
```

**å®Ÿè£…å†…å®¹**:
1. **ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ­ãƒƒãƒˆèªé †**: M1_1, S_2, Aux_3, V_4, O1_5, M2_6
2. **ã‚µãƒ–ã‚¹ãƒ­ãƒƒãƒˆèªé †**: S-sub-s_1, S-sub-v_2, S-sub-o1_3  
3. **å‡ºåŠ›å½¢å¼åˆ¶å¾¡**: è¨­å®šã«ã‚ˆã‚‹è¡¨ç¤ºON/OFF
4. **UIé€£æº**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®èªé †è¡¨ç¤ºå¯¾å¿œ

---

### **ğŸ†• Phase 2.2: æ–‡æ³•ã‚«ãƒãƒ¬ãƒƒã‚¸æ‹¡å¼µ (v2.4-v2.6)**

#### **èª²é¡Œâ‘£: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®æ–‡æ³•ã‚«ãƒãƒ¬ãƒƒã‚¸æ‹¡å……**
**ç›®æ¨™æœŸé–“**: 2025å¹´9æœˆ3æ—¥-15æ—¥  
**å®Ÿè£…ç¯„å›²**: æ–°ãƒãƒ³ãƒ‰ãƒ©ãƒ¼5ç¨®é¡ã®è¿½åŠ 

**æ–°è¦ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ä¸€è¦§**:

**1. noun_clause (åè©ç¯€) - v2.4**
```python
def _handle_noun_clause(self, sentence, result):
    """åè©ç¯€å‡¦ç†: that, what, whether, ifç¯€"""
    # å¯¾å¿œä¾‹æ–‡: "I know that he is kind."
    # â†’ S:I, V:know, O1:"", sub-s:he, sub-v:is, sub-c1:kind
    pass
```

**2. adverbial_clause (å‰¯è©ç¯€) - v2.4**  
```python
def _handle_adverbial_clause(self, sentence, result):
    """å‰¯è©ç¯€å‡¦ç†: when, where, because, ifç¯€"""
    # å¯¾å¿œä¾‹æ–‡: "I study when I have time."
    # â†’ S:I, V:study, M2:"", sub-s:I, sub-v:have, sub-o1:time
    pass
```

**3. infinitive_construction (ä¸å®šè©æ§‹æ–‡) - v2.5**
```python  
def _handle_infinitive_construction(self, sentence, result):
    """ä¸å®šè©å‡¦ç†: to + å‹•è©åŸå½¢"""
    # å¯¾å¿œä¾‹æ–‡: "I want to study English."
    # â†’ S:I, V:want, O1:"", sub-v:study, sub-o1:English
    pass
```

**4. gerund_construction (å‹•åè©æ§‹æ–‡) - v2.5**
```python
def _handle_gerund_construction(self, sentence, result):  
    """å‹•åè©å‡¦ç†: -ingå½¢ã®åè©çš„ç”¨æ³•"""
    # å¯¾å¿œä¾‹æ–‡: "Swimming is fun."
    # â†’ S:"", V:is, C1:fun, sub-v:Swimming
    pass
```

**5. comparative_construction (æ¯”è¼ƒæ§‹æ–‡) - v2.6**
```python
def _handle_comparative_construction(self, sentence, result):
    """æ¯”è¼ƒç´šãƒ»æœ€ä¸Šç´šå‡¦ç†"""
    # å¯¾å¿œä¾‹æ–‡: "She is taller than me."
    # â†’ S:She, V:is, C1:taller, M2:"than me"
    pass
```

---

### **ğŸ“Š å®Ÿè£…ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**

| Phase | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æœŸé–“ | ä¸»è¦æ©Ÿèƒ½ | å¯¾å¿œä¾‹æ–‡æ•°ç›®æ¨™ |
|-------|-----------|------|----------|--------------|
| 2.0 | v2.0 | 8/22-25 | ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“æƒ…å ±ä¼é”çµ±ä¸€ | 54â†’65 |
| 2.0 | v2.1 | 8/26-29 | ä¸Šä½ã‚µãƒ–é€£çµå…¨é¢é©ç”¨ | 65â†’75 |  
| 2.1 | v2.2 | 8/30-9/2 | orderç³»çµ±å®Ÿè£… | 75â†’75 |
| 2.2 | v2.4 | 9/3-6 | åè©ç¯€ãƒ»å‰¯è©ç¯€è¿½åŠ  | 75â†’95 |
| 2.2 | v2.5 | 9/7-11 | ä¸å®šè©ãƒ»å‹•åè©è¿½åŠ  | 95â†’120 |
| 2.2 | v2.6 | 9/12-15 | æ¯”è¼ƒæ§‹æ–‡è¿½åŠ  | 120â†’150 |

**æœ€çµ‚ç›®æ¨™**: **v2.6ã§150ä¾‹æ–‡å¯¾å¿œã€å®Œå…¨ç²¾åº¦100%ç¶­æŒ**

---

## ğŸ¯ **æ¬¡æœŸé–‹ç™ºè¨ˆç”» (v1.4äºˆå®š)**

### **å‰¯è©ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç²¾å¯†åŒ–**
- **é–¢ä¿‚å‰¯è©é…ç½®ãƒ«ãƒ¼ãƒ«ä¿®æ­£**: sub-m1 â†’ sub-m2 ã®é©åˆ‡ãªé…ç½®
- **å‰¯è©é‡è¤‡å‡¦ç†æ”¹å–„**: M1ã¨M2ã®é‡è¤‡é˜²æ­¢ã‚·ã‚¹ãƒ†ãƒ 
- **ç›®æ¨™ç²¾åº¦**: 77.4% â†’ 85% (æ®‹ã‚‹12ä¾‹æ–‡ã®ã‚¨ãƒ©ãƒ¼è§£æ±º)

### **è¿½åŠ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…**
- **ä¸å®šè©æ§‹æ–‡**: to + å‹•è©åŸå½¢ã®å‡¦ç†
- **å‹•åè©æ§‹æ–‡**: -ingå½¢ã®åè©çš„ç”¨æ³•
- **æ¯”è¼ƒæ§‹æ–‡**: æ¯”è¼ƒç´šãƒ»æœ€ä¸Šç´šã®å‡¦ç†

---

## ğŸš€ **ä»Šå¾Œã®å®Ÿè£…äºˆå®š (Phase 4: ä½ç½®æƒ…å ±è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ )**

### **ğŸ“ ä¸Šä½ã‚µãƒ–é€£çµä½ç½®æƒ…å ±è¡¨ç¤ºæ©Ÿèƒ½**

**å®Ÿè£…äºˆå®š**: v1.4 (2025å¹´8æœˆä¸‹æ—¬)  
**å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ“‹ è¨­è¨ˆæ®µéš

#### **å®Ÿè£…èƒŒæ™¯**
- **ç¾åœ¨ã®çŠ¶æ³**: ä½ç½®æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ ã¯é–¢ä¿‚ç¯€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ã¿ã«å®Ÿè£…æ¸ˆã¿
- **å†…éƒ¨å‡¦ç†**: `slot_positions`ã§ä½ç½®æƒ…å ±ã‚’è¨˜éŒ²ãƒ»ç®¡ç†ä¸­
- **å‡ºåŠ›åˆ¶é™**: ä½ç½®æƒ…å ±ã¯å†…éƒ¨åˆ¶å¾¡ç”¨ã®ã¿ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘è¡¨ç¤ºãªã—

#### **å®Ÿè£…è¨ˆç”»**

**Phase 1: å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¸ã®ä½ç½®æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µ**
```python
# æ‹¡å¼µå¯¾è±¡ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
âœ… relative_clause        # å®Ÿè£…æ¸ˆã¿ (sub-s:S, sub-aux:S, sub-v:S)
ğŸ”„ participle_construction # æ‹¡å¼µäºˆå®š
ğŸ”„ noun_clause            # æ–°è¦å®Ÿè£…äºˆå®š  
ğŸ”„ adverbial_clause       # æ–°è¦å®Ÿè£…äºˆå®š
ğŸ”„ passive_voice          # ä½ç½®æƒ…å ±å¯¾å¿œäºˆå®š
ğŸ”„ auxiliary_complex      # ä½ç½®æƒ…å ±å¯¾å¿œäºˆå®š
```

**Phase 2: ä½ç½®æƒ…å ±ä»˜ãå‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¨­è¨ˆ**
```python
# å¾“æ¥ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
'sub_slots': {
    'sub-s': 'The artist whose paintings',
    'sub-aux': 'were', 
    'sub-v': 'exhibited'
}

# æ–°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (ä½ç½®æƒ…å ±ä»˜ã)
'sub_slots': {
    'sub-s:S': 'The artist whose paintings',    # Sä½ç½®ã®å¾“å±ç¯€
    'sub-aux:S': 'were',                        # Sä½ç½®ã®åŠ©å‹•è©
    'sub-v:S': 'exhibited',                     # Sä½ç½®ã®å‹•è©
    'sub-m2:O1': 'quickly'                      # O1ä½ç½®ã®ä¿®é£¾èª
}
```

**Phase 3: UIè¡¨ç¤ºæ©Ÿèƒ½å¯¾å¿œ**
```html
<!-- ä½ç½®æƒ…å ±ãƒ™ãƒ¼ã‚¹è¡¨ç¤º -->
<div class="slot-position-s">
    <span class="sub-slot">sub-s:S</span>
    <span class="content">The artist whose paintings</span>
</div>
```

#### **æŠ€è¡“ä»•æ§˜**

**ä½ç½®ç‰¹å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **
```python
def _determine_element_position(self, sentence, element):
    """è¦ç´ ã®ä½ç½®ã‚’æ–‡æ³•çš„å½¹å‰²ã‹ã‚‰ç‰¹å®š"""
    if element.deprel in ['nsubj', 'nsubj:pass']:
        return 'S'
    elif element.deprel in ['obj', 'dobj']:
        return 'O1'
    elif element.deprel in ['iobj']:
        return 'O2'
    elif element.deprel in ['xcomp', 'ccomp']:
        return 'C1'
    # ç¶™ç¶šå®Ÿè£…...
```

**å‡ºåŠ›å½¢å¼åˆ¶å¾¡**
```python
# è¨­å®šã«ã‚ˆã‚‹å‡ºåŠ›åˆ¶å¾¡
output_format = {
    'show_position_info': True,     # ä½ç½®æƒ…å ±è¡¨ç¤ºON/OFF
    'position_delimiter': ':',      # åŒºåˆ‡ã‚Šæ–‡å­—
    'legacy_compatibility': False   # å¾“æ¥å½¢å¼ã¨ã®äº’æ›æ€§
}
```

#### **å®Ÿè£…å„ªå…ˆåº¦**
1. **é«˜**: é–¢ä¿‚ç¯€ä»¥å¤–ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¸ã®ä½ç½®æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µ
2. **ä¸­**: å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›´ã¨UIå¯¾å¿œ
3. **ä½**: è¨­å®šã«ã‚ˆã‚‹è¡¨ç¤ºåˆ¶å¾¡æ©Ÿèƒ½

---

**å®Ÿè£…å®Œäº†ç¢ºèª**: 2025å¹´8æœˆ21æ—¥æ™‚ç‚¹ã§ã€äººé–“æ–‡æ³•èªè­˜ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ãŒæˆåŠŸã—ã€54ä¾‹æ–‡å…¨ã¦ã§100%ç²¾åº¦ã‚’é”æˆã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚ŠåŸºç›¤ã‚·ã‚¹ãƒ†ãƒ ãŒç¢ºç«‹ã•ã‚Œã€æ¬¡æœŸv2.0ç³»é–‹ç™ºã®æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚

### **v1.4 (2025å¹´8æœˆ21æ—¥)**
- ğŸ† **100%ç²¾åº¦é”æˆ** (54/54ä¾‹æ–‡å®Œå…¨ä¸€è‡´)
- äººé–“æ–‡æ³•èªè­˜ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å®Œäº†
- "The man whose car is red lives here"ã®Stanzaèª¤èªè­˜å•é¡Œè§£æ±º
- whoseæ§‹æ–‡ã§ã®å‹•è©ä¿®æ­£ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…
- ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ (æ–‡æ›¸â†’æ–‡ãƒ¬ãƒ™ãƒ«æƒ…å ±ä¼é”)å®Œæˆ
- **Phase 2.0ç³»é–‹ç™ºå·¥ç¨‹ç­–å®šå®Œäº†**

### **v1.3 (2025å¹´8æœˆ21æ—¥)**
- Phase1/test-modeæ©Ÿèƒ½å‰Šé™¤å®Œäº†
- 94.3%ç²¾åº¦é”æˆ (50/53å®Œå…¨ä¸€è‡´)
- ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ç‰¹å®š: Cases 13,14,52
- ä½ç½®æƒ…å ±è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆç­–å®š

### **v1.2 (2025å¹´8æœˆ20æ—¥)**
- ä¸Šä½ã‚µãƒ–é€£çµæ±ç”¨ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å®Œäº†
- åˆ†è©æ§‹æ–‡ä¿è­·ã‚·ã‚¹ãƒ†ãƒ å¼·åŒ–
- 77.4%ç²¾åº¦é”æˆ

### **v1.1 (2025å¹´8æœˆ17æ—¥)**
- CLIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…å®Œäº†
- ãƒãƒƒãƒå‡¦ç†æ©Ÿèƒ½è¿½åŠ 
- çµæœç…§åˆã‚·ã‚¹ãƒ†ãƒ åˆ†é›¢
- 53ä¾‹æ–‡ä¸€æ‹¬å‡¦ç†å¯¾å¿œ
- ã‚«ã‚¹ã‚¿ãƒ ä¾‹æ–‡ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½

### **v1.0 (2025å¹´8æœˆ16æ—¥)**
- åˆç‰ˆãƒªãƒªãƒ¼ã‚¹
- 4ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…å®Œäº†
- 54ä¾‹æ–‡å¯¾å¿œç‰ˆæ§‹ç¯‰
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‹åŒæ™‚å‡¦ç†æ–¹å¼ç¢ºç«‹

---

**æ¬¡æœŸæ›´æ–°äºˆå®š**: v2.0 (ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–“æƒ…å ±ä¼é”ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€å®Ÿè£…ç‰ˆ)
