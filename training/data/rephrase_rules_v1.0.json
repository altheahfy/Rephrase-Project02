{
  "version": "1.0",
  "updated_at": "2025-08-08",
  "language": "en",
  "slot_order": [
    "S",
    "Aux",
    "V",
    "O1",
    "O2",
    "C1",
    "C2",
    "M1",
    "M2",
    "M3"
  ],
  "rules": [
    {
      "id": "aux-have",
      "priority": 10,
      "trigger": {
        "lemma": [
          "have"
        ],
        "pos": [
          "AUX",
          "VERB"
        ],
        "form": [
          "has",
          "have",
          "had"
        ]
      },
      "assign": {
        "slot": "Aux",
        "type": "word"
      }
    },
    {
      "id": "aux-will",
      "priority": 10,
      "trigger": {
        "token": "will"
      },
      "assign": {
        "slot": "Aux",
        "type": "word"
      }
    },
    {
      "id": "be-progressive",
      "priority": 12,
      "trigger": {
        "pattern": "(?i)\\b(am|is|are|was|were)\\s+\\w+ing\\b"
      },
      "assign": [
        {
          "slot": "Aux",
          "type": "word",
          "capture": 1
        },
        {
          "slot": "V",
          "type": "word",
          "capture": 0,
          "note": "V-ing as main verb"
        }
      ]
    },
    {
      "id": "wh-why-front",
      "priority": 5,
      "trigger": {
        "pattern": "(?i)^why\\b"
      },
      "assign": {
        "slot": "M3",
        "type": "word",
        "meta": {
          "QuestionType": "wh-word"
        }
      }
    },
    {
      "id": "wh-where-front", 
      "priority": 5,
      "trigger": {
        "pattern": "(?i)^where\\b"
      },
      "assign": {
        "slot": "M3",
        "value": "where_M3_1",
        "type": "word",
        "meta": {
          "QuestionType": "wh-word"
        }
      }
    },
    {
      "id": "subject-pronoun-np-front",
      "priority": 20,
      "trigger": {
        "pos": [
          "PRON",
          "NOUN",
          "PROPN"
        ],
        "position": "before_first_main_verb"
      },
      "assign": {
        "slot": "S",
        "type": "word"
      }
    },
    {
      "id": "time-M3",
      "priority": 40,
      "trigger": {
        "pattern": "(?i)\\b(last night|yesterday( morning| afternoon)?|this (morning|weekend)|next week|an? \\w+ ago|at \\d+(?::\\d+)?(\\s?(am|pm))?|at (noon|midnight)|on (monday|tuesday|wednesday|thursday|friday|saturday|sunday|\\b\\w+day)\\b)"
      },
      "assign": {
        "slot": "M3",
        "type": "word"
      }
    },
    {
      "id": "place-M3",
      "priority": 42,
      "trigger": {
        "pattern": "(?i)\\b(on|in|under|by|at)\\b\\s+[\\s\\S]+"
      },
      "assign": {
        "slot": "M3",
        "type": "word"
      }
    },
    {
      "id": "manner-degree-M2",
      "priority": 50,
      "trigger": {
        "pos": [
          "ADV"
        ],
        "position": "after_V"
      },
      "assign": {
        "slot": "M2",
        "type": "word"
      }
    },
    {
      "id": "to-direction-M2",
      "priority": 46,
      "trigger": {
        "pattern": "(?i)\\bto\\b\\s+[\\s\\S]+"
      },
      "assign": {
        "slot": "M2",
        "type": "word"
      }
    },
    {
      "id": "for-purpose-M2",
      "priority": 46,
      "trigger": {
        "pattern": "(?i)\\bfor\\b\\s+[\\s\\S]+"
      },
      "assign": {
        "slot": "M2",
        "type": "word"
      }
    },
    {
      "id": "from-source-M3",
      "priority": 46,
      "trigger": {
        "pattern": "(?i)\\bfrom\\b\\s+[\\s\\S]+"
      },
      "assign": {
        "slot": "M3",
        "type": "word"
      }
    },
    {
      "id": "if-clause-as-M2",
      "priority": 30,
      "trigger": {
        "pattern": "(?i)\\bif\\b\\s+[^?!.]+"
      },
      "assign": {
        "slot": "M2",
        "type": "clause",
        "subslots": [
          {
            "id": "sub-m1",
            "element": "if"
          },
          {
            "id": "sub-s",
            "element_rule": "first NP after if"
          },
          {
            "id": "sub-v",
            "element_rule": "first tensed V after sub-s"
          },
          {
            "id": "sub-o1",
            "element_rule": "direct object of sub-v, if any"
          }
        ]
      }
    },
    {
      "id": "V-recover-intrans",
      "priority": 15,
      "trigger": {
        "lemma": [
          "recover"
        ],
        "frame": "intransitive"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_hint": "M3",
          "note": "prefer FROM-PP as source if present"
        }
      ]
    },
    {
      "id": "V-listen-intrans",
      "priority": 15,
      "trigger": {
        "lemma": [
          "listen"
        ]
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)to\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-leave-intrans-depart",
      "priority": 15,
      "trigger": {
        "lemma": [
          "leave"
        ],
        "sense": "depart"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)for\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-go-intrans",
      "priority": 15,
      "trigger": {
        "lemma": [
          "go"
        ]
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)to\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-pay-intrans",
      "priority": 15,
      "trigger": {
        "lemma": [
          "pay"
        ],
        "frame": "intransitive_or_light"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)for\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-believe-in",
      "priority": 14,
      "trigger": {
        "pattern": "(?i)\\bbelieve\\s+in\\b"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word",
          "text_rule": "use 'believe in' as unit"
        },
        {
          "slot": "O1",
          "type": "word",
          "element_rule": "NP after 'in'"
        }
      ]
    },
    {
      "id": "V-apologize-intrans",
      "priority": 14,
      "trigger": {
        "lemma": [
          "apologize"
        ]
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M2",
          "pattern": "(?i)(to|for)\\s+[^]+"
        }
      ]
    },
    {
      "id": "V-rain-weather",
      "priority": 14,
      "trigger": {
        "lemma": [
          "rain"
        ]
      },
      "assign": [
        {
          "slot": "S",
          "type": "word",
          "element_rule": "weather 'it' if present"
        },
        {
          "slot": "V",
          "type": "word"
        }
      ]
    },
    {
      "id": "V-be-exist-loc",
      "priority": 14,
      "trigger": {
        "lemma": [
          "be"
        ],
        "sense": "exist_locative"
      },
      "assign": [
        {
          "slot": "V",
          "type": "word"
        },
        {
          "slot_prefill": "M3",
          "pattern": "(?i)\\b(on|in|under|by|at)\\b\\s+[^]+"
        }
      ]
    }
  ],
  "patterns": [
    {
      "id": "ditransitive_SVO1O2",
      "label": "第4文型（S V O1 O2）",
      "slot_order": [
        "M1?",
        "S",
        "Aux?",
        "V",
        "O1",
        "O2",
        "M2?",
        "M3?"
      ],
      "required_slots": [
        "S",
        "V",
        "O1",
        "O2"
      ],
      "optional_slots": [
        "Aux",
        "M1",
        "M2",
        "M3"
      ],
      "verbs": {
        "lemmas": [
          "give",
          "show",
          "tell"
        ],
        "past_forms": {
          "give": "gave",
          "show": "showed",
          "tell": "told"
        },
        "dative_shift": {
          "preposition_default": "to",
          "map": {
            "give": "to",
            "show": "to",
            "tell": "to"
          },
          "allow_for_with_give_meaning_pay_buy": false
        }
      },
      "constraints": {
        "O1_semantics": "recipient/animate_preferred",
        "O2_semantics": "theme/message/content",
        "no_double_determiner": true
      },
      "types": {
        "S": [
          "word",
          "phrase",
          "clause",
          "wh-who(subject)"
        ],
        "Aux": [
          "word"
        ],
        "V": [
          "word"
        ],
        "O1": [
          "word",
          "phrase"
        ],
        "O2": [
          "word",
          "phrase",
          "wh-what(object)"
        ],
        "M1": [
          "word",
          "phrase"
        ],
        "M2": [
          "word",
          "phrase"
        ],
        "M3": [
          "word",
          "phrase",
          "wh-where(adverbial)"
        ]
      },
      "question_rules": {
        "yn_question": {
          "requires_aux": true,
          "aux_forms": [
            "do/does/did",
            "be",
            "have",
            "modal"
          ],
          "inversion": "Aux-S"
        },
        "wh_on_O2": {
          "wh_word": "what",
          "fronting": true,
          "order": [
            "M1?",
            "O2(wh)",
            "Aux",
            "S",
            "V(base)",
            "O1",
            "M2?",
            "M3?"
          ],
          "verb_form": "base_if_do_support"
        },
        "wh_on_M3_where": {
          "wh_word": "where",
          "fronting": true,
          "order": [
            "M1?",
            "M3(wh=where)",
            "Aux",
            "S",
            "V(base)",
            "O1",
            "O2",
            "M2?"
          ]
        },
        "wh_on_S_who": {
          "wh_word": "who",
          "fronting": true,
          "aux_inversion": false,
          "order": [
            "M1?",
            "S(wh=who)",
            "V(finite)",
            "O1",
            "O2",
            "M2?",
            "M3?"
          ]
        },
        "negation": {
          "aux_needed": true,
          "marker": "not / n't",
          "do_support": "didn't + V(base) for past"
        }
      },
      "transformations": {
        "to_third_valent": [
          {
            "label": "O2前置（to）",
            "from": [
              "S",
              "V",
              "O1",
              "O2"
            ],
            "to": [
              "S",
              "V",
              "O2",
              "PP[to O1]"
            ],
            "notes": "受益者を to で出す（give/show/tell + O2 + to + O1）"
          }
        ]
      },
      "normalization": {
        "typo_fixes": [
          {
            "from": "messege",
            "to": "message"
          }
        ],
        "proper_noun_hint": {
          "Tom": "人名トム",
          "Emily": "人名エミリー"
        }
      },
      "examples_schema_check": {
        "accept_pronoun_O1": [
          "me",
          "him",
          "her",
          "us",
          "them"
        ],
        "accept_group_O1": [
          "team",
          "friends"
        ],
        "accept_content_O2": [
          "a message",
          "the truth",
          "a warning",
          "some unexpected news",
          "a funny story"
        ]
      }
    },
    {
      "id": "causative_make_SVO1C2",
      "label": "使役（make + O1 + C2[bare VP]）",
      "slot_order": [
        "M1?",
        "S",
        "Aux?",
        "V",
        "O1",
        "C2",
        "M2?",
        "M3?"
      ],
      "required_slots": [
        "S",
        "V",
        "O1",
        "C2"
      ],
      "optional_slots": [
        "Aux",
        "M1",
        "M2",
        "M3"
      ],
      "verbs": {
        "lemmas": [
          "make"
        ],
        "verb_form": {
          "C2": "bare_vp"
        },
        "aux_notes": "had to + make (base) observed; modal-perfect with past participle not applicable to 'make'."
      },
      "constraints": {
        "C2_form": "bare VP (V[base] (+ O/M) ...), no 'to'",
        "O1_semantics": "agent/experiencer being caused",
        "no_double_determiner": true
      },
      "types": {
        "S": [
          "word",
          "phrase",
          "clause"
        ],
        "Aux": [
          "word"
        ],
        "V": [
          "word"
        ],
        "O1": [
          "word",
          "phrase",
          "clause"
        ],
        "C2": [
          "bare-vp",
          "phrase"
        ],
        "M1": [
          "word",
          "phrase",
          "clause"
        ],
        "M2": [
          "word",
          "phrase",
          "clause"
        ],
        "M3": [
          "word",
          "phrase",
          "clause"
        ]
      },
      "question_rules": {
        "yn_question": {
          "requires_aux": true,
          "aux_forms": [
            "do/does/did",
            "modal"
          ],
          "inversion": "Aux-S",
          "verb_form": "base_if_do_support"
        },
        "wh_on_C2": {
          "wh_word": "what/how",
          "fronting": false,
          "note": "C2 is a VP; wh usually targets object/adjuncts inside C2."
        },
        "negation": {
          "aux_needed": true,
          "marker": "not / n't"
        }
      },
      "examples_link": {
        "source_examples": [
          "ex007",
          "ex008"
        ]
      }
    },
    {
      "id": "copular_become_SC1",
      "label": "連結動詞 become（S V C1）",
      "slot_order": [
        "M1?",
        "S",
        "Aux?",
        "V",
        "C1",
        "M2?",
        "M3?"
      ],
      "required_slots": [
        "S",
        "V",
        "C1"
      ],
      "optional_slots": [
        "Aux",
        "M1",
        "M2",
        "M3"
      ],
      "verbs": {
        "lemmas": [
          "become"
        ]
      },
      "constraints": {
        "C1_semantics": "state/identity",
        "C1_type": [
          "word",
          "phrase"
        ],
        "no_double_determiner": true
      },
      "types": {
        "S": [
          "word",
          "phrase",
          "clause"
        ],
        "Aux": [
          "word"
        ],
        "V": [
          "word"
        ],
        "C1": [
          "word",
          "phrase"
        ],
        "M1": [
          "word",
          "phrase",
          "clause"
        ],
        "M2": [
          "word",
          "phrase",
          "clause"
        ],
        "M3": [
          "word",
          "phrase",
          "clause"
        ]
      },
      "question_rules": {
        "yn_question": {
          "requires_aux": true,
          "aux_forms": [
            "do/does/did",
            "modal"
          ],
          "inversion": "Aux-S"
        },
        "wh_on_C1": {
          "wh_word": "what/who",
          "fronting": false
        },
        "negation": {
          "aux_needed": true,
          "marker": "not / n't"
        }
      },
      "examples_link": {
        "source_examples": [
          "ex005",
          "ex006"
        ]
      }
    },
    {
      "id": "cognition_verb_that_clause",
      "label": "認識動詞 + that節（S V O1[that-clause]）",
      "slot_order": [
        "M1?",
        "S",
        "Aux?",
        "V",
        "O1",
        "M2?",
        "M3?"
      ],
      "required_slots": [
        "S",
        "V",
        "O1"
      ],
      "optional_slots": [
        "Aux",
        "M1",
        "M2",
        "M3"
      ],
      "verbs": {
        "lemmas": [
          "know",
          "figure out",
          "realize",
          "believe",
          "think"
        ]
      },
      "constraints": {
        "O1_type": "clause",
        "that_optional": true
      },
      "types": {
        "S": [
          "word",
          "phrase",
          "clause"
        ],
        "Aux": [
          "word"
        ],
        "V": [
          "word"
        ],
        "O1": [
          "clause"
        ],
        "M1": [
          "word",
          "phrase",
          "clause"
        ],
        "M2": [
          "word",
          "phrase",
          "clause"
        ],
        "M3": [
          "word",
          "phrase",
          "clause"
        ]
      },
      "question_rules": {
        "yn_question": {
          "requires_aux": true,
          "aux_forms": [
            "do/does/did",
            "be",
            "have",
            "modal"
          ],
          "inversion": "Aux-S"
        },
        "wh_on_O1": {
          "wh_word": "what/why/how/where",
          "fronting": true,
          "order": [
            "M1?",
            "O1(wh)",
            "Aux",
            "S",
            "V(base)",
            "M2?",
            "M3?"
          ]
        },
        "negation": {
          "aux_needed": true,
          "marker": "not / n't"
        }
      },
      "examples_link": {
        "source_examples": [
          "ex001",
          "ex002",
          "ex011",
          "ex009(partial)"
        ]
      }
    }
  ],
  "subclause_schema": {
    "id": "default_subclause",
    "description": "Generic subclause template extracted from corpus",
    "subslots": [
      "sub-m1",
      "sub-s",
      "sub-aux?",
      "sub-v",
      "sub-o1?",
      "sub-o2?",
      "sub-m2?",
      "sub-m3?",
      "sub-c1?"
    ],
    "notes": "Optional marks with '?' occur depending on clause type (e.g., relative, adverbial, to-infinitival)."
  },
  "slot_types": {
    "S": [
      "word",
      "phrase",
      "clause",
      "wh-who(subject)"
    ],
    "Aux": [
      "word"
    ],
    "V": [
      "word"
    ],
    "O1": [
      "word",
      "phrase",
      "clause",
      "wh-what(object)"
    ],
    "O2": [
      "word",
      "phrase",
      "clause",
      "wh-what(object)"
    ],
    "C1": [
      "word",
      "phrase"
    ],
    "C2": [
      "word",
      "phrase",
      "bare-vp"
    ],
    "M1": [
      "word",
      "phrase",
      "clause"
    ],
    "M2": [
      "word",
      "phrase",
      "clause"
    ],
    "M3": [
      "word",
      "phrase",
      "clause",
      "wh-where(adverbial)"
    ]
  },
  "validation": {
    "forms": [
      "If Aux contains 'did' or 'didn't' => main V must be base form.",
      "If Aux is a perfect/modal-perfect (have/has/had + V-en OR modal + have) => V must be past participle.",
      "If progressive (be + V-ing) => Aux is be-form and V is -ing.",
      "If Aux is 'had to' (modal-pseudo) => V is base.",
      "If modal only (can/could/might/may/will/would/should/must) => V is base."
    ],
    "ordering": [
      "Global preferred order: S, Aux, V, O1/O2/C1/C2, M2, M3 (M1 may appear sentence-initial).",
      "Ditransitive 4-place: O1 (recipient) precedes O2 (theme) unless dative-shift transformation applied.",
      "For wh-questions on subject (who), do not invert Aux and S."
    ],
    "slot_semantics": [
      "O1 tends to be recipient/animate in ditransitives; O2 is theme/content.",
      "C1 is subject complement (NP/AdjP).",
      "C2 is object complement; allow bare-VP after causative/perception verbs."
    ]
  },
  "postprocess": [
    {
      "id": "dedupe-slots",
      "rule": "keep first by priority; merge remaining as extra M2/M3 if safe"
    },
    {
      "id": "order",
      "rule": "enforce slot_display_order: S, Aux, V, M2, M3"
    },
    {
      "id": "normalize-dativeshift-prep",
      "rule": "In ditransitives, when O2 precedes, insert PP[to O1] unless verb-specific map overrides."
    },
    {
      "id": "wh-fronting-sanity",
      "rule": "When wh-fronting occurs, ensure a single Aux at highest scope and base-form main V if do-support is used."
    }
  ],
  "changelog": [
    {
      "version": "0.2",
      "changes": [
        "第4文型 S V O1 O2 を追加（give/show/tell）",
        "疑問（did + 原形）の倒置ルール、否定（didn't + 原形）を追加",
        "O2=what の wh前置、M3=where の wh前置、主語wh=who（非倒置）を追加",
        "M1（文頭副詞）の順序・任意化を追加",
        "三人称・代名詞 O1 の許容、内容語 O2 の代表セットをヒント登録",
        "to への書き換え（S V O2 to O1）をトランスフォームとして追加",
        "typo 正規化（messege → message）を追加"
      ]
    },
    {
      "version": "1.0",
      "changes": [
        "v0.1の汎用ルール群を継承・整理。",
        "v0.2の第4文型（S V O1 O2）パターンを正式統合。",
        "使役構文（make + O1 + C2[bare VP]）パターンを追加。",
        "連結動詞 become の SVC1 パターンを追加。",
        "認識動詞＋that節（O1=従属節）パターンを追加。",
        "サブクローズ共通スキーマ（sub-m1, sub-s, sub-aux?, sub-v, ...）を追加。",
        "フォーム検証（modal-perfect, had to, progressive など）を強化。",
        "postprocessに wh前置と与格交替のサニティチェック規則を追加。"
      ]
    }
  ],
  "slot_notes": {
    "M1": "文頭の時/場所/状況の副詞句（例: yesterday, last weekend, this morning, at the meeting）",
    "M2": "様態や理由などの副詞句（ここでは最小対応）",
    "M3": "場所・時間などの後置/wh化可能な副詞句（where を想定）",
    "Aux": "did/didn't が出たら V は原形（give/show/tell）。過去肯定は V 過去形（gave/showed/told）。",
    "C1": "主語補語（become/appear等）。名詞句/形容詞句が中心。必要に応じて後置修飾を含みうる。",
    "C2": "目的語補語（make/keep/find等）。bare VP を許容（使役・知覚系）。"
  }
}