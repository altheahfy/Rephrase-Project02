
# Rephraseプロジェクト 統合マニュアル骨子（第1章〜第5章＋slot_textルール）

---

## 第1章：全体仕様概要

### 目的
本仕様書は、Rephraseプロジェクトにおける構文DB用JSONファイルの正確な仕様を明示し、
例文データのDB記載、UI反映までの過程で不整合を防ぎ、あらゆる構文パターンに対応することを目的とする。

### 基本形式
各JSONは 1 文例 = 1 オブジェクトの形式とする。
```json
{
  "構文ID": 5001,
  "例文ID": "ex001",
  "V_group_key": "figure out",
  "V_display": "figured out",
  "原文": "At the very last second, the thoughtful woman must have figured out that he wanted to avoid confrontation because he feared upsetting her.",
  "slot_data": [...]
}
```

---

## 第2章：slot_data の構造規則


### slot_data の必須要素

- `例文ID`: `ex` に続く3桁の連番形式（例: ex001, ex002）。枝番や長い名称は禁止し、DB の一貫性を保つこと。

- `slot`: スロット名 (M1, S, Aux, V, M2, C1, O1, O2, C2, M3)
- `phrase`: 対応語句（例文原文に忠実に記載）
- `type`: `word`, `phrase`, `clause` のいずれか
  - type の判定基準:
    - 名詞中心でその名詞が動作の主体になる動詞が存在しない場合 → `word`
    - 主語が表記上存在しないが、上位スロットの主語が動作主体であり、かつその動詞が存在する場合 → `phrase`
    - 節内部に主語と動詞が明示されている場合 → `clause`
- `slot_text`: type = word の場合に必要に応じ付与（補助説明）

### 補足
- phrase の記載は例文原文に忠実に行う。不要な大文字化・小文字化・句読点追加は禁止。
- slot_text の付与は slottext.json のルール、または補助ルールに従う。
- slot_text は type = word の slot / subslot に発生し得る。


---

## 第3章：subslot 構造・分解ルール

### サブスロットを持つ条件
- clause 型 slot に加え、phrase 型 slot も subslots を持つ場合がある。
- 内部にさらに文要素分解が必要な場合は subslots を記載。

### subslot の要素
- `slot`: sub-s, sub-v, sub-aux, sub-o1, sub-o2, sub-c1, sub-c2, sub-m1, sub-m2, sub-m3 のいずれか
- `phrase`: 対応語句（関係詞・限定詞・導入語を含む）
- `slot_text`: type = word の場合、必要に応じ付与（補助説明）

### 分解規則
- sub-s: 主語部分（関係詞・限定詞含む）
    - 必ず先行名詞句＋関係詞・限定詞を含めること。
    - 例: a detailed plan she, the boy who, the proposal that
- sub-v: 動詞部分（助動詞・句動詞含む、副詞は含めない）
- sub-o1, sub-o2: 目的語・補足語
- sub-m1〜m3: 副詞要素（理由・時間・条件等）

### 注意
- 関係詞・導入語を subslot phrase から除外してはならない。
- slot_text はイラスト化が困難な場合の補助として必要に応じ付与。

---

## 第4章：動詞・補助表現の区分原則

### V_group_key と V_display
- V_group_key：構文代表動詞（例：figure out）
- V_display：文中での実際の動詞形（例：figured out）

### 補助動詞（Aux）
- 受動・進行・完了・可能などの補助表現を Aux に記載。
- 意志・決定動詞＋不定詞は V と O1 に分ける。

---

## 第5章：slot 名・subslot 名・表記統一規則

### slot 名
M1, S, Aux, V, M2, C1, O1, O2, C2, M3 のいずれか。

### subslot 名
sub-s, sub-v, sub-aux, sub-o1, sub-o2, sub-c1, sub-c2, sub-m1, sub-m2, sub-m3 のいずれか。

### phrase 記載ルール
- phrase は原文に忠実に記載。
- 関係詞・導入語・限定詞は必ず含める。
- slot_text は type = word の slot / subslot に付与対象となる。

---

## 第6章：枠 → 生成 → 埋める方式テンプレート

### 目的
この章は、文法要点に基づくスロット枠提示と、ChatGPT による例文生成・スロット埋め込みを一貫して行う手順を示す。  
これにより、例文分解工程を不要とし、初期から構造と例文の整合性を担保する。

### 手順テンプレート

1?? 構文ID・文法要点の指定  
例: 構文ID: 5001 / 文法要点: 不定詞の名詞的用法 + SVO構造

2?? スロット枠提示  
例: M1, S, Aux, V, O1, O2, C1, C2, M2, M3  
各slotに期待する要素（簡潔な指示）も提示：  
- S: 人称代名詞または the+名詞
- V: 構文代表動詞（例: figure out）
- O1: 不定詞句（名詞的用法） など

3?? ChatGPTへの指示例  
「上記のスロット枠と文法要点に従い、整合した英文を生成し、対応する JSON データを出力せよ。」

4?? 出力フォーマット例  
ChatGPT は生成した文と対応する JSON をセットで提示。

### 活用例（テンプレート案）
```json
{
  "構文ID": 5001,
  "例文ID": "ex_template_001",
  "V_group_key": "figure out",
  "V_display": "figured out",
  "原文": "At the last moment, she figured out how to solve the issue.",
  "slot_data": [...]
}
```


---

## 第7章：標準指示書テンプレート

### 目的
本章では、枠 → 生成 → 埋める方式を実行する際の具体的な指示文と、期待される標準出力例を示す。  
これにより、指示内容のブレや出力確認基準の揺れを防ぐ。

### 標準指示文例

- 構文ID: 5001  
- 文法要点: 不定詞の名詞的用法 + SVO構造  
- スロット枠: M1, S, Aux, V, O1, O2, C1, C2, M2, M3  
- 各スロット要素:
  - S: 人称代名詞または the + 名詞
  - V: 構文代表動詞 (例: figure out)
  - O1: 不定詞句 (名詞的用法)
  - 他: 適切な修飾語句

指示文例:  
「構文ID5001、文法要点は不定詞の名詞的用法SVO構造。上記スロット枠と要素ガイドに従い、自然で正確な英文を1つ生成し、対応する JSON を出力せよ。」

### 期待される出力例

英文例:  
At the last moment, she figured out how to solve the issue.

JSON例:
```json
{
  "構文ID": 5001,
  "例文ID": "ex_template_001",
  "V_group_key": "figure out",
  "V_display": "figured out",
  "原文": "At the last moment, she figured out how to solve the issue.",
  "slot_data": [...]
}
```


---

## 第8章：実務上の注意と落とし穴

### 注意点と落とし穴集

- clause型 sub-s の phrase で関係詞や限定詞を漏らさないこと  
  ? 例：the boy that の「that」を sub-s から落とす誤りが発生した

- phrase の phrase 記載で不要な大文字化やピリオド追加をしないこと  
  ? 例：「The request.」のように末尾に不要なピリオドが追加された事例あり

- slot_text を句・節 (type = phrase / clause) に付与しないこと  
  ? 例：clause型 slot に slot_text が誤って付与された

- O1 の不定詞句に subslots を記載漏れしないこと  
  ? 例：to show the intern a guide が subslots を持たず誤記載された

- 意志動詞＋不定詞を Aux に分類しないこと  
  ? 例：decided to show が「Aux: decided to」と誤分類された

### 目的
これらの注意点は、過去の実務ミスをもとに整理したものであり、仕様遵守と精度向上のための指針とする。
